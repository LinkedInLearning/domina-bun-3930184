import{createRequire as UY}from"node:module";var zY=Object.create;var{getPrototypeOf:MY,defineProperty:t6,getOwnPropertyNames:BY}=Object;var GY=Object.prototype.hasOwnProperty;var H1=($,X,Z)=>{Z=$!=null?zY(MY($)):{};let Q=X||!$||!$.__esModule?t6(Z,"default",{value:$,enumerable:!0}):Z;for(let W of BY($))if(!GY.call(Q,W))t6(Q,W,{get:()=>$[W],enumerable:!0});return Q};var s6=($,X)=>()=>(X||$((X={exports:{}}).exports,X),X.exports);var x0=($,X)=>{for(var Z in X)t6($,Z,{get:X[Z],enumerable:!0,configurable:!0,set:(Q)=>X[Z]=()=>Q})};var qY=UY(import.meta.url);var NX=s6(($W)=>{Object.defineProperty($W,"__esModule",{value:!0});$W.parse=GG;$W.serialize=UG;var WG=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,YG=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,JG=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,zG=/^[\u0020-\u003A\u003D-\u007E]*$/,MG=Object.prototype.toString,BG=(()=>{let $=function(){};return $.prototype=Object.create(null),$})();function GG($,X){let Z=new BG,Q=$.length;if(Q<2)return Z;let W=X?.decode||qG,Y=0;do{let J=$.indexOf("=",Y);if(J===-1)break;let z=$.indexOf(";",Y),B=z===-1?Q:z;if(J>B){Y=$.lastIndexOf(";",J-1)+1;continue}let q=aQ($,Y,J),G=eQ($,J,q),A=$.slice(q,G);if(Z[A]===void 0){let O=aQ($,J+1,B),M=eQ($,B,O),F=W($.slice(O,M));Z[A]=F}Y=B+1}while(Y<Q);return Z}function aQ($,X,Z){do{let Q=$.charCodeAt(X);if(Q!==32&&Q!==9)return X}while(++X<Z);return Z}function eQ($,X,Z){while(X>Z){let Q=$.charCodeAt(--X);if(Q!==32&&Q!==9)return X+1}return Z}function UG($,X,Z){let Q=Z?.encode||encodeURIComponent;if(!WG.test($))throw new TypeError(`argument name is invalid: ${$}`);let W=Q(X);if(!YG.test(W))throw new TypeError(`argument val is invalid: ${X}`);let Y=$+"="+W;if(!Z)return Y;if(Z.maxAge!==void 0){if(!Number.isInteger(Z.maxAge))throw new TypeError(`option maxAge is invalid: ${Z.maxAge}`);Y+="; Max-Age="+Z.maxAge}if(Z.domain){if(!JG.test(Z.domain))throw new TypeError(`option domain is invalid: ${Z.domain}`);Y+="; Domain="+Z.domain}if(Z.path){if(!zG.test(Z.path))throw new TypeError(`option path is invalid: ${Z.path}`);Y+="; Path="+Z.path}if(Z.expires){if(!wG(Z.expires)||!Number.isFinite(Z.expires.valueOf()))throw new TypeError(`option expires is invalid: ${Z.expires}`);Y+="; Expires="+Z.expires.toUTCString()}if(Z.httpOnly)Y+="; HttpOnly";if(Z.secure)Y+="; Secure";if(Z.partitioned)Y+="; Partitioned";if(Z.priority)switch(typeof Z.priority==="string"?Z.priority.toLowerCase():Z.sameSite){case"low":Y+="; Priority=Low";break;case"medium":Y+="; Priority=Medium";break;case"high":Y+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${Z.priority}`)}if(Z.sameSite)switch(typeof Z.sameSite==="string"?Z.sameSite.toLowerCase():Z.sameSite){case!0:case"strict":Y+="; SameSite=Strict";break;case"lax":Y+="; SameSite=Lax";break;case"none":Y+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${Z.sameSite}`)}return Y}function qG($){if($.indexOf("%")===-1)return $;try{return decodeURIComponent($)}catch(X){return $}}function wG($){return MG.call($)==="[object Date]"}});var g6=s6((_V,QW)=>{var XW=12,NG=0,DX=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function DG($){var X=$.indexOf("%");if(X===-1)return $;var Z=$.length,Q="",W=0,Y=0,J=X,z=XW;while(X>-1&&X<Z){var B=ZW($[X+1],4),q=ZW($[X+2],0),G=B|q,A=DX[G];if(z=DX[256+z+A],Y=Y<<6|G&DX[364+A],z===XW)Q+=$.slice(W,J),Q+=Y<=65535?String.fromCharCode(Y):String.fromCharCode(55232+(Y>>10),56320+(Y&1023)),Y=0,W=X+3,X=J=$.indexOf("%",W);else if(z===NG)return null;else{if(X+=3,X<Z&&$.charCodeAt(X)===37)continue;return null}}return Q+$.slice(W)}var PG={"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function ZW($,X){var Z=PG[$];return Z===void 0?255:Z<<X}QW.exports=DG});var QY=s6((ZY)=>{var NU=/[<"'&]/,DU=/[a-z][A-Z]/;function kX($,X){let Z=$.charCodeAt(X);return Z>=65&&Z<=90}function sW($){if(!DU.test($))return $;let X=$.length,Z=0,Q=0,W="",Y=!0,J=kX($,0),z;for(;Q<X;Q++){if(z=kX($,Q+1),!Y&&J&&!z)W+=$.slice(Z,Q)+"-"+$[Q].toLowerCase(),Z=Q+1;Y=J,J=z}return W+=$.slice(Z,Q),W}function rW($,...X){let Z=$.length,Q=X.length,W=0,Y="";for(;W<Z;W++)if(Y+=$[W],W<Q)Y+=X[W];return G6(Y)}var G6=function($){if(typeof $!=="string")$=$.toString();if(!NU.test($))return $;let X=$.length,Z="",Q=0,W=0;for(;W<X;W++)switch($[W]){case"&":Z+=$.slice(Q,W)+"&amp;",Q=W+1;continue;case"<":Z+=$.slice(Q,W)+"&lt;",Q=W+1;continue;case'"':Z+=$.slice(Q,W)+"&#34;",Q=W+1;continue;case"'":Z+=$.slice(Q,W)+"&#39;",Q=W+1;continue}return Z+=$.slice(Q,W),Z};if(typeof Bun!=="undefined")G6=Bun.escapeHTML;function aW($){return $==="meta"||$==="link"||$==="img"||$==="br"||$==="input"||$==="hr"||$==="area"||$==="base"||$==="col"||$==="command"||$==="embed"||$==="keygen"||$==="param"||$==="source"||$==="track"||$==="wbr"}function eW($){if(typeof $==="string"){let q=$.indexOf('"');if(q===-1)return $;let G=$.length,A="",O=0;for(;q<G;q++)if($[q]==='"')A+=$.slice(O,q)+"&#34;",O=q+1;return A+=$.slice(O,q),A}let X=Object.keys($),Z=X.length,Q,W,Y,J,z=0,B="";for(;z<Z;z++){if(Q=X[z],W=$[Q],W===null||W===void 0)continue;if(B+=sW(Q)+":",typeof W!=="string"){B+=W.toString()+";";continue}if(Y=W.indexOf('"'),Y===-1){B+=W+";";continue}let q=W.length;J=0;for(;Y<q;Y++)if(W[Y]==='"')B+=W.slice(J,Y)+"&#34;",J=Y+1;B+=W.slice(J,Y)+";"}return B}function TX($){let X=Object.keys($),Z=X.length,Q,W,Y,J,z,B,q,G="",A=0;for(;A<Z;A++){if(Q=X[A],Q==="children"||Q==="safe"||Q==="of")continue;if(W=$[Q],Q==="className"){if($.class!==void 0)continue;Q="class"}else if(Q==="class"&&Array.isArray(W)){B=W,q=W.length,W="";for(let O=0;O<q;O++)if(B[O]&&B[O].length>0)if(W)W+=" "+B[O].trim();else W+=B[O].trim();if(W.length===0)continue}else if(Q==="style"){G+=' style="'+eW(W)+'"';continue}else if(Q==="attrs"){if(typeof W==="string")G+=" "+W;else G+=TX(W);continue}if(Y=typeof W,Y==="boolean"){if(W)G+=" "+Q;continue}if(W===null||W===void 0)continue;if(G+=" "+Q,Y!=="string"){if(Y!=="object"){G+='="'+W.toString()+'"';continue}if(W instanceof Date){G+='="'+W.toISOString()+'"';continue}W=W.toString()}if(J=W.indexOf('"'),J===-1){G+='="'+W+'"';continue}G+='="',q=W.length,z=0;for(;J<q;J++)if(W[J]==='"')G+=W.slice(z,J)+"&#34;",z=J+1;G+=W.slice(z,J)+'"'}return G}function U6($,X){let Z=$.length,Q="";for(let W=0;W<Z;W++){let Y=$[W];switch(typeof Y){case"string":case"number":case"bigint":Q+=Y;continue;case"boolean":continue}if(!Y)continue;if(Array.isArray(Y)){$.splice(W--,1,...Y),Z+=Y.length-1;continue}if(typeof Y.then==="function")return Promise.all($.slice(W)).then(function J(z){return z.unshift(Q),U6(z,X)});throw new Error("Objects are not valid as a KitaJSX child")}if(X===!0)return G6(Q);return Q}function $Y($,X){switch(typeof $){case"string":return X?G6($):$;case"number":case"bigint":return $.toString();case"boolean":return""}if(!$)return"";if(Array.isArray($))return U6($,X);if(typeof $.then==="function")return $.then(function Z(Q){return $Y(Q,X)});throw new Error("Objects are not valid as a KitaJSX child")}function XY($,X,...Z){let Q=X!==null;if(typeof $==="function"){if(!Q)return $({children:Z.length>1?Z:Z[0]});return X.children=Z.length>1?Z:Z[0],$(X)}if(Q&&$==="tag")$=X.of;let W=Q?TX(X):"";if(Z.length===0)return aW($)?"<"+$+W+"/>":"<"+$+W+"></"+$+">";let Y=U6(Z,Q&&X.safe);if(typeof Y==="string")return"<"+$+W+">"+Y+"</"+$+">";return Y.then(function J(z){return"<"+$+W+">"+z+"</"+$+">"})}function PU($){return U6([$.children])}ZY.escape=rW;ZY.e=rW;ZY.escapeHtml=G6;ZY.isVoidElement=aW;ZY.attributesToString=TX;ZY.toKebabCase=sW;ZY.isUpper=kX;ZY.styleToString=eW;ZY.createElement=XY;ZY.h=XY;ZY.contentsToString=U6;ZY.contentToString=$Y;ZY.Fragment=PU;ZY.Html={...ZY}});function w6($){return i8($)&&Symbol.asyncIterator in $}function H6($){return i8($)&&Symbol.iterator in $}function D8($){return i8($)&&(Object.getPrototypeOf($)===Object.prototype||Object.getPrototypeOf($)===null)}function A6($){return $ instanceof Promise}function w2($){return $ instanceof Date&&Number.isFinite($.getTime())}function b2($){return ArrayBuffer.isView($)}function e0($){return $ instanceof globalThis.Uint8Array}function i($,X){return X in $}function i8($){return $!==null&&typeof $==="object"}function d($){return Array.isArray($)&&!ArrayBuffer.isView($)}function C8($){return $===void 0}function U0($){return $===null}function t2($){return typeof $==="boolean"}function g($){return typeof $==="number"}function N6($){return Number.isInteger($)}function l8($){return typeof $==="bigint"}function c($){return typeof $==="string"}function D6($){return typeof $==="function"}function W2($){return typeof $==="symbol"}function H2($){return l8($)||t2($)||U0($)||g($)||c($)||W2($)||C8($)}var I8;(function($){$.ExactOptionalPropertyTypes=!1,$.AllowArrayObject=!1,$.AllowNaN=!1,$.AllowNullVoid=!1;function X(J,z){return $.ExactOptionalPropertyTypes?z in J:J[z]!==void 0}$.IsExactOptionalProperty=X;function Z(J){let z=i8(J);return $.AllowArrayObject?z:z&&!d(J)}$.IsObjectLike=Z;function Q(J){return Z(J)&&!(J instanceof Date)&&!(J instanceof Uint8Array)}$.IsRecordLike=Q;function W(J){return $.AllowNaN?g(J):Number.isFinite(J)}$.IsNumberLike=W;function Y(J){let z=C8(J);return $.AllowNullVoid?z||J===null:z}$.IsVoidLike=Y})(I8||(I8={}));var w8={};x0(w8,{Set:()=>DY,Has:()=>NY,Get:()=>PY,Entries:()=>wY,Delete:()=>AY,Clear:()=>HY});var $1=new Map;function wY(){return new Map($1)}function HY(){return $1.clear()}function AY($){return $1.delete($)}function NY($){return $1.has($)}function DY($,X){$1.set($,X)}function PY($){return $1.get($)}var j8={};x0(j8,{Set:()=>SY,Has:()=>FY,Get:()=>KY,Entries:()=>OY,Delete:()=>_Y,Clear:()=>LY});var X1=new Map;function OY(){return new Map(X1)}function LY(){return X1.clear()}function _Y($){return X1.delete($)}function FY($){return X1.has($)}function SY($,X){X1.set($,X)}function KY($){return X1.get($)}var K8=Symbol.for("TypeBox.Transform"),s2=Symbol.for("TypeBox.Readonly"),t8=Symbol.for("TypeBox.Optional"),A2=Symbol.for("TypeBox.Hint"),N=Symbol.for("TypeBox.Kind");function A1($={}){return{...$,[N]:$[N]??"Unsafe"}}class v extends Error{constructor($){super($)}}class r6 extends v{constructor($){super(`Duplicate type kind '${$}' detected`)}}class a6 extends v{constructor($){super(`Duplicate string format '${$}' detected`)}}var r2;(function($){function X(Q,W){if(j8.Has(Q))throw new r6(Q);return j8.Set(Q,W),(Y={})=>A1({...Y,[N]:Q})}$.Type=X;function Z(Q,W){if(w8.Has(Q))throw new a6(Q);return w8.Set(Q,W),Q}$.Format=Z})(r2||(r2={}));function a($){return{[N]:"MappedResult",properties:$}}var J2={};x0(J2,{IsUndefined:()=>b8,IsUint8Array:()=>k0,IsSymbol:()=>W$,IsString:()=>O8,IsRegExp:()=>Q$,IsObject:()=>P8,IsNumber:()=>d2,IsNull:()=>Z$,IsIterator:()=>X$,IsFunction:()=>$$,IsDate:()=>D1,IsBoolean:()=>C0,IsBigInt:()=>N1,IsAsyncIterator:()=>e6,IsArray:()=>Y2});function e6($){return P8($)&&!Y2($)&&!k0($)&&Symbol.asyncIterator in $}function Y2($){return Array.isArray($)}function N1($){return typeof $==="bigint"}function C0($){return typeof $==="boolean"}function D1($){return $ instanceof globalThis.Date}function $$($){return typeof $==="function"}function X$($){return P8($)&&!Y2($)&&!k0($)&&Symbol.iterator in $}function Z$($){return $===null}function d2($){return typeof $==="number"}function P8($){return typeof $==="object"&&$!==null}function Q$($){return $ instanceof globalThis.RegExp}function O8($){return typeof $==="string"}function W$($){return typeof $==="symbol"}function k0($){return $ instanceof globalThis.Uint8Array}function b8($){return $===void 0}function CY($){return $.map((X)=>P6(X))}function jY($){return new Date($.getTime())}function bY($){return new Uint8Array($)}function RY($){return new RegExp($.source,$.flags)}function VY($){let X={};for(let Z of Object.getOwnPropertyNames($))X[Z]=P6($[Z]);for(let Z of Object.getOwnPropertySymbols($))X[Z]=P6($[Z]);return X}function P6($){return Y2($)?CY($):D1($)?jY($):k0($)?bY($):Q$($)?RY($):P8($)?VY($):$}function dX($){return P6($)}function x8($){return $.map((X)=>C(X))}function C($,X={}){return{...dX($),...X}}function EY($,X){let{[X]:Z,...Q}=$;return Q}function k8($,X){return X.reduce((Z,Q)=>EY(Z,Q),$)}function P1($,X={}){return{...X,[N]:"Array",type:"array",items:C($)}}function O1($,X={}){return{...X,[N]:"AsyncIterator",type:"AsyncIterator",items:C($)}}function L1($,X,Z){return{...Z,[N]:"Constructor",type:"Constructor",parameters:x8($),returns:C(X)}}function q0($,X,Z){return{...Z,[N]:"Function",type:"Function",parameters:x8($),returns:C(X)}}function J8($={}){return{...$,[N]:"Never",not:{}}}function vX($){return P8($)&&$[s2]==="Readonly"}function a2($){return P8($)&&$[t8]==="Optional"}function IY($){return e($,"Any")}function w0($){return e($,"Array")}function _1($){return e($,"AsyncIterator")}function Y$($){return e($,"BigInt")}function J$($){return e($,"Boolean")}function F1($){return e($,"Constructor")}function xY($){return e($,"Date")}function S1($){return e($,"Function")}function T0($){return e($,"Integer")}function T8($){return e($,"Intersect")}function K1($){return e($,"Iterator")}function e($,X){return P8($)&&N in $&&$[N]===X}function H0($){return e($,"Literal")}function N2($){return e($,"MappedKey")}function F8($){return e($,"MappedResult")}function Z1($){return e($,"Never")}function kY($){return e($,"Not")}function TY($){return e($,"Null")}function g0($){return e($,"Number")}function d8($){return e($,"Object")}function f0($){return e($,"Promise")}function z$($){return e($,"Record")}function M$($){return e($,"Ref")}function B$($){return e($,"RegExp")}function C1($){return e($,"String")}function gY($){return e($,"Symbol")}function D2($){return e($,"TemplateLiteral")}function fY($){return e($,"This")}function Q1($){return P8($)&&K8 in $}function v2($){return e($,"Tuple")}function yY($){return e($,"Undefined")}function Z8($){return e($,"Union")}function dY($){return e($,"Uint8Array")}function vY($){return e($,"Unknown")}function hY($){return e($,"Unsafe")}function pY($){return e($,"Void")}function mY($){return P8($)&&N in $&&O8($[N])}function P2($){return IY($)||w0($)||J$($)||Y$($)||_1($)||F1($)||xY($)||S1($)||T0($)||T8($)||K1($)||H0($)||N2($)||F8($)||Z1($)||kY($)||TY($)||g0($)||d8($)||f0($)||z$($)||M$($)||B$($)||C1($)||gY($)||D2($)||fY($)||v2($)||yY($)||Z8($)||dY($)||vY($)||hY($)||pY($)||mY($)}function cY($){return k8(C($),[t8])}function iY($){return{...C($),[t8]:"Optional"}}function lY($,X){return X===!1?cY($):iY($)}function $2($,X){let Z=X??!0;return F8($)?hX($,Z):lY($,Z)}function oY($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=$2($[Q],X);return Z}function nY($,X){return oY($.properties,X)}function hX($,X){let Z=nY($,X);return a(Z)}function j1($,X){let Z=$.every((W)=>d8(W)),Q=P2(X.unevaluatedProperties)?{unevaluatedProperties:C(X.unevaluatedProperties)}:{};return X.unevaluatedProperties===!1||P2(X.unevaluatedProperties)||Z?{...X,...Q,[N]:"Intersect",type:"object",allOf:x8($)}:{...X,...Q,[N]:"Intersect",allOf:x8($)}}function tY($){return $.every((X)=>a2(X))}function sY($){return k8($,[t8])}function pX($){return $.map((X)=>a2(X)?sY(X):X)}function rY($,X){return tY($)?$2(j1(pX($),X)):j1(pX($),X)}function O6($,X={}){if($.length===0)return J8(X);if($.length===1)return C($[0],X);if($.some((Z)=>Q1(Z)))throw new Error("Cannot intersect transform types");return rY($,X)}function X2($,X={}){if($.length===0)return J8(X);if($.length===1)return C($[0],X);if($.some((Z)=>Q1(Z)))throw new Error("Cannot intersect transform types");return j1($,X)}function b1($,X){return{...X,[N]:"Union",anyOf:x8($)}}function aY($){return $.some((X)=>a2(X))}function mX($){return $.map((X)=>a2(X)?eY(X):X)}function eY($){return k8($,[t8])}function $7($,X){return aY($)?$2(b1(mX($),X)):b1(mX($),X)}function e2($,X={}){return $.length===0?J8(X):$.length===1?C($[0],X):$7($,X)}function z8($,X={}){return $.length===0?J8(X):$.length===1?C($[0],X):b1($,X)}class G$ extends v{}function X7($){return $.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}function U$($,X,Z){return $[X]===Z&&$.charCodeAt(X-1)!==92}function A0($,X){return U$($,X,"(")}function R1($,X){return U$($,X,")")}function uX($,X){return U$($,X,"|")}function Z7($){if(!(A0($,0)&&R1($,$.length-1)))return!1;let X=0;for(let Z=0;Z<$.length;Z++){if(A0($,Z))X+=1;if(R1($,Z))X-=1;if(X===0&&Z!==$.length-1)return!1}return!0}function Q7($){return $.slice(1,$.length-1)}function W7($){let X=0;for(let Z=0;Z<$.length;Z++){if(A0($,Z))X+=1;if(R1($,Z))X-=1;if(uX($,Z)&&X===0)return!0}return!1}function Y7($){for(let X=0;X<$.length;X++)if(A0($,X))return!0;return!1}function J7($){let[X,Z]=[0,0],Q=[];for(let Y=0;Y<$.length;Y++){if(A0($,Y))X+=1;if(R1($,Y))X-=1;if(uX($,Y)&&X===0){let J=$.slice(Z,Y);if(J.length>0)Q.push(W1(J));Z=Y+1}}let W=$.slice(Z);if(W.length>0)Q.push(W1(W));if(Q.length===0)return{type:"const",const:""};if(Q.length===1)return Q[0];return{type:"or",expr:Q}}function z7($){function X(W,Y){if(!A0(W,Y))throw new G$("TemplateLiteralParser: Index must point to open parens");let J=0;for(let z=Y;z<W.length;z++){if(A0(W,z))J+=1;if(R1(W,z))J-=1;if(J===0)return[Y,z]}throw new G$("TemplateLiteralParser: Unclosed group parens in expression")}function Z(W,Y){for(let J=Y;J<W.length;J++)if(A0(W,J))return[Y,J];return[Y,W.length]}let Q=[];for(let W=0;W<$.length;W++)if(A0($,W)){let[Y,J]=X($,W),z=$.slice(Y,J+1);Q.push(W1(z)),W=J}else{let[Y,J]=Z($,W),z=$.slice(Y,J);if(z.length>0)Q.push(W1(z));W=J-1}return Q.length===0?{type:"const",const:""}:Q.length===1?Q[0]:{type:"and",expr:Q}}function W1($){return Z7($)?W1(Q7($)):W7($)?J7($):Y7($)?z7($):{type:"const",const:X7($)}}function Y1($){return W1($.slice(1,$.length-1))}class cX extends v{}function M7($){return $.type==="or"&&$.expr.length===2&&$.expr[0].type==="const"&&$.expr[0].const==="0"&&$.expr[1].type==="const"&&$.expr[1].const==="[1-9][0-9]*"}function B7($){return $.type==="or"&&$.expr.length===2&&$.expr[0].type==="const"&&$.expr[0].const==="true"&&$.expr[1].type==="const"&&$.expr[1].const==="false"}function G7($){return $.type==="const"&&$.const===".*"}function y0($){return M7($)||G7($)?!1:B7($)?!0:$.type==="and"?$.expr.every((X)=>y0(X)):$.type==="or"?$.expr.every((X)=>y0(X)):$.type==="const"?!0:(()=>{throw new cX("Unknown expression type")})()}function L6($){let X=Y1($.pattern);return y0(X)}class iX extends v{}function*lX($){if($.length===1)return yield*$[0];for(let X of $[0])for(let Z of lX($.slice(1)))yield`${X}${Z}`}function*U7($){return yield*lX($.expr.map((X)=>[...V1(X)]))}function*q7($){for(let X of $.expr)yield*V1(X)}function*w7($){return yield $.const}function*V1($){return $.type==="and"?yield*U7($):$.type==="or"?yield*q7($):$.type==="const"?yield*w7($):(()=>{throw new iX("Unknown expression")})()}function J1($){let X=Y1($.pattern);return y0(X)?[...V1(X)]:[]}function Q8($,X={}){return{...X,[N]:"Literal",const:$,type:typeof $}}function E1($={}){return{...$,[N]:"Boolean",type:"boolean"}}function d0($={}){return{...$,[N]:"BigInt",type:"bigint"}}function h2($={}){return{...$,[N]:"Number",type:"number"}}function O2($={}){return{...$,[N]:"String",type:"string"}}function*H7($){let X=$.trim().replace(/"|'/g,"");return X==="boolean"?yield E1():X==="number"?yield h2():X==="bigint"?yield d0():X==="string"?yield O2():yield(()=>{let Z=X.split("|").map((Q)=>Q8(Q.trim()));return Z.length===0?J8():Z.length===1?Z[0]:e2(Z)})()}function*A7($){if($[1]!=="{"){let X=Q8("$"),Z=q$($.slice(1));return yield*[X,...Z]}for(let X=2;X<$.length;X++)if($[X]==="}"){let Z=H7($.slice(2,X)),Q=q$($.slice(X+1));return yield*[...Z,...Q]}yield Q8($)}function*q$($){for(let X=0;X<$.length;X++)if($[X]==="$"){let Z=Q8($.slice(0,X)),Q=A7($.slice(X));return yield*[Z,...Q]}yield Q8($)}function oX($){return[...q$($)]}var nX="(true|false)",_6="(0|[1-9][0-9]*)",tX="(.*)";var N0="^(0|[1-9][0-9]*)$",j0="^(.*)$";class sX extends v{}function N7($){return $.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function rX($,X){return D2($)?$.pattern.slice(1,$.pattern.length-1):Z8($)?`(${$.anyOf.map((Z)=>rX(Z,X)).join("|")})`:g0($)?`${X}${_6}`:T0($)?`${X}${_6}`:Y$($)?`${X}${_6}`:C1($)?`${X}${tX}`:H0($)?`${X}${N7($.const.toString())}`:J$($)?`${X}${nX}`:(()=>{throw new sX(`Unexpected Kind '${$[N]}'`)})()}function w$($){return`^${$.map((X)=>rX(X,"")).join("")}$`}function v0($){let Z=J1($).map((Q)=>Q8(Q));return e2(Z)}function I1($,X={}){let Z=O8($)?w$(oX($)):w$($);return{...X,[N]:"TemplateLiteral",type:"string",pattern:Z}}function D7($){return J1($).map((Z)=>Z.toString())}function P7($){let X=[];for(let Z of $)X.push(...z2(Z));return X}function O7($){return[$.toString()]}function z2($){return[...new Set(D2($)?D7($):Z8($)?P7($.anyOf):H0($)?O7($.const):g0($)?["[number]"]:T0($)?["[number]"]:[])]}function L7($,X,Z){let Q={};for(let W of Object.getOwnPropertyNames(X))Q[W]=h0($,z2(X[W]),Z);return Q}function _7($,X,Z){return L7($,X.properties,Z)}function aX($,X,Z){let Q=_7($,X,Z);return a(Q)}function $Z($,X){return $.map((Z)=>XZ(Z,X))}function F7($){return $.filter((X)=>!Z1(X))}function S7($,X){return O6(F7($Z($,X)))}function K7($){return $.some((X)=>Z1(X))?[]:$}function C7($,X){return e2(K7($Z($,X)))}function j7($,X){return X in $?$[X]:X==="[number]"?e2($):J8()}function b7($,X){return X==="[number]"?$:J8()}function R7($,X){return X in $?$[X]:J8()}function XZ($,X){return T8($)?S7($.allOf,X):Z8($)?C7($.anyOf,X):v2($)?j7($.items??[],X):w0($)?b7($.items,X):d8($)?R7($.properties,X):J8()}function x1($,X){return X.map((Z)=>XZ($,Z))}function eX($,X){return e2(x1($,X))}function h0($,X,Z={}){return F8(X)?C(aX($,X,Z)):N2(X)?C(ZZ($,X,Z)):P2(X)?C(eX($,z2(X)),Z):C(eX($,X),Z)}function V7($,X,Z){return{[X]:h0($,[X],Z)}}function E7($,X,Z){return X.reduce((Q,W)=>{return{...Q,...V7($,W,Z)}},{})}function I7($,X,Z){return E7($,X.keys,Z)}function ZZ($,X,Z){let Q=I7($,X,Z);return a(Q)}function k1($,X={}){return{...X,[N]:"Iterator",type:"Iterator",items:C($)}}function x7($,X={}){let Z=globalThis.Object.getOwnPropertyNames($),Q=Z.filter((z)=>a2($[z])),W=Z.filter((z)=>!Q.includes(z)),Y=P2(X.additionalProperties)?{additionalProperties:C(X.additionalProperties)}:{},J={};for(let z of Z)J[z]=C($[z]);return W.length>0?{...X,...Y,[N]:"Object",type:"object",properties:J,required:W}:{...X,...Y,[N]:"Object",type:"object",properties:J}}var M8=x7;function T1($,X={}){return{...X,[N]:"Promise",type:"Promise",item:C($)}}function k7($){return k8(C($),[s2])}function T7($){return{...C($),[s2]:"Readonly"}}function g7($,X){return X===!1?k7($):T7($)}function L2($,X){let Z=X??!0;return F8($)?QZ($,Z):g7($,Z)}function f7($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=L2($[Q],X);return Z}function y7($,X){return f7($.properties,X)}function QZ($,X){let Z=y7($,X);return a(Z)}function p2($,X={}){let[Z,Q,W]=[!1,$.length,$.length];return $.length>0?{...X,[N]:"Tuple",type:"array",items:x8($),additionalItems:Z,minItems:Q,maxItems:W}:{...X,[N]:"Tuple",type:"array",minItems:Q,maxItems:W}}function WZ($,X){return $.includes(X)}function YZ($){return[...new Set($)]}function d7($,X){return $.filter((Z)=>X.includes(Z))}function v7($,X){return $.reduce((Z,Q)=>{return d7(Z,Q)},X)}function JZ($){return $.length===1?$[0]:$.length>1?v7($.slice(1),$[0]):[]}function zZ($){let X=[];for(let Z of $)X.push(...Z);return X}function MZ($,X){return $ in X?R2($,X[$]):a(X)}function h7($){return{[$]:Q8($)}}function p7($){let X={};for(let Z of $)X[Z]=Q8(Z);return X}function m7($,X){return WZ(X,$)?h7($):p7(X)}function u7($,X){let Z=m7($,X);return MZ($,Z)}function g1($,X){return X.map((Z)=>R2($,Z))}function c7($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames(X))Z[Q]=R2($,X[Q]);return Z}function R2($,X){return a2(X)?$2(R2($,k8(X,[t8]))):vX(X)?L2(R2($,k8(X,[s2]))):F8(X)?MZ($,X.properties):N2(X)?u7($,X.keys):F1(X)?L1(g1($,X.parameters),R2($,X.returns)):S1(X)?q0(g1($,X.parameters),R2($,X.returns)):_1(X)?O1(R2($,X.items)):K1(X)?k1(R2($,X.items)):T8(X)?X2(g1($,X.allOf)):Z8(X)?z8(g1($,X.anyOf)):v2(X)?p2(g1($,X.items??[])):d8(X)?M8(c7($,X.properties)):w0(X)?P1(R2($,X.items)):f0(X)?T1(R2($,X.item)):X}function i7($,X){let Z={};for(let Q of $)Z[Q]=R2(Q,X);return Z}function H$($,X,Z={}){let Q=P2($)?z2($):$,W=X({[N]:"MappedKey",keys:Q}),Y=i7(Q,W);return C(M8(Y),Z)}function BZ($){let X=[];for(let Z of $)X.push(M2(Z));return X}function l7($){let X=BZ($);return zZ(X)}function o7($){let X=BZ($);return JZ(X)}function n7($){return $.map((X,Z)=>Z.toString())}function t7($){return["[number]"]}function s7($){return globalThis.Object.getOwnPropertyNames($)}function r7($){if(!A$)return[];return globalThis.Object.getOwnPropertyNames($).map((Z)=>{return Z[0]==="^"&&Z[Z.length-1]==="$"?Z.slice(1,Z.length-1):Z})}function M2($){return T8($)?l7($.allOf):Z8($)?o7($.anyOf):v2($)?n7($.items??[]):w0($)?t7($.items):d8($)?s7($.properties):z$($)?r7($.patternProperties):[]}var A$=!1;function D0($){A$=!0;let X=M2($);return A$=!1,`^(${X.map((Q)=>`(${Q})`).join("|")})\$`}function a7($){return $.map((X)=>X==="[number]"?h2():Q8(X))}function f1($,X={}){if(F8($))return GZ($,X);else{let Z=M2($),Q=a7(Z),W=e2(Q);return C(W,X)}}function e7($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=f1($[Q],X);return Z}function $5($,X){return e7($.properties,X)}function GZ($,X){let Z=$5($,X);return a(Z)}function F6($){let X=M2($),Z=x1($,X);return X.map((Q,W)=>[X[W],Z[W]])}function X5($){return $.allOf.every((X)=>P0(X))}function Z5($){return $.anyOf.some((X)=>P0(X))}function Q5($){return!P0($.not)}function P0($){return $[N]==="Intersect"?X5($):$[N]==="Union"?Z5($):$[N]==="Not"?Q5($):$[N]==="Undefined"?!0:!1}function W5($){switch($.errorType){case D.ArrayContains:return"Expected array to contain at least one matching value";case D.ArrayMaxContains:return`Expected array to contain no more than ${$.schema.maxContains} matching values`;case D.ArrayMinContains:return`Expected array to contain at least ${$.schema.minContains} matching values`;case D.ArrayMaxItems:return`Expected array length to be less or equal to ${$.schema.maxItems}`;case D.ArrayMinItems:return`Expected array length to be greater or equal to ${$.schema.minItems}`;case D.ArrayUniqueItems:return"Expected array elements to be unique";case D.Array:return"Expected array";case D.AsyncIterator:return"Expected AsyncIterator";case D.BigIntExclusiveMaximum:return`Expected bigint to be less than ${$.schema.exclusiveMaximum}`;case D.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${$.schema.exclusiveMinimum}`;case D.BigIntMaximum:return`Expected bigint to be less or equal to ${$.schema.maximum}`;case D.BigIntMinimum:return`Expected bigint to be greater or equal to ${$.schema.minimum}`;case D.BigIntMultipleOf:return`Expected bigint to be a multiple of ${$.schema.multipleOf}`;case D.BigInt:return"Expected bigint";case D.Boolean:return"Expected boolean";case D.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${$.schema.exclusiveMinimumTimestamp}`;case D.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${$.schema.exclusiveMaximumTimestamp}`;case D.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${$.schema.minimumTimestamp}`;case D.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${$.schema.maximumTimestamp}`;case D.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${$.schema.multipleOfTimestamp}`;case D.Date:return"Expected Date";case D.Function:return"Expected function";case D.IntegerExclusiveMaximum:return`Expected integer to be less than ${$.schema.exclusiveMaximum}`;case D.IntegerExclusiveMinimum:return`Expected integer to be greater than ${$.schema.exclusiveMinimum}`;case D.IntegerMaximum:return`Expected integer to be less or equal to ${$.schema.maximum}`;case D.IntegerMinimum:return`Expected integer to be greater or equal to ${$.schema.minimum}`;case D.IntegerMultipleOf:return`Expected integer to be a multiple of ${$.schema.multipleOf}`;case D.Integer:return"Expected integer";case D.IntersectUnevaluatedProperties:return"Unexpected property";case D.Intersect:return"Expected all values to match";case D.Iterator:return"Expected Iterator";case D.Literal:return`Expected ${typeof $.schema.const==="string"?`'${$.schema.const}'`:$.schema.const}`;case D.Never:return"Never";case D.Not:return"Value should not match";case D.Null:return"Expected null";case D.NumberExclusiveMaximum:return`Expected number to be less than ${$.schema.exclusiveMaximum}`;case D.NumberExclusiveMinimum:return`Expected number to be greater than ${$.schema.exclusiveMinimum}`;case D.NumberMaximum:return`Expected number to be less or equal to ${$.schema.maximum}`;case D.NumberMinimum:return`Expected number to be greater or equal to ${$.schema.minimum}`;case D.NumberMultipleOf:return`Expected number to be a multiple of ${$.schema.multipleOf}`;case D.Number:return"Expected number";case D.Object:return"Expected object";case D.ObjectAdditionalProperties:return"Unexpected property";case D.ObjectMaxProperties:return`Expected object to have no more than ${$.schema.maxProperties} properties`;case D.ObjectMinProperties:return`Expected object to have at least ${$.schema.minProperties} properties`;case D.ObjectRequiredProperty:return"Required property";case D.Promise:return"Expected Promise";case D.RegExp:return"Expected string to match regular expression";case D.StringFormatUnknown:return`Unknown format '${$.schema.format}'`;case D.StringFormat:return`Expected string to match '${$.schema.format}' format`;case D.StringMaxLength:return`Expected string length less or equal to ${$.schema.maxLength}`;case D.StringMinLength:return`Expected string length greater or equal to ${$.schema.minLength}`;case D.StringPattern:return`Expected string to match '${$.schema.pattern}'`;case D.String:return"Expected string";case D.Symbol:return"Expected symbol";case D.TupleLength:return`Expected tuple to have ${$.schema.maxItems||0} elements`;case D.Tuple:return"Expected tuple";case D.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${$.schema.maxByteLength}`;case D.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${$.schema.minByteLength}`;case D.Uint8Array:return"Expected Uint8Array";case D.Undefined:return"Expected undefined";case D.Union:return"Expected union value";case D.Void:return"Expected void";case D.Kind:return`Expected kind '${$.schema[N]}'`;default:return"Unknown error type"}}var Y5=W5;function UZ(){return Y5}class qZ extends v{constructor($){super(`Unable to dereference schema with \$id '${$.$id}'`);this.schema=$}}function J5($,X){let Z=X.find((Q)=>Q.$id===$.$ref);if(Z===void 0)throw new qZ($);return $8(Z,X)}function $8($,X){return $[N]==="This"||$[N]==="Ref"?J5($,X):$}class wZ extends v{constructor($){super("Unable to hash value");this.value=$}}var _2;(function($){$[$.Undefined=0]="Undefined",$[$.Null=1]="Null",$[$.Boolean=2]="Boolean",$[$.Number=3]="Number",$[$.String=4]="String",$[$.Object=5]="Object",$[$.Array=6]="Array",$[$.Date=7]="Date",$[$.Uint8Array=8]="Uint8Array",$[$.Symbol=9]="Symbol",$[$.BigInt=10]="BigInt"})(_2||(_2={}));var z1=BigInt("14695981039346656037"),[z5,M5]=[BigInt("1099511628211"),BigInt("2")**BigInt("64")],B5=Array.from({length:256}).map(($,X)=>BigInt(X)),HZ=new Float64Array(1),AZ=new DataView(HZ.buffer),NZ=new Uint8Array(HZ.buffer);function*G5($){let X=$===0?1:Math.ceil(Math.floor(Math.log2($)+1)/8);for(let Z=0;Z<X;Z++)yield $>>8*(X-1-Z)&255}function U5($){s8(_2.Array);for(let X of $)M1(X)}function q5($){s8(_2.Boolean),s8($?1:0)}function w5($){s8(_2.BigInt),AZ.setBigInt64(0,$);for(let X of NZ)s8(X)}function H5($){s8(_2.Date),M1($.getTime())}function A5($){s8(_2.Null)}function N5($){s8(_2.Number),AZ.setFloat64(0,$);for(let X of NZ)s8(X)}function D5($){s8(_2.Object);for(let X of globalThis.Object.getOwnPropertyNames($).sort())M1(X),M1($[X])}function P5($){s8(_2.String);for(let X=0;X<$.length;X++)for(let Z of G5($.charCodeAt(X)))s8(Z)}function O5($){s8(_2.Symbol),M1($.description)}function L5($){s8(_2.Uint8Array);for(let X=0;X<$.length;X++)s8($[X])}function _5($){return s8(_2.Undefined)}function M1($){if(d($))return U5($);if(t2($))return q5($);if(l8($))return w5($);if(w2($))return H5($);if(U0($))return A5($);if(g($))return N5($);if(D8($))return D5($);if(c($))return P5($);if(W2($))return O5($);if(e0($))return L5($);if(C8($))return _5($);throw new wZ($)}function s8($){z1=z1^B5[$],z1=z1*z5%M5}function b0($){return z1=BigInt("14695981039346656037"),M1($),z1}var D;(function($){$[$.ArrayContains=0]="ArrayContains",$[$.ArrayMaxContains=1]="ArrayMaxContains",$[$.ArrayMaxItems=2]="ArrayMaxItems",$[$.ArrayMinContains=3]="ArrayMinContains",$[$.ArrayMinItems=4]="ArrayMinItems",$[$.ArrayUniqueItems=5]="ArrayUniqueItems",$[$.Array=6]="Array",$[$.AsyncIterator=7]="AsyncIterator",$[$.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",$[$.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",$[$.BigIntMaximum=10]="BigIntMaximum",$[$.BigIntMinimum=11]="BigIntMinimum",$[$.BigIntMultipleOf=12]="BigIntMultipleOf",$[$.BigInt=13]="BigInt",$[$.Boolean=14]="Boolean",$[$.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",$[$.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",$[$.DateMaximumTimestamp=17]="DateMaximumTimestamp",$[$.DateMinimumTimestamp=18]="DateMinimumTimestamp",$[$.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",$[$.Date=20]="Date",$[$.Function=21]="Function",$[$.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",$[$.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",$[$.IntegerMaximum=24]="IntegerMaximum",$[$.IntegerMinimum=25]="IntegerMinimum",$[$.IntegerMultipleOf=26]="IntegerMultipleOf",$[$.Integer=27]="Integer",$[$.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",$[$.Intersect=29]="Intersect",$[$.Iterator=30]="Iterator",$[$.Kind=31]="Kind",$[$.Literal=32]="Literal",$[$.Never=33]="Never",$[$.Not=34]="Not",$[$.Null=35]="Null",$[$.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",$[$.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",$[$.NumberMaximum=38]="NumberMaximum",$[$.NumberMinimum=39]="NumberMinimum",$[$.NumberMultipleOf=40]="NumberMultipleOf",$[$.Number=41]="Number",$[$.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",$[$.ObjectMaxProperties=43]="ObjectMaxProperties",$[$.ObjectMinProperties=44]="ObjectMinProperties",$[$.ObjectRequiredProperty=45]="ObjectRequiredProperty",$[$.Object=46]="Object",$[$.Promise=47]="Promise",$[$.RegExp=48]="RegExp",$[$.StringFormatUnknown=49]="StringFormatUnknown",$[$.StringFormat=50]="StringFormat",$[$.StringMaxLength=51]="StringMaxLength",$[$.StringMinLength=52]="StringMinLength",$[$.StringPattern=53]="StringPattern",$[$.String=54]="String",$[$.Symbol=55]="Symbol",$[$.TupleLength=56]="TupleLength",$[$.Tuple=57]="Tuple",$[$.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",$[$.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",$[$.Uint8Array=60]="Uint8Array",$[$.Undefined=61]="Undefined",$[$.Union=62]="Union",$[$.Void=63]="Void"})(D||(D={}));class DZ extends v{constructor($){super("Unknown type");this.schema=$}}function O0($){return $.replace(/~/g,"~0").replace(/\//g,"~1")}function o($){return $!==void 0}class S6{constructor($){this.iterator=$}[Symbol.iterator](){return this.iterator}First(){let $=this.iterator.next();return $.done?void 0:$.value}}function j($,X,Z,Q){return{type:$,schema:X,path:Z,value:Q,message:UZ()({errorType:$,path:Z,schema:X,value:Q})}}function*F5($,X,Z,Q){}function*S5($,X,Z,Q){if(!d(Q))return yield j(D.Array,$,Z,Q);if(o($.minItems)&&!(Q.length>=$.minItems))yield j(D.ArrayMinItems,$,Z,Q);if(o($.maxItems)&&!(Q.length<=$.maxItems))yield j(D.ArrayMaxItems,$,Z,Q);for(let J=0;J<Q.length;J++)yield*o8($.items,X,`${Z}/${J}`,Q[J]);if($.uniqueItems===!0&&!function(){let J=new Set;for(let z of Q){let B=b0(z);if(J.has(B))return!1;else J.add(B)}return!0}())yield j(D.ArrayUniqueItems,$,Z,Q);if(!(o($.contains)||o($.minContains)||o($.maxContains)))return;let W=o($.contains)?$.contains:J8(),Y=Q.reduce((J,z,B)=>o8(W,X,`${Z}${B}`,z).next().done===!0?J+1:J,0);if(Y===0)yield j(D.ArrayContains,$,Z,Q);if(g($.minContains)&&Y<$.minContains)yield j(D.ArrayMinContains,$,Z,Q);if(g($.maxContains)&&Y>$.maxContains)yield j(D.ArrayMaxContains,$,Z,Q)}function*K5($,X,Z,Q){if(!w6(Q))yield j(D.AsyncIterator,$,Z,Q)}function*C5($,X,Z,Q){if(!l8(Q))return yield j(D.BigInt,$,Z,Q);if(o($.exclusiveMaximum)&&!(Q<$.exclusiveMaximum))yield j(D.BigIntExclusiveMaximum,$,Z,Q);if(o($.exclusiveMinimum)&&!(Q>$.exclusiveMinimum))yield j(D.BigIntExclusiveMinimum,$,Z,Q);if(o($.maximum)&&!(Q<=$.maximum))yield j(D.BigIntMaximum,$,Z,Q);if(o($.minimum)&&!(Q>=$.minimum))yield j(D.BigIntMinimum,$,Z,Q);if(o($.multipleOf)&&Q%$.multipleOf!==BigInt(0))yield j(D.BigIntMultipleOf,$,Z,Q)}function*j5($,X,Z,Q){if(!t2(Q))yield j(D.Boolean,$,Z,Q)}function*b5($,X,Z,Q){yield*o8($.returns,X,Z,Q.prototype)}function*R5($,X,Z,Q){if(!w2(Q))return yield j(D.Date,$,Z,Q);if(o($.exclusiveMaximumTimestamp)&&!(Q.getTime()<$.exclusiveMaximumTimestamp))yield j(D.DateExclusiveMaximumTimestamp,$,Z,Q);if(o($.exclusiveMinimumTimestamp)&&!(Q.getTime()>$.exclusiveMinimumTimestamp))yield j(D.DateExclusiveMinimumTimestamp,$,Z,Q);if(o($.maximumTimestamp)&&!(Q.getTime()<=$.maximumTimestamp))yield j(D.DateMaximumTimestamp,$,Z,Q);if(o($.minimumTimestamp)&&!(Q.getTime()>=$.minimumTimestamp))yield j(D.DateMinimumTimestamp,$,Z,Q);if(o($.multipleOfTimestamp)&&Q.getTime()%$.multipleOfTimestamp!==0)yield j(D.DateMultipleOfTimestamp,$,Z,Q)}function*V5($,X,Z,Q){if(!D6(Q))yield j(D.Function,$,Z,Q)}function*E5($,X,Z,Q){if(!N6(Q))return yield j(D.Integer,$,Z,Q);if(o($.exclusiveMaximum)&&!(Q<$.exclusiveMaximum))yield j(D.IntegerExclusiveMaximum,$,Z,Q);if(o($.exclusiveMinimum)&&!(Q>$.exclusiveMinimum))yield j(D.IntegerExclusiveMinimum,$,Z,Q);if(o($.maximum)&&!(Q<=$.maximum))yield j(D.IntegerMaximum,$,Z,Q);if(o($.minimum)&&!(Q>=$.minimum))yield j(D.IntegerMinimum,$,Z,Q);if(o($.multipleOf)&&Q%$.multipleOf!==0)yield j(D.IntegerMultipleOf,$,Z,Q)}function*I5($,X,Z,Q){for(let W of $.allOf){let Y=o8(W,X,Z,Q).next();if(!Y.done)yield j(D.Intersect,$,Z,Q),yield Y.value}if($.unevaluatedProperties===!1){let W=new RegExp(D0($));for(let Y of Object.getOwnPropertyNames(Q))if(!W.test(Y))yield j(D.IntersectUnevaluatedProperties,$,`${Z}/${Y}`,Q)}if(typeof $.unevaluatedProperties==="object"){let W=new RegExp(D0($));for(let Y of Object.getOwnPropertyNames(Q))if(!W.test(Y)){let J=o8($.unevaluatedProperties,X,`${Z}/${Y}`,Q[Y]).next();if(!J.done)yield J.value}}}function*x5($,X,Z,Q){if(!H6(Q))yield j(D.Iterator,$,Z,Q)}function*k5($,X,Z,Q){if(Q!==$.const)yield j(D.Literal,$,Z,Q)}function*T5($,X,Z,Q){yield j(D.Never,$,Z,Q)}function*g5($,X,Z,Q){if(o8($.not,X,Z,Q).next().done===!0)yield j(D.Not,$,Z,Q)}function*f5($,X,Z,Q){if(!U0(Q))yield j(D.Null,$,Z,Q)}function*y5($,X,Z,Q){if(!I8.IsNumberLike(Q))return yield j(D.Number,$,Z,Q);if(o($.exclusiveMaximum)&&!(Q<$.exclusiveMaximum))yield j(D.NumberExclusiveMaximum,$,Z,Q);if(o($.exclusiveMinimum)&&!(Q>$.exclusiveMinimum))yield j(D.NumberExclusiveMinimum,$,Z,Q);if(o($.maximum)&&!(Q<=$.maximum))yield j(D.NumberMaximum,$,Z,Q);if(o($.minimum)&&!(Q>=$.minimum))yield j(D.NumberMinimum,$,Z,Q);if(o($.multipleOf)&&Q%$.multipleOf!==0)yield j(D.NumberMultipleOf,$,Z,Q)}function*d5($,X,Z,Q){if(!I8.IsObjectLike(Q))return yield j(D.Object,$,Z,Q);if(o($.minProperties)&&!(Object.getOwnPropertyNames(Q).length>=$.minProperties))yield j(D.ObjectMinProperties,$,Z,Q);if(o($.maxProperties)&&!(Object.getOwnPropertyNames(Q).length<=$.maxProperties))yield j(D.ObjectMaxProperties,$,Z,Q);let W=Array.isArray($.required)?$.required:[],Y=Object.getOwnPropertyNames($.properties),J=Object.getOwnPropertyNames(Q);for(let z of W){if(J.includes(z))continue;yield j(D.ObjectRequiredProperty,$.properties[z],`${Z}/${O0(z)}`,void 0)}if($.additionalProperties===!1){for(let z of J)if(!Y.includes(z))yield j(D.ObjectAdditionalProperties,$,`${Z}/${O0(z)}`,Q[z])}if(typeof $.additionalProperties==="object")for(let z of J){if(Y.includes(z))continue;yield*o8($.additionalProperties,X,`${Z}/${O0(z)}`,Q[z])}for(let z of Y){let B=$.properties[z];if($.required&&$.required.includes(z)){if(yield*o8(B,X,`${Z}/${O0(z)}`,Q[z]),P0($)&&!(z in Q))yield j(D.ObjectRequiredProperty,B,`${Z}/${O0(z)}`,void 0)}else if(I8.IsExactOptionalProperty(Q,z))yield*o8(B,X,`${Z}/${O0(z)}`,Q[z])}}function*v5($,X,Z,Q){if(!A6(Q))yield j(D.Promise,$,Z,Q)}function*h5($,X,Z,Q){if(!I8.IsRecordLike(Q))return yield j(D.Object,$,Z,Q);if(o($.minProperties)&&!(Object.getOwnPropertyNames(Q).length>=$.minProperties))yield j(D.ObjectMinProperties,$,Z,Q);if(o($.maxProperties)&&!(Object.getOwnPropertyNames(Q).length<=$.maxProperties))yield j(D.ObjectMaxProperties,$,Z,Q);let[W,Y]=Object.entries($.patternProperties)[0],J=new RegExp(W);for(let[z,B]of Object.entries(Q))if(J.test(z))yield*o8(Y,X,`${Z}/${O0(z)}`,B);if(typeof $.additionalProperties==="object"){for(let[z,B]of Object.entries(Q))if(!J.test(z))yield*o8($.additionalProperties,X,`${Z}/${O0(z)}`,B)}if($.additionalProperties===!1)for(let[z,B]of Object.entries(Q)){if(J.test(z))continue;return yield j(D.ObjectAdditionalProperties,$,`${Z}/${O0(z)}`,B)}}function*p5($,X,Z,Q){yield*o8($8($,X),X,Z,Q)}function*m5($,X,Z,Q){if(!c(Q))return yield j(D.String,$,Z,Q);if(o($.minLength)&&!(Q.length>=$.minLength))yield j(D.StringMinLength,$,Z,Q);if(o($.maxLength)&&!(Q.length<=$.maxLength))yield j(D.StringMaxLength,$,Z,Q);if(!new RegExp($.source,$.flags).test(Q))return yield j(D.RegExp,$,Z,Q)}function*u5($,X,Z,Q){if(!c(Q))return yield j(D.String,$,Z,Q);if(o($.minLength)&&!(Q.length>=$.minLength))yield j(D.StringMinLength,$,Z,Q);if(o($.maxLength)&&!(Q.length<=$.maxLength))yield j(D.StringMaxLength,$,Z,Q);if(c($.pattern)){if(!new RegExp($.pattern).test(Q))yield j(D.StringPattern,$,Z,Q)}if(c($.format)){if(!w8.Has($.format))yield j(D.StringFormatUnknown,$,Z,Q);else if(!w8.Get($.format)(Q))yield j(D.StringFormat,$,Z,Q)}}function*c5($,X,Z,Q){if(!W2(Q))yield j(D.Symbol,$,Z,Q)}function*i5($,X,Z,Q){if(!c(Q))return yield j(D.String,$,Z,Q);if(!new RegExp($.pattern).test(Q))yield j(D.StringPattern,$,Z,Q)}function*l5($,X,Z,Q){yield*o8($8($,X),X,Z,Q)}function*o5($,X,Z,Q){if(!d(Q))return yield j(D.Tuple,$,Z,Q);if($.items===void 0&&Q.length!==0)return yield j(D.TupleLength,$,Z,Q);if(Q.length!==$.maxItems)return yield j(D.TupleLength,$,Z,Q);if(!$.items)return;for(let W=0;W<$.items.length;W++)yield*o8($.items[W],X,`${Z}/${W}`,Q[W])}function*n5($,X,Z,Q){if(!C8(Q))yield j(D.Undefined,$,Z,Q)}function*t5($,X,Z,Q){let W=0;for(let Y of $.anyOf){let J=[...o8(Y,X,Z,Q)];if(J.length===0)return;W+=J.length}if(W>0)yield j(D.Union,$,Z,Q)}function*s5($,X,Z,Q){if(!e0(Q))return yield j(D.Uint8Array,$,Z,Q);if(o($.maxByteLength)&&!(Q.length<=$.maxByteLength))yield j(D.Uint8ArrayMaxByteLength,$,Z,Q);if(o($.minByteLength)&&!(Q.length>=$.minByteLength))yield j(D.Uint8ArrayMinByteLength,$,Z,Q)}function*r5($,X,Z,Q){}function*a5($,X,Z,Q){if(!I8.IsVoidLike(Q))yield j(D.Void,$,Z,Q)}function*e5($,X,Z,Q){if(!j8.Get($[N])($,Q))yield j(D.Kind,$,Z,Q)}function*o8($,X,Z,Q){let W=o($.$id)?[...X,$]:X,Y=$;switch(Y[N]){case"Any":return yield*F5(Y,W,Z,Q);case"Array":return yield*S5(Y,W,Z,Q);case"AsyncIterator":return yield*K5(Y,W,Z,Q);case"BigInt":return yield*C5(Y,W,Z,Q);case"Boolean":return yield*j5(Y,W,Z,Q);case"Constructor":return yield*b5(Y,W,Z,Q);case"Date":return yield*R5(Y,W,Z,Q);case"Function":return yield*V5(Y,W,Z,Q);case"Integer":return yield*E5(Y,W,Z,Q);case"Intersect":return yield*I5(Y,W,Z,Q);case"Iterator":return yield*x5(Y,W,Z,Q);case"Literal":return yield*k5(Y,W,Z,Q);case"Never":return yield*T5(Y,W,Z,Q);case"Not":return yield*g5(Y,W,Z,Q);case"Null":return yield*f5(Y,W,Z,Q);case"Number":return yield*y5(Y,W,Z,Q);case"Object":return yield*d5(Y,W,Z,Q);case"Promise":return yield*v5(Y,W,Z,Q);case"Record":return yield*h5(Y,W,Z,Q);case"Ref":return yield*p5(Y,W,Z,Q);case"RegExp":return yield*m5(Y,W,Z,Q);case"String":return yield*u5(Y,W,Z,Q);case"Symbol":return yield*c5(Y,W,Z,Q);case"TemplateLiteral":return yield*i5(Y,W,Z,Q);case"This":return yield*l5(Y,W,Z,Q);case"Tuple":return yield*o5(Y,W,Z,Q);case"Undefined":return yield*n5(Y,W,Z,Q);case"Union":return yield*t5(Y,W,Z,Q);case"Uint8Array":return yield*s5(Y,W,Z,Q);case"Unknown":return yield*r5(Y,W,Z,Q);case"Void":return yield*a5(Y,W,Z,Q);default:if(!j8.Has(Y[N]))throw new DZ($);return yield*e5(Y,W,Z,Q)}}function y1(...$){let X=$.length===3?o8($[0],$[1],"",$[2]):o8($[0],[],"",$[1]);return new S6(X)}function L0($={}){return{...$,[N]:"Any"}}function $0($={}){return{...$,[N]:"Unknown"}}var w={};x0(w,{TypeGuardUnknownTypeError:()=>PZ,IsVoid:()=>ZQ,IsUnsafe:()=>XQ,IsUnknown:()=>$Q,IsUnionLiteral:()=>z9,IsUnion:()=>O$,IsUndefined:()=>aZ,IsUint8Array:()=>eZ,IsTuple:()=>rZ,IsTransform:()=>L8,IsThis:()=>sZ,IsTemplateLiteral:()=>tZ,IsSymbol:()=>nZ,IsString:()=>oZ,IsSchema:()=>p,IsRegExp:()=>lZ,IsRef:()=>iZ,IsRecursive:()=>J9,IsRecord:()=>cZ,IsReadonly:()=>Q9,IsProperties:()=>P$,IsPromise:()=>uZ,IsOptional:()=>W9,IsObject:()=>mZ,IsNumber:()=>pZ,IsNull:()=>hZ,IsNot:()=>vZ,IsNever:()=>dZ,IsMappedResult:()=>yZ,IsMappedKey:()=>fZ,IsLiteralValue:()=>gZ,IsLiteralString:()=>kZ,IsLiteralNumber:()=>TZ,IsLiteralBoolean:()=>Y9,IsLiteral:()=>v1,IsKindOf:()=>s,IsKind:()=>QQ,IsIterator:()=>xZ,IsIntersect:()=>IZ,IsInteger:()=>EZ,IsFunction:()=>VZ,IsDate:()=>RZ,IsConstructor:()=>bZ,IsBoolean:()=>jZ,IsBigInt:()=>CZ,IsAsyncIterator:()=>KZ,IsArray:()=>SZ,IsAny:()=>FZ});class PZ extends v{}var $9=["Any","Array","AsyncIterator","BigInt","Boolean","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function OZ($){try{return new RegExp($),!0}catch{return!1}}function N$($){if(!O8($))return!1;for(let X=0;X<$.length;X++){let Z=$.charCodeAt(X);if(Z>=7&&Z<=13||Z===27||Z===127)return!1}return!0}function LZ($){return D$($)||p($)}function d1($){return b8($)||N1($)}function H8($){return b8($)||d2($)}function D$($){return b8($)||C0($)}function B8($){return b8($)||O8($)}function X9($){return b8($)||O8($)&&N$($)&&OZ($)}function Z9($){return b8($)||O8($)&&N$($)}function _Z($){return b8($)||p($)}function Q9($){return P8($)&&$[s2]==="Readonly"}function W9($){return P8($)&&$[t8]==="Optional"}function FZ($){return s($,"Any")&&B8($.$id)}function SZ($){return s($,"Array")&&$.type==="array"&&B8($.$id)&&p($.items)&&H8($.minItems)&&H8($.maxItems)&&D$($.uniqueItems)&&_Z($.contains)&&H8($.minContains)&&H8($.maxContains)}function KZ($){return s($,"AsyncIterator")&&$.type==="AsyncIterator"&&B8($.$id)&&p($.items)}function CZ($){return s($,"BigInt")&&$.type==="bigint"&&B8($.$id)&&d1($.exclusiveMaximum)&&d1($.exclusiveMinimum)&&d1($.maximum)&&d1($.minimum)&&d1($.multipleOf)}function jZ($){return s($,"Boolean")&&$.type==="boolean"&&B8($.$id)}function bZ($){return s($,"Constructor")&&$.type==="Constructor"&&B8($.$id)&&Y2($.parameters)&&$.parameters.every((X)=>p(X))&&p($.returns)}function RZ($){return s($,"Date")&&$.type==="Date"&&B8($.$id)&&H8($.exclusiveMaximumTimestamp)&&H8($.exclusiveMinimumTimestamp)&&H8($.maximumTimestamp)&&H8($.minimumTimestamp)&&H8($.multipleOfTimestamp)}function VZ($){return s($,"Function")&&$.type==="Function"&&B8($.$id)&&Y2($.parameters)&&$.parameters.every((X)=>p(X))&&p($.returns)}function EZ($){return s($,"Integer")&&$.type==="integer"&&B8($.$id)&&H8($.exclusiveMaximum)&&H8($.exclusiveMinimum)&&H8($.maximum)&&H8($.minimum)&&H8($.multipleOf)}function P$($){return P8($)&&Object.entries($).every(([X,Z])=>N$(X)&&p(Z))}function IZ($){return s($,"Intersect")&&(O8($.type)&&$.type!=="object"?!1:!0)&&Y2($.allOf)&&$.allOf.every((X)=>p(X)&&!L8(X))&&B8($.type)&&(D$($.unevaluatedProperties)||_Z($.unevaluatedProperties))&&B8($.$id)}function xZ($){return s($,"Iterator")&&$.type==="Iterator"&&B8($.$id)&&p($.items)}function s($,X){return P8($)&&N in $&&$[N]===X}function kZ($){return v1($)&&O8($.const)}function TZ($){return v1($)&&d2($.const)}function Y9($){return v1($)&&C0($.const)}function v1($){return s($,"Literal")&&B8($.$id)&&gZ($.const)}function gZ($){return C0($)||d2($)||O8($)}function fZ($){return s($,"MappedKey")&&Y2($.keys)&&$.keys.every((X)=>d2(X)||O8(X))}function yZ($){return s($,"MappedResult")&&P$($.properties)}function dZ($){return s($,"Never")&&P8($.not)&&Object.getOwnPropertyNames($.not).length===0}function vZ($){return s($,"Not")&&p($.not)}function hZ($){return s($,"Null")&&$.type==="null"&&B8($.$id)}function pZ($){return s($,"Number")&&$.type==="number"&&B8($.$id)&&H8($.exclusiveMaximum)&&H8($.exclusiveMinimum)&&H8($.maximum)&&H8($.minimum)&&H8($.multipleOf)}function mZ($){return s($,"Object")&&$.type==="object"&&B8($.$id)&&P$($.properties)&&LZ($.additionalProperties)&&H8($.minProperties)&&H8($.maxProperties)}function uZ($){return s($,"Promise")&&$.type==="Promise"&&B8($.$id)&&p($.item)}function cZ($){return s($,"Record")&&$.type==="object"&&B8($.$id)&&LZ($.additionalProperties)&&P8($.patternProperties)&&((X)=>{let Z=Object.getOwnPropertyNames(X.patternProperties);return Z.length===1&&OZ(Z[0])&&P8(X.patternProperties)&&p(X.patternProperties[Z[0]])})($)}function J9($){return P8($)&&A2 in $&&$[A2]==="Recursive"}function iZ($){return s($,"Ref")&&B8($.$id)&&O8($.$ref)}function lZ($){return s($,"RegExp")&&B8($.$id)&&O8($.source)&&O8($.flags)&&H8($.maxLength)&&H8($.minLength)}function oZ($){return s($,"String")&&$.type==="string"&&B8($.$id)&&H8($.minLength)&&H8($.maxLength)&&X9($.pattern)&&Z9($.format)}function nZ($){return s($,"Symbol")&&$.type==="symbol"&&B8($.$id)}function tZ($){return s($,"TemplateLiteral")&&$.type==="string"&&O8($.pattern)&&$.pattern[0]==="^"&&$.pattern[$.pattern.length-1]==="$"}function sZ($){return s($,"This")&&B8($.$id)&&O8($.$ref)}function L8($){return P8($)&&K8 in $}function rZ($){return s($,"Tuple")&&$.type==="array"&&B8($.$id)&&d2($.minItems)&&d2($.maxItems)&&$.minItems===$.maxItems&&(b8($.items)&&b8($.additionalItems)&&$.minItems===0||Y2($.items)&&$.items.every((X)=>p(X)))}function aZ($){return s($,"Undefined")&&$.type==="undefined"&&B8($.$id)}function z9($){return O$($)&&$.anyOf.every((X)=>kZ(X)||TZ(X))}function O$($){return s($,"Union")&&B8($.$id)&&P8($)&&Y2($.anyOf)&&$.anyOf.every((X)=>p(X))}function eZ($){return s($,"Uint8Array")&&$.type==="Uint8Array"&&B8($.$id)&&H8($.minByteLength)&&H8($.maxByteLength)}function $Q($){return s($,"Unknown")&&B8($.$id)}function XQ($){return s($,"Unsafe")}function ZQ($){return s($,"Void")&&$.type==="void"&&B8($.$id)}function QQ($){return P8($)&&N in $&&O8($[N])&&!$9.includes($[N])}function p($){return P8($)&&(FZ($)||SZ($)||jZ($)||CZ($)||KZ($)||bZ($)||RZ($)||VZ($)||EZ($)||IZ($)||xZ($)||v1($)||fZ($)||yZ($)||dZ($)||vZ($)||hZ($)||pZ($)||mZ($)||uZ($)||cZ($)||iZ($)||lZ($)||oZ($)||nZ($)||tZ($)||sZ($)||rZ($)||aZ($)||O$($)||eZ($)||$Q($)||XQ($)||ZQ($)||QQ($))}class MQ extends v{}var P;(function($){$[$.Union=0]="Union",$[$.True=1]="True",$[$.False=2]="False"})(P||(P={}));function V2($){return $===P.False?$:P.True}function B1($){throw new MQ($)}function g8($){return w.IsNever($)||w.IsIntersect($)||w.IsUnion($)||w.IsUnknown($)||w.IsAny($)}function f8($,X){return w.IsNever(X)?UQ($,X):w.IsIntersect(X)?K6($,X):w.IsUnion(X)?K$($,X):w.IsUnknown(X)?AQ($,X):w.IsAny(X)?S$($,X):B1("StructuralRight")}function S$($,X){return P.True}function M9($,X){return w.IsIntersect(X)?K6($,X):w.IsUnion(X)&&X.anyOf.some((Z)=>w.IsAny(Z)||w.IsUnknown(Z))?P.True:w.IsUnion(X)?P.Union:w.IsUnknown(X)?P.True:w.IsAny(X)?P.True:P.Union}function B9($,X){return w.IsUnknown($)?P.False:w.IsAny($)?P.Union:w.IsNever($)?P.True:P.False}function G9($,X){return w.IsObject(X)&&C6(X)?P.True:g8(X)?f8($,X):!w.IsArray(X)?P.False:V2(G8($.items,X.items))}function U9($,X){return g8(X)?f8($,X):!w.IsAsyncIterator(X)?P.False:V2(G8($.items,X.items))}function q9($,X){return g8(X)?f8($,X):w.IsObject(X)?r8($,X):w.IsRecord(X)?E2($,X):w.IsBigInt(X)?P.True:P.False}function BQ($,X){return w.IsLiteralBoolean($)?P.True:w.IsBoolean($)?P.True:P.False}function w9($,X){return g8(X)?f8($,X):w.IsObject(X)?r8($,X):w.IsRecord(X)?E2($,X):w.IsBoolean(X)?P.True:P.False}function H9($,X){return g8(X)?f8($,X):w.IsObject(X)?r8($,X):!w.IsConstructor(X)?P.False:$.parameters.length>X.parameters.length?P.False:!$.parameters.every((Z,Q)=>V2(G8(X.parameters[Q],Z))===P.True)?P.False:V2(G8($.returns,X.returns))}function A9($,X){return g8(X)?f8($,X):w.IsObject(X)?r8($,X):w.IsRecord(X)?E2($,X):w.IsDate(X)?P.True:P.False}function N9($,X){return g8(X)?f8($,X):w.IsObject(X)?r8($,X):!w.IsFunction(X)?P.False:$.parameters.length>X.parameters.length?P.False:!$.parameters.every((Z,Q)=>V2(G8(X.parameters[Q],Z))===P.True)?P.False:V2(G8($.returns,X.returns))}function GQ($,X){return w.IsLiteral($)&&J2.IsNumber($.const)?P.True:w.IsNumber($)||w.IsInteger($)?P.True:P.False}function D9($,X){return w.IsInteger(X)||w.IsNumber(X)?P.True:g8(X)?f8($,X):w.IsObject(X)?r8($,X):w.IsRecord(X)?E2($,X):P.False}function K6($,X){return X.allOf.every((Z)=>G8($,Z)===P.True)?P.True:P.False}function P9($,X){return $.allOf.some((Z)=>G8(Z,X)===P.True)?P.True:P.False}function O9($,X){return g8(X)?f8($,X):!w.IsIterator(X)?P.False:V2(G8($.items,X.items))}function L9($,X){return w.IsLiteral(X)&&X.const===$.const?P.True:g8(X)?f8($,X):w.IsObject(X)?r8($,X):w.IsRecord(X)?E2($,X):w.IsString(X)?HQ($,X):w.IsNumber(X)?qQ($,X):w.IsInteger(X)?GQ($,X):w.IsBoolean(X)?BQ($,X):P.False}function UQ($,X){return P.False}function _9($,X){return P.True}function WQ($){let[X,Z]=[$,0];while(!0){if(!w.IsNot(X))break;X=X.not,Z+=1}return Z%2===0?X:$0()}function F9($,X){return w.IsNot($)?G8(WQ($),X):w.IsNot(X)?G8($,WQ(X)):B1("Invalid fallthrough for Not")}function S9($,X){return g8(X)?f8($,X):w.IsObject(X)?r8($,X):w.IsRecord(X)?E2($,X):w.IsNull(X)?P.True:P.False}function qQ($,X){return w.IsLiteralNumber($)?P.True:w.IsNumber($)||w.IsInteger($)?P.True:P.False}function K9($,X){return g8(X)?f8($,X):w.IsObject(X)?r8($,X):w.IsRecord(X)?E2($,X):w.IsInteger(X)||w.IsNumber(X)?P.True:P.False}function B2($,X){return Object.getOwnPropertyNames($.properties).length===X}function YQ($){return C6($)}function JQ($){return B2($,0)||B2($,1)&&"description"in $.properties&&w.IsUnion($.properties.description)&&$.properties.description.anyOf.length===2&&(w.IsString($.properties.description.anyOf[0])&&w.IsUndefined($.properties.description.anyOf[1])||w.IsString($.properties.description.anyOf[1])&&w.IsUndefined($.properties.description.anyOf[0]))}function L$($){return B2($,0)}function zQ($){return B2($,0)}function C9($){return B2($,0)}function j9($){return B2($,0)}function b9($){return C6($)}function R9($){let X=h2();return B2($,0)||B2($,1)&&"length"in $.properties&&V2(G8($.properties.length,X))===P.True}function V9($){return B2($,0)}function C6($){let X=h2();return B2($,0)||B2($,1)&&"length"in $.properties&&V2(G8($.properties.length,X))===P.True}function E9($){let X=q0([L0()],L0());return B2($,0)||B2($,1)&&"then"in $.properties&&V2(G8($.properties.then,X))===P.True}function wQ($,X){return G8($,X)===P.False?P.False:w.IsOptional($)&&!w.IsOptional(X)?P.False:P.True}function r8($,X){return w.IsUnknown($)?P.False:w.IsAny($)?P.Union:w.IsNever($)||w.IsLiteralString($)&&YQ(X)||w.IsLiteralNumber($)&&L$(X)||w.IsLiteralBoolean($)&&zQ(X)||w.IsSymbol($)&&JQ(X)||w.IsBigInt($)&&C9(X)||w.IsString($)&&YQ(X)||w.IsSymbol($)&&JQ(X)||w.IsNumber($)&&L$(X)||w.IsInteger($)&&L$(X)||w.IsBoolean($)&&zQ(X)||w.IsUint8Array($)&&b9(X)||w.IsDate($)&&j9(X)||w.IsConstructor($)&&V9(X)||w.IsFunction($)&&R9(X)?P.True:w.IsRecord($)&&w.IsString(_$($))?(()=>{return X[A2]==="Record"?P.True:P.False})():w.IsRecord($)&&w.IsNumber(_$($))?(()=>{return B2(X,0)?P.True:P.False})():P.False}function I9($,X){return g8(X)?f8($,X):w.IsRecord(X)?E2($,X):!w.IsObject(X)?P.False:(()=>{for(let Z of Object.getOwnPropertyNames(X.properties)){if(!(Z in $.properties)&&!w.IsOptional(X.properties[Z]))return P.False;if(w.IsOptional(X.properties[Z]))return P.True;if(wQ($.properties[Z],X.properties[Z])===P.False)return P.False}return P.True})()}function x9($,X){return g8(X)?f8($,X):w.IsObject(X)&&E9(X)?P.True:!w.IsPromise(X)?P.False:V2(G8($.item,X.item))}function _$($){return N0 in $.patternProperties?h2():(j0 in $.patternProperties)?O2():B1("Unknown record key pattern")}function F$($){return N0 in $.patternProperties?$.patternProperties[N0]:(j0 in $.patternProperties)?$.patternProperties[j0]:B1("Unable to get record value schema")}function E2($,X){let[Z,Q]=[_$(X),F$(X)];return w.IsLiteralString($)&&w.IsNumber(Z)&&V2(G8($,Q))===P.True?P.True:w.IsUint8Array($)&&w.IsNumber(Z)?G8($,Q):w.IsString($)&&w.IsNumber(Z)?G8($,Q):w.IsArray($)&&w.IsNumber(Z)?G8($,Q):w.IsObject($)?(()=>{for(let W of Object.getOwnPropertyNames($.properties))if(wQ(Q,$.properties[W])===P.False)return P.False;return P.True})():P.False}function k9($,X){return g8(X)?f8($,X):w.IsObject(X)?r8($,X):!w.IsRecord(X)?P.False:G8(F$($),F$(X))}function T9($,X){let Z=w.IsRegExp($)?O2():$,Q=w.IsRegExp(X)?O2():X;return G8(Z,Q)}function HQ($,X){return w.IsLiteral($)&&J2.IsString($.const)?P.True:w.IsString($)?P.True:P.False}function g9($,X){return g8(X)?f8($,X):w.IsObject(X)?r8($,X):w.IsRecord(X)?E2($,X):w.IsString(X)?P.True:P.False}function f9($,X){return g8(X)?f8($,X):w.IsObject(X)?r8($,X):w.IsRecord(X)?E2($,X):w.IsSymbol(X)?P.True:P.False}function y9($,X){return w.IsTemplateLiteral($)?G8(v0($),X):w.IsTemplateLiteral(X)?G8($,v0(X)):B1("Invalid fallthrough for TemplateLiteral")}function d9($,X){return w.IsArray(X)&&$.items!==void 0&&$.items.every((Z)=>G8(Z,X.items)===P.True)}function v9($,X){return w.IsNever($)?P.True:w.IsUnknown($)?P.False:w.IsAny($)?P.Union:P.False}function h9($,X){return g8(X)?f8($,X):w.IsObject(X)&&C6(X)?P.True:w.IsArray(X)&&d9($,X)?P.True:!w.IsTuple(X)?P.False:J2.IsUndefined($.items)&&!J2.IsUndefined(X.items)||!J2.IsUndefined($.items)&&J2.IsUndefined(X.items)?P.False:J2.IsUndefined($.items)&&!J2.IsUndefined(X.items)?P.True:$.items.every((Z,Q)=>G8(Z,X.items[Q])===P.True)?P.True:P.False}function p9($,X){return g8(X)?f8($,X):w.IsObject(X)?r8($,X):w.IsRecord(X)?E2($,X):w.IsUint8Array(X)?P.True:P.False}function m9($,X){return g8(X)?f8($,X):w.IsObject(X)?r8($,X):w.IsRecord(X)?E2($,X):w.IsVoid(X)?i9($,X):w.IsUndefined(X)?P.True:P.False}function K$($,X){return X.anyOf.some((Z)=>G8($,Z)===P.True)?P.True:P.False}function u9($,X){return $.anyOf.every((Z)=>G8(Z,X)===P.True)?P.True:P.False}function AQ($,X){return P.True}function c9($,X){return w.IsNever(X)?UQ($,X):w.IsIntersect(X)?K6($,X):w.IsUnion(X)?K$($,X):w.IsAny(X)?S$($,X):w.IsString(X)?HQ($,X):w.IsNumber(X)?qQ($,X):w.IsInteger(X)?GQ($,X):w.IsBoolean(X)?BQ($,X):w.IsArray(X)?B9($,X):w.IsTuple(X)?v9($,X):w.IsObject(X)?r8($,X):w.IsUnknown(X)?P.True:P.False}function i9($,X){return w.IsUndefined($)?P.True:w.IsUndefined($)?P.True:P.False}function l9($,X){return w.IsIntersect(X)?K6($,X):w.IsUnion(X)?K$($,X):w.IsUnknown(X)?AQ($,X):w.IsAny(X)?S$($,X):w.IsObject(X)?r8($,X):w.IsVoid(X)?P.True:P.False}function G8($,X){return w.IsTemplateLiteral($)||w.IsTemplateLiteral(X)?y9($,X):w.IsRegExp($)||w.IsRegExp(X)?T9($,X):w.IsNot($)||w.IsNot(X)?F9($,X):w.IsAny($)?M9($,X):w.IsArray($)?G9($,X):w.IsBigInt($)?q9($,X):w.IsBoolean($)?w9($,X):w.IsAsyncIterator($)?U9($,X):w.IsConstructor($)?H9($,X):w.IsDate($)?A9($,X):w.IsFunction($)?N9($,X):w.IsInteger($)?D9($,X):w.IsIntersect($)?P9($,X):w.IsIterator($)?O9($,X):w.IsLiteral($)?L9($,X):w.IsNever($)?_9($,X):w.IsNull($)?S9($,X):w.IsNumber($)?K9($,X):w.IsObject($)?I9($,X):w.IsRecord($)?k9($,X):w.IsString($)?g9($,X):w.IsSymbol($)?f9($,X):w.IsTuple($)?h9($,X):w.IsPromise($)?x9($,X):w.IsUint8Array($)?p9($,X):w.IsUndefined($)?m9($,X):w.IsUnion($)?u9($,X):w.IsUnknown($)?c9($,X):w.IsVoid($)?l9($,X):B1(`Unknown left type operand '${$[N]}'`)}function R0($,X){return G8($,X)}function o9($,X,Z,Q,W){let Y={};for(let J of globalThis.Object.getOwnPropertyNames($))Y[J]=p0($[J],X,Z,Q,W);return Y}function n9($,X,Z,Q,W){return o9($.properties,X,Z,Q,W)}function NQ($,X,Z,Q,W){let Y=n9($,X,Z,Q,W);return a(Y)}function t9($,X,Z,Q){let W=R0($,X);return W===P.Union?z8([Z,Q]):W===P.True?Z:Q}function p0($,X,Z,Q,W={}){return F8($)?NQ($,X,Z,Q,W):N2($)?C(DQ($,X,Z,Q,W)):C(t9($,X,Z,Q),W)}function s9($,X,Z,Q,W){return{[$]:p0(Q8($),X,Z,Q,W)}}function r9($,X,Z,Q,W){return $.reduce((Y,J)=>{return{...Y,...s9(J,X,Z,Q,W)}},{})}function a9($,X,Z,Q,W){return r9($.keys,X,Z,Q,W)}function DQ($,X,Z,Q,W){let Y=a9($,X,Z,Q,W);return a(Y)}class PQ extends v{constructor($){super("Unknown type");this.schema=$}}function e9($){return $[N]==="Any"||$[N]==="Unknown"}function n($){return $!==void 0}function $4($,X,Z){return!0}function X4($,X,Z){if(!d(Z))return!1;if(n($.minItems)&&!(Z.length>=$.minItems))return!1;if(n($.maxItems)&&!(Z.length<=$.maxItems))return!1;if(!Z.every((Y)=>n8($.items,X,Y)))return!1;if($.uniqueItems===!0&&!function(){let Y=new Set;for(let J of Z){let z=b0(J);if(Y.has(z))return!1;else Y.add(z)}return!0}())return!1;if(!(n($.contains)||g($.minContains)||g($.maxContains)))return!0;let Q=n($.contains)?$.contains:J8(),W=Z.reduce((Y,J)=>n8(Q,X,J)?Y+1:Y,0);if(W===0)return!1;if(g($.minContains)&&W<$.minContains)return!1;if(g($.maxContains)&&W>$.maxContains)return!1;return!0}function Z4($,X,Z){return w6(Z)}function Q4($,X,Z){if(!l8(Z))return!1;if(n($.exclusiveMaximum)&&!(Z<$.exclusiveMaximum))return!1;if(n($.exclusiveMinimum)&&!(Z>$.exclusiveMinimum))return!1;if(n($.maximum)&&!(Z<=$.maximum))return!1;if(n($.minimum)&&!(Z>=$.minimum))return!1;if(n($.multipleOf)&&Z%$.multipleOf!==BigInt(0))return!1;return!0}function W4($,X,Z){return t2(Z)}function Y4($,X,Z){return n8($.returns,X,Z.prototype)}function J4($,X,Z){if(!w2(Z))return!1;if(n($.exclusiveMaximumTimestamp)&&!(Z.getTime()<$.exclusiveMaximumTimestamp))return!1;if(n($.exclusiveMinimumTimestamp)&&!(Z.getTime()>$.exclusiveMinimumTimestamp))return!1;if(n($.maximumTimestamp)&&!(Z.getTime()<=$.maximumTimestamp))return!1;if(n($.minimumTimestamp)&&!(Z.getTime()>=$.minimumTimestamp))return!1;if(n($.multipleOfTimestamp)&&Z.getTime()%$.multipleOfTimestamp!==0)return!1;return!0}function z4($,X,Z){return D6(Z)}function M4($,X,Z){if(!N6(Z))return!1;if(n($.exclusiveMaximum)&&!(Z<$.exclusiveMaximum))return!1;if(n($.exclusiveMinimum)&&!(Z>$.exclusiveMinimum))return!1;if(n($.maximum)&&!(Z<=$.maximum))return!1;if(n($.minimum)&&!(Z>=$.minimum))return!1;if(n($.multipleOf)&&Z%$.multipleOf!==0)return!1;return!0}function B4($,X,Z){let Q=$.allOf.every((W)=>n8(W,X,Z));if($.unevaluatedProperties===!1){let W=new RegExp(D0($)),Y=Object.getOwnPropertyNames(Z).every((J)=>W.test(J));return Q&&Y}else if(p($.unevaluatedProperties)){let W=new RegExp(D0($)),Y=Object.getOwnPropertyNames(Z).every((J)=>W.test(J)||n8($.unevaluatedProperties,X,Z[J]));return Q&&Y}else return Q}function G4($,X,Z){return H6(Z)}function U4($,X,Z){return Z===$.const}function q4($,X,Z){return!1}function w4($,X,Z){return!n8($.not,X,Z)}function H4($,X,Z){return U0(Z)}function A4($,X,Z){if(!I8.IsNumberLike(Z))return!1;if(n($.exclusiveMaximum)&&!(Z<$.exclusiveMaximum))return!1;if(n($.exclusiveMinimum)&&!(Z>$.exclusiveMinimum))return!1;if(n($.minimum)&&!(Z>=$.minimum))return!1;if(n($.maximum)&&!(Z<=$.maximum))return!1;if(n($.multipleOf)&&Z%$.multipleOf!==0)return!1;return!0}function N4($,X,Z){if(!I8.IsObjectLike(Z))return!1;if(n($.minProperties)&&!(Object.getOwnPropertyNames(Z).length>=$.minProperties))return!1;if(n($.maxProperties)&&!(Object.getOwnPropertyNames(Z).length<=$.maxProperties))return!1;let Q=Object.getOwnPropertyNames($.properties);for(let W of Q){let Y=$.properties[W];if($.required&&$.required.includes(W)){if(!n8(Y,X,Z[W]))return!1;if((P0(Y)||e9(Y))&&!(W in Z))return!1}else if(I8.IsExactOptionalProperty(Z,W)&&!n8(Y,X,Z[W]))return!1}if($.additionalProperties===!1){let W=Object.getOwnPropertyNames(Z);if($.required&&$.required.length===Q.length&&W.length===Q.length)return!0;else return W.every((Y)=>Q.includes(Y))}else if(typeof $.additionalProperties==="object")return Object.getOwnPropertyNames(Z).every((Y)=>Q.includes(Y)||n8($.additionalProperties,X,Z[Y]));else return!0}function D4($,X,Z){return A6(Z)}function P4($,X,Z){if(!I8.IsRecordLike(Z))return!1;if(n($.minProperties)&&!(Object.getOwnPropertyNames(Z).length>=$.minProperties))return!1;if(n($.maxProperties)&&!(Object.getOwnPropertyNames(Z).length<=$.maxProperties))return!1;let[Q,W]=Object.entries($.patternProperties)[0],Y=new RegExp(Q),J=Object.entries(Z).every(([q,G])=>{return Y.test(q)?n8(W,X,G):!0}),z=typeof $.additionalProperties==="object"?Object.entries(Z).every(([q,G])=>{return!Y.test(q)?n8($.additionalProperties,X,G):!0}):!0,B=$.additionalProperties===!1?Object.getOwnPropertyNames(Z).every((q)=>{return Y.test(q)}):!0;return J&&z&&B}function O4($,X,Z){return n8($8($,X),X,Z)}function L4($,X,Z){let Q=new RegExp($.source,$.flags);if(n($.minLength)){if(!(Z.length>=$.minLength))return!1}if(n($.maxLength)){if(!(Z.length<=$.maxLength))return!1}return Q.test(Z)}function _4($,X,Z){if(!c(Z))return!1;if(n($.minLength)){if(!(Z.length>=$.minLength))return!1}if(n($.maxLength)){if(!(Z.length<=$.maxLength))return!1}if(n($.pattern)){if(!new RegExp($.pattern).test(Z))return!1}if(n($.format)){if(!w8.Has($.format))return!1;return w8.Get($.format)(Z)}return!0}function F4($,X,Z){return W2(Z)}function S4($,X,Z){return c(Z)&&new RegExp($.pattern).test(Z)}function K4($,X,Z){return n8($8($,X),X,Z)}function C4($,X,Z){if(!d(Z))return!1;if($.items===void 0&&Z.length!==0)return!1;if(Z.length!==$.maxItems)return!1;if(!$.items)return!0;for(let Q=0;Q<$.items.length;Q++)if(!n8($.items[Q],X,Z[Q]))return!1;return!0}function j4($,X,Z){return C8(Z)}function b4($,X,Z){return $.anyOf.some((Q)=>n8(Q,X,Z))}function R4($,X,Z){if(!e0(Z))return!1;if(n($.maxByteLength)&&!(Z.length<=$.maxByteLength))return!1;if(n($.minByteLength)&&!(Z.length>=$.minByteLength))return!1;return!0}function V4($,X,Z){return!0}function E4($,X,Z){return I8.IsVoidLike(Z)}function I4($,X,Z){if(!j8.Has($[N]))return!1;return j8.Get($[N])($,Z)}function n8($,X,Z){let Q=n($.$id)?[...X,$]:X,W=$;switch(W[N]){case"Any":return $4(W,Q,Z);case"Array":return X4(W,Q,Z);case"AsyncIterator":return Z4(W,Q,Z);case"BigInt":return Q4(W,Q,Z);case"Boolean":return W4(W,Q,Z);case"Constructor":return Y4(W,Q,Z);case"Date":return J4(W,Q,Z);case"Function":return z4(W,Q,Z);case"Integer":return M4(W,Q,Z);case"Intersect":return B4(W,Q,Z);case"Iterator":return G4(W,Q,Z);case"Literal":return U4(W,Q,Z);case"Never":return q4(W,Q,Z);case"Not":return w4(W,Q,Z);case"Null":return H4(W,Q,Z);case"Number":return A4(W,Q,Z);case"Object":return N4(W,Q,Z);case"Promise":return D4(W,Q,Z);case"Record":return P4(W,Q,Z);case"Ref":return O4(W,Q,Z);case"RegExp":return L4(W,Q,Z);case"String":return _4(W,Q,Z);case"Symbol":return F4(W,Q,Z);case"TemplateLiteral":return S4(W,Q,Z);case"This":return K4(W,Q,Z);case"Tuple":return C4(W,Q,Z);case"Undefined":return j4(W,Q,Z);case"Union":return b4(W,Q,Z);case"Uint8Array":return R4(W,Q,Z);case"Unknown":return V4(W,Q,Z);case"Void":return E4(W,Q,Z);default:if(!j8.Has(W[N]))throw new PQ(W);return I4(W,Q,Z)}}function W8(...$){return $.length===3?n8($[0],$[1],$[2]):n8($[0],[],$[1])}function x4($){let X={};for(let Z of Object.getOwnPropertyNames($))X[Z]=U8($[Z]);for(let Z of Object.getOwnPropertySymbols($))X[Z]=U8($[Z]);return X}function k4($){return $.map((X)=>U8(X))}function T4($){return $.slice()}function g4($){return new Date($.toISOString())}function f4($){return $}function U8($){if(d($))return k4($);if(w2($))return g4($);if(D8($))return x4($);if(b2($))return T4($);if(H2($))return f4($);throw new Error("ValueClone: Unable to clone value")}class I2 extends v{constructor($,X){super(X);this.schema=$}}function X8($){return typeof $==="function"?$:U8($)}function y4($,X){if(i($,"default"))return X8($.default);else return{}}function d4($,X){if($.uniqueItems===!0&&!i($,"default"))throw new I2($,"Array with the uniqueItems constraint requires a default value");else if("contains"in $&&!i($,"default"))throw new I2($,"Array with the contains constraint requires a default value");else if("default"in $)return X8($.default);else if($.minItems!==void 0)return Array.from({length:$.minItems}).map((Z)=>{return F2($.items,X)});else return[]}function v4($,X){if(i($,"default"))return X8($.default);else return async function*(){}()}function h4($,X){if(i($,"default"))return X8($.default);else return BigInt(0)}function p4($,X){if(i($,"default"))return X8($.default);else return!1}function m4($,X){if(i($,"default"))return X8($.default);else{let Z=F2($.returns,X);if(typeof Z==="object"&&!Array.isArray(Z))return class{constructor(){for(let[Q,W]of Object.entries(Z)){let Y=this;Y[Q]=W}}};else return class{}}}function u4($,X){if(i($,"default"))return X8($.default);else if($.minimumTimestamp!==void 0)return new Date($.minimumTimestamp);else return new Date}function c4($,X){if(i($,"default"))return X8($.default);else return()=>F2($.returns,X)}function i4($,X){if(i($,"default"))return X8($.default);else if($.minimum!==void 0)return $.minimum;else return 0}function l4($,X){if(i($,"default"))return X8($.default);else{let Z=$.allOf.reduce((Q,W)=>{let Y=F2(W,X);return typeof Y==="object"?{...Q,...Y}:Y},{});if(!W8($,X,Z))throw new I2($,"Intersect produced invalid value. Consider using a default value.");return Z}}function o4($,X){if(i($,"default"))return X8($.default);else return function*(){}()}function n4($,X){if(i($,"default"))return X8($.default);else return $.const}function t4($,X){if(i($,"default"))return X8($.default);else throw new I2($,"Never types cannot be created. Consider using a default value.")}function s4($,X){if(i($,"default"))return X8($.default);else throw new I2($,"Not types must have a default value")}function r4($,X){if(i($,"default"))return X8($.default);else return null}function a4($,X){if(i($,"default"))return X8($.default);else if($.minimum!==void 0)return $.minimum;else return 0}function e4($,X){if(i($,"default"))return X8($.default);else{let Z=new Set($.required),Q={};for(let[W,Y]of Object.entries($.properties)){if(!Z.has(W))continue;Q[W]=F2(Y,X)}return Q}}function $J($,X){if(i($,"default"))return X8($.default);else return Promise.resolve(F2($.item,X))}function XJ($,X){let[Z,Q]=Object.entries($.patternProperties)[0];if(i($,"default"))return X8($.default);else if(!(Z===j0||Z===N0)){let W=Z.slice(1,Z.length-1).split("|"),Y={};for(let J of W)Y[J]=F2(Q,X);return Y}else return{}}function ZJ($,X){if(i($,"default"))return X8($.default);else return F2($8($,X),X)}function QJ($,X){if(i($,"default"))return X8($.default);else throw new I2($,"RegExp types cannot be created. Consider using a default value.")}function WJ($,X){if($.pattern!==void 0)if(!i($,"default"))throw new I2($,"String types with patterns must specify a default value");else return X8($.default);else if($.format!==void 0)if(!i($,"default"))throw new I2($,"String types with formats must specify a default value");else return X8($.default);else if(i($,"default"))return X8($.default);else if($.minLength!==void 0)return Array.from({length:$.minLength}).map(()=>" ").join("");else return""}function YJ($,X){if(i($,"default"))return X8($.default);else if("value"in $)return Symbol.for($.value);else return Symbol()}function JJ($,X){if(i($,"default"))return X8($.default);if(!L6($))throw new I2($,"Can only create template literals that produce a finite variants. Consider using a default value.");return J1($)[0]}function zJ($,X){if(OQ++>AJ)throw new I2($,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");if(i($,"default"))return X8($.default);else return F2($8($,X),X)}function MJ($,X){if(i($,"default"))return X8($.default);if($.items===void 0)return[];else return Array.from({length:$.minItems}).map((Z,Q)=>F2($.items[Q],X))}function BJ($,X){if(i($,"default"))return X8($.default);else return}function GJ($,X){if(i($,"default"))return X8($.default);else if($.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");else return F2($.anyOf[0],X)}function UJ($,X){if(i($,"default"))return X8($.default);else if($.minByteLength!==void 0)return new Uint8Array($.minByteLength);else return new Uint8Array(0)}function qJ($,X){if(i($,"default"))return X8($.default);else return{}}function wJ($,X){if(i($,"default"))return X8($.default);else return}function HJ($,X){if(i($,"default"))return X8($.default);else throw new Error("User defined types must specify a default value")}function F2($,X){let Z=c($.$id)?[...X,$]:X,Q=$;switch(Q[N]){case"Any":return y4(Q,Z);case"Array":return d4(Q,Z);case"AsyncIterator":return v4(Q,Z);case"BigInt":return h4(Q,Z);case"Boolean":return p4(Q,Z);case"Constructor":return m4(Q,Z);case"Date":return u4(Q,Z);case"Function":return c4(Q,Z);case"Integer":return i4(Q,Z);case"Intersect":return l4(Q,Z);case"Iterator":return o4(Q,Z);case"Literal":return n4(Q,Z);case"Never":return t4(Q,Z);case"Not":return s4(Q,Z);case"Null":return r4(Q,Z);case"Number":return a4(Q,Z);case"Object":return e4(Q,Z);case"Promise":return $J(Q,Z);case"Record":return XJ(Q,Z);case"Ref":return ZJ(Q,Z);case"RegExp":return QJ(Q,Z);case"String":return WJ(Q,Z);case"Symbol":return YJ(Q,Z);case"TemplateLiteral":return JJ(Q,Z);case"This":return zJ(Q,Z);case"Tuple":return MJ(Q,Z);case"Undefined":return BJ(Q,Z);case"Union":return GJ(Q,Z);case"Uint8Array":return UJ(Q,Z);case"Unknown":return qJ(Q,Z);case"Void":return wJ(Q,Z);default:if(!j8.Has(Q[N]))throw new I2(Q,"Unknown type");return HJ(Q,Z)}}var AJ=512,OQ=0;function S2(...$){return OQ=0,$.length===2?F2($[0],$[1]):F2($[0],[])}class C$ extends v{constructor($,X){super(X);this.schema=$}}function NJ($,X,Z){if($[N]==="Object"&&typeof Z==="object"&&!U0(Z)){let Q=$,W=Object.getOwnPropertyNames(Z),Y=Object.entries(Q.properties),[J,z]=[1/Y.length,Y.length];return Y.reduce((B,[q,G])=>{let A=G[N]==="Literal"&&G.const===Z[q]?z:0,O=W8(G,X,Z[q])?J:0,M=W.includes(q)?J:0;return B+(A+O+M)},0)}else return W8($,X,Z)?1:0}function DJ($,X,Z){let Q=$.anyOf.map((J)=>$8(J,X)),[W,Y]=[Q[0],0];for(let J of Q){let z=NJ(J,X,Z);if(z>Y)W=J,Y=z}return W}function PJ($,X,Z){if("default"in $)return typeof Z==="function"?$.default:U8($.default);else{let Q=DJ($,X,Z);return j6(Q,X,Z)}}function OJ($,X,Z){return W8($,X,Z)?U8(Z):S2($,X)}function LJ($,X,Z){return W8($,X,Z)?Z:S2($,X)}function _J($,X,Z){if(W8($,X,Z))return U8(Z);let Q=d(Z)?U8(Z):S2($,X),W=g($.minItems)&&Q.length<$.minItems?[...Q,...Array.from({length:$.minItems-Q.length},()=>null)]:Q,J=(g($.maxItems)&&W.length>$.maxItems?W.slice(0,$.maxItems):W).map((B)=>X0($.items,X,B));if($.uniqueItems!==!0)return J;let z=[...new Set(J)];if(!W8($,X,z))throw new C$($,"Array cast produced invalid data due to uniqueItems constraint");return z}function FJ($,X,Z){if(W8($,X,Z))return S2($,X);let Q=new Set($.returns.required||[]),W=function(){};for(let[Y,J]of Object.entries($.returns.properties)){if(!Q.has(Y)&&Z.prototype[Y]===void 0)continue;W.prototype[Y]=X0(J,X,Z.prototype[Y])}return W}function SJ($,X,Z){let Q=S2($,X),W=D8(Q)&&D8(Z)?{...Q,...Z}:Z;return W8($,X,W)?W:S2($,X)}function KJ($,X,Z){throw new C$($,"Never types cannot be cast")}function CJ($,X,Z){if(W8($,X,Z))return Z;if(Z===null||typeof Z!=="object")return S2($,X);let Q=new Set($.required||[]),W={};for(let[Y,J]of Object.entries($.properties)){if(!Q.has(Y)&&Z[Y]===void 0)continue;W[Y]=X0(J,X,Z[Y])}if(typeof $.additionalProperties==="object"){let Y=Object.getOwnPropertyNames($.properties);for(let J of Object.getOwnPropertyNames(Z)){if(Y.includes(J))continue;W[J]=X0($.additionalProperties,X,Z[J])}}return W}function jJ($,X,Z){if(W8($,X,Z))return U8(Z);if(Z===null||typeof Z!=="object"||Array.isArray(Z)||Z instanceof Date)return S2($,X);let Q=Object.getOwnPropertyNames($.patternProperties)[0],W=$.patternProperties[Q],Y={};for(let[J,z]of Object.entries(Z))Y[J]=X0(W,X,z);return Y}function bJ($,X,Z){return X0($8($,X),X,Z)}function RJ($,X,Z){return X0($8($,X),X,Z)}function VJ($,X,Z){if(W8($,X,Z))return U8(Z);if(!d(Z))return S2($,X);if($.items===void 0)return[];return $.items.map((Q,W)=>X0(Q,X,Z[W]))}function EJ($,X,Z){return W8($,X,Z)?U8(Z):PJ($,X,Z)}function X0($,X,Z){let Q=c($.$id)?[...X,$]:X,W=$;switch($[N]){case"Array":return _J(W,Q,Z);case"Constructor":return FJ(W,Q,Z);case"Intersect":return SJ(W,Q,Z);case"Never":return KJ(W,Q,Z);case"Object":return CJ(W,Q,Z);case"Record":return jJ(W,Q,Z);case"Ref":return bJ(W,Q,Z);case"This":return RJ(W,Q,Z);case"Tuple":return VJ(W,Q,Z);case"Union":return EJ(W,Q,Z);case"Date":case"Symbol":case"Uint8Array":return OJ($,X,Z);default:return LJ(W,Q,Z)}}function j6(...$){return $.length===3?X0($[0],$[1],$[2]):X0($[0],[],$[1])}function IJ($){return p($)&&$[N]!=="Unsafe"}function xJ($,X,Z){if(!d(Z))return Z;return Z.map((Q)=>K2($.items,X,Q))}function kJ($,X,Z){let Q=$.unevaluatedProperties,Y=$.allOf.map((z)=>K2(z,X,U8(Z))).reduce((z,B)=>i8(B)?{...z,...B}:B,{});if(!i8(Z)||!i8(Y)||!p(Q))return Y;let J=M2($);for(let z of Object.getOwnPropertyNames(Z)){if(J.includes(z))continue;if(W8(Q,X,Z[z]))Y[z]=K2(Q,X,Z[z])}return Y}function TJ($,X,Z){if(!i8(Z)||d(Z))return Z;let Q=$.additionalProperties;for(let W of Object.getOwnPropertyNames(Z)){if(W in $.properties){Z[W]=K2($.properties[W],X,Z[W]);continue}if(p(Q)&&W8(Q,X,Z[W])){Z[W]=K2(Q,X,Z[W]);continue}delete Z[W]}return Z}function gJ($,X,Z){if(!i8(Z))return Z;let Q=$.additionalProperties,W=Object.getOwnPropertyNames(Z),[Y,J]=Object.entries($.patternProperties)[0],z=new RegExp(Y);for(let B of W){if(z.test(B)){Z[B]=K2(J,X,Z[B]);continue}if(p(Q)&&W8(Q,X,Z[B])){Z[B]=K2(Q,X,Z[B]);continue}delete Z[B]}return Z}function fJ($,X,Z){return K2($8($,X),X,Z)}function yJ($,X,Z){return K2($8($,X),X,Z)}function dJ($,X,Z){if(!d(Z))return Z;if(C8($.items))return[];let Q=Math.min(Z.length,$.items.length);for(let W=0;W<Q;W++)Z[W]=K2($.items[W],X,Z[W]);return Z.length>Q?Z.slice(0,Q):Z}function vJ($,X,Z){for(let Q of $.anyOf)if(IJ(Q)&&W8(Q,X,Z))return K2(Q,X,Z);return Z}function K2($,X,Z){let Q=c($.$id)?[...X,$]:X,W=$;switch(W[N]){case"Array":return xJ(W,Q,Z);case"Intersect":return kJ(W,Q,Z);case"Object":return TJ(W,Q,Z);case"Record":return gJ(W,Q,Z);case"Ref":return fJ(W,Q,Z);case"This":return yJ(W,Q,Z);case"Tuple":return dJ(W,Q,Z);case"Union":return vJ(W,Q,Z);default:return Z}}function j$(...$){return $.length===3?K2($[0],$[1],$[2]):K2($[0],[],$[1])}function b6($){return c($)&&!isNaN($)&&!isNaN(parseFloat($))}function hJ($){return l8($)||t2($)||g($)}function h1($){return $===!0||g($)&&$===1||l8($)&&$===BigInt("1")||c($)&&($.toLowerCase()==="true"||$==="1")}function p1($){return $===!1||g($)&&($===0||Object.is($,-0))||l8($)&&$===BigInt("0")||c($)&&($.toLowerCase()==="false"||$==="0"||$==="-0")}function pJ($){return c($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)}function mJ($){return c($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)}function uJ($){return c($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)}function cJ($){return c($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)}function iJ($){return c($)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test($)}function lJ($,X){let Z=_Q($);return Z===X?Z:$}function oJ($,X){let Z=FQ($);return Z===X?Z:$}function nJ($,X){let Z=LQ($);return Z===X?Z:$}function tJ($,X){return c($.const)?lJ(X,$.const):g($.const)?oJ(X,$.const):t2($.const)?nJ(X,$.const):U8(X)}function LQ($){return h1($)?!0:p1($)?!1:$}function sJ($){return b6($)?BigInt(parseInt($)):g($)?BigInt($|0):p1($)?BigInt(0):h1($)?BigInt(1):$}function _Q($){return hJ($)?$.toString():W2($)&&$.description!==void 0?$.description.toString():$}function FQ($){return b6($)?parseFloat($):h1($)?1:p1($)?0:$}function rJ($){return b6($)?parseInt($):g($)?$|0:h1($)?1:p1($)?0:$}function aJ($){return c($)&&$.toLowerCase()==="null"?null:$}function eJ($){return c($)&&$==="undefined"?void 0:$}function $z($){return w2($)?$:g($)?new Date($):h1($)?new Date(1):p1($)?new Date(0):b6($)?new Date(parseInt($)):mJ($)?new Date(`1970-01-01T${$}.000Z`):pJ($)?new Date(`1970-01-01T${$}`):cJ($)?new Date(`${$}.000Z`):uJ($)?new Date($):iJ($)?new Date(`${$}T00:00:00.000Z`):$}function Xz($){return $}function Zz($,X,Z){return(d(Z)?Z:[Z]).map((W)=>Z0($.items,X,W))}function Qz($,X,Z){return sJ(Z)}function Wz($,X,Z){return LQ(Z)}function Yz($,X,Z){return $z(Z)}function Jz($,X,Z){return rJ(Z)}function zz($,X,Z){return $.allOf.reduce((Q,W)=>Z0(W,X,Q),Z)}function Mz($,X,Z){return tJ($,Z)}function Bz($,X,Z){return aJ(Z)}function Gz($,X,Z){return FQ(Z)}function Uz($,X,Z){if(!i8(Z))return Z;let W={};for(let Y of Object.keys(Z))W[Y]=i($.properties,Y)?Z0($.properties[Y],X,Z[Y]):Z[Y];return W}function qz($,X,Z){let Q=Object.getOwnPropertyNames($.patternProperties)[0],W=$.patternProperties[Q],Y={};for(let[J,z]of Object.entries(Z))Y[J]=Z0(W,X,z);return Y}function wz($,X,Z){return Z0($8($,X),X,Z)}function Hz($,X,Z){return _Q(Z)}function Az($,X,Z){return c(Z)||g(Z)?Symbol(Z):Z}function Nz($,X,Z){return Z0($8($,X),X,Z)}function Dz($,X,Z){if(!(d(Z)&&!C8($.items)))return Z;return Z.map((W,Y)=>{return Y<$.items.length?Z0($.items[Y],X,W):W})}function Pz($,X,Z){return eJ(Z)}function Oz($,X,Z){for(let Q of $.anyOf){let W=Z0(Q,X,Z);if(!W8(Q,X,W))continue;return W}return Z}function Z0($,X,Z){let Q=c($.$id)?[...X,$]:X,W=$;switch($[N]){case"Array":return Zz(W,Q,Z);case"BigInt":return Qz(W,Q,Z);case"Boolean":return Wz(W,Q,Z);case"Date":return Yz(W,Q,Z);case"Integer":return Jz(W,Q,Z);case"Intersect":return zz(W,Q,Z);case"Literal":return Mz(W,Q,Z);case"Null":return Bz(W,Q,Z);case"Number":return Gz(W,Q,Z);case"Object":return Uz(W,Q,Z);case"Record":return qz(W,Q,Z);case"Ref":return wz(W,Q,Z);case"String":return Hz(W,Q,Z);case"Symbol":return Az(W,Q,Z);case"This":return Nz(W,Q,Z);case"Tuple":return Dz(W,Q,Z);case"Undefined":return Pz(W,Q,Z);case"Union":return Oz(W,Q,Z);default:return Xz(Z)}}function b$(...$){return $.length===3?Z0($[0],$[1],$[2]):Z0($[0],[],$[1])}function V0($,X){return X===void 0&&"default"in $?U8($.default):X}function Lz($){return p($)&&$[N]!=="Unsafe"}function R6($){return p($)&&"default"in $}function _z($,X,Z){let Q=V0($,Z);if(!d(Q))return Q;for(let W=0;W<Q.length;W++)Q[W]=x2($.items,X,Q[W]);return Q}function Fz($,X,Z){let Q=V0($,Z);return $.allOf.reduce((W,Y)=>{let J=x2(Y,X,Q);return i8(J)?{...W,...J}:J},{})}function Sz($,X,Z){let Q=V0($,Z);if(!i8(Q))return Q;let W=$.additionalProperties,Y=Object.getOwnPropertyNames($.properties);for(let J of Y){if(!R6($.properties[J]))continue;Q[J]=x2($.properties[J],X,Q[J])}if(!R6(W))return Q;for(let J of Object.getOwnPropertyNames(Q)){if(Y.includes(J))continue;Q[J]=x2(W,X,Q[J])}return Q}function Kz($,X,Z){let Q=V0($,Z);if(!i8(Q))return Q;let W=$.additionalProperties,[Y,J]=Object.entries($.patternProperties)[0],z=new RegExp(Y);for(let B of Object.getOwnPropertyNames(Q)){if(!(z.test(B)&&R6(J)))continue;Q[B]=x2(J,X,Q[B])}if(!R6(W))return Q;for(let B of Object.getOwnPropertyNames(Q)){if(z.test(B))continue;Q[B]=x2(W,X,Q[B])}return Q}function Cz($,X,Z){return x2($8($,X),X,V0($,Z))}function jz($,X,Z){return x2($8($,X),X,Z)}function bz($,X,Z){let Q=V0($,Z);if(!d(Q)||C8($.items))return Q;let[W,Y]=[$.items,Math.max($.items.length,Q.length)];for(let J=0;J<Y;J++)if(J<W.length)Q[J]=x2(W[J],X,Q[J]);return Q}function Rz($,X,Z){let Q=V0($,Z);for(let W of $.anyOf){let Y=x2(W,X,Q);if(Lz(W)&&W8(W,Y))return Y}return Q}function x2($,X,Z){let Q=c($.$id)?[...X,$]:X,W=$;switch(W[N]){case"Array":return _z(W,Q,Z);case"Intersect":return Fz(W,Q,Z);case"Object":return Sz(W,Q,Z);case"Record":return Kz(W,Q,Z);case"Ref":return Cz(W,Q,Z);case"This":return jz(W,Q,Z);case"Tuple":return bz(W,Q,Z);case"Union":return Rz(W,Q,Z);default:return V0(W,Z)}}function R$(...$){return $.length===3?x2($[0],$[1],$[2]):x2($[0],[],$[1])}var m2={};x0(m2,{ValuePointerRootSetError:()=>V$,ValuePointerRootDeleteError:()=>E$,Set:()=>Vz,Has:()=>Iz,Get:()=>xz,Format:()=>m1,Delete:()=>Ez});class V$ extends v{constructor($,X,Z){super("Cannot set root value");this.value=$,this.path=X,this.update=Z}}class E$ extends v{constructor($,X){super("Cannot delete root value");this.value=$,this.path=X}}function SQ($){return $.indexOf("~")===-1?$:$.replace(/~1/g,"/").replace(/~0/g,"~")}function*m1($){if($==="")return;let[X,Z]=[0,0];for(let Q=0;Q<$.length;Q++)if($.charAt(Q)==="/")if(Q===0)X=Q+1;else Z=Q,yield SQ($.slice(X,Z)),X=Q+1;else Z=Q;yield SQ($.slice(X))}function Vz($,X,Z){if(X==="")throw new V$($,X,Z);let[Q,W,Y]=[null,$,""];for(let J of m1(X)){if(W[J]===void 0)W[J]={};Q=W,W=W[J],Y=J}Q[Y]=Z}function Ez($,X){if(X==="")throw new E$($,X);let[Z,Q,W]=[null,$,""];for(let Y of m1(X)){if(Q[Y]===void 0||Q[Y]===null)return;Z=Q,Q=Q[Y],W=Y}if(Array.isArray(Z)){let Y=parseInt(W);Z.splice(Y,1)}else delete Z[W]}function Iz($,X){if(X==="")return!0;let[Z,Q,W]=[null,$,""];for(let Y of m1(X)){if(Q[Y]===void 0)return!1;Z=Q,Q=Q[Y],W=Y}return Object.getOwnPropertyNames(Z).includes(W)}function xz($,X){if(X==="")return $;let Z=$;for(let Q of m1(X)){if(Z[Q]===void 0)return;Z=Z[Q]}return Z}var kz=M8({type:Q8("insert"),path:O2(),value:$0()}),Tz=M8({type:Q8("update"),path:O2(),value:$0()}),gz=M8({type:Q8("delete"),path:O2()}),mO=z8([kz,Tz,gz]);class I$ extends v{constructor($,X){super(X);this.value=$}}class u1 extends I${constructor($){super($,"Cannot diff objects with symbol keys");this.value=$}}function c1($,X){return{type:"update",path:$,value:X}}function KQ($,X){return{type:"insert",path:$,value:X}}function CQ($){return{type:"delete",path:$}}function*fz($,X,Z){if(!D8(Z))return yield c1($,Z);let Q=[...globalThis.Object.keys(X),...globalThis.Object.getOwnPropertySymbols(X)],W=[...globalThis.Object.keys(Z),...globalThis.Object.getOwnPropertySymbols(Z)];for(let Y of Q){if(W2(Y))throw new u1(Y);if(C8(Z[Y])&&W.includes(Y))yield c1(`${$}/${globalThis.String(Y)}`,void 0)}for(let Y of W){if(C8(X[Y])||C8(Z[Y]))continue;if(W2(Y))throw new u1(Y);yield*V6(`${$}/${globalThis.String(Y)}`,X[Y],Z[Y])}for(let Y of W){if(W2(Y))throw new u1(Y);if(C8(X[Y]))yield KQ(`${$}/${globalThis.String(Y)}`,Z[Y])}for(let Y of Q.reverse()){if(W2(Y))throw new u1(Y);if(C8(Z[Y])&&!W.includes(Y))yield CQ(`${$}/${globalThis.String(Y)}`)}}function*yz($,X,Z){if(!d(Z))return yield c1($,Z);for(let Q=0;Q<Math.min(X.length,Z.length);Q++)yield*V6(`${$}/${Q}`,X[Q],Z[Q]);for(let Q=0;Q<Z.length;Q++){if(Q<X.length)continue;yield KQ(`${$}/${Q}`,Z[Q])}for(let Q=X.length-1;Q>=0;Q--){if(Q<Z.length)continue;yield CQ(`${$}/${Q}`)}}function*dz($,X,Z){if(!b2(Z)||X.length!==Z.length||globalThis.Object.getPrototypeOf(X).constructor.name!==globalThis.Object.getPrototypeOf(Z).constructor.name)return yield c1($,Z);for(let Q=0;Q<Math.min(X.length,Z.length);Q++)yield*V6(`${$}/${Q}`,X[Q],Z[Q])}function*vz($,X,Z){if(X===Z)return;yield c1($,Z)}function*V6($,X,Z){if(D8(X))return yield*fz($,X,Z);if(d(X))return yield*yz($,X,Z);if(b2(X))return yield*dz($,X,Z);if(H2(X))return yield*vz($,X,Z);throw new I$(X,"Unable to create diff edits for unknown value")}function jQ($,X){return[...V6("",$,X)]}function hz($){return $.length>0&&$[0].path===""&&$[0].type==="update"}function pz($){return $.length===0}function bQ($,X){if(hz(X))return U8(X[0].value);if(pz(X))return U8($);let Z=U8($);for(let Q of X)switch(Q.type){case"insert":{m2.Set(Z,Q.path,Q.value);break}case"update":{m2.Set(Z,Q.path,Q.value);break}case"delete":{m2.Delete(Z,Q.path);break}}return Z}function mz($,X){if(!D8(X))return!1;let Z=[...Object.keys($),...Object.getOwnPropertySymbols($)],Q=[...Object.keys(X),...Object.getOwnPropertySymbols(X)];if(Z.length!==Q.length)return!1;return Z.every((W)=>i1($[W],X[W]))}function uz($,X){return w2(X)&&$.getTime()===X.getTime()}function cz($,X){if(!d(X)||$.length!==X.length)return!1;return $.every((Z,Q)=>i1(Z,X[Q]))}function iz($,X){if(!b2(X)||$.length!==X.length||Object.getPrototypeOf($).constructor.name!==Object.getPrototypeOf(X).constructor.name)return!1;return $.every((Z,Q)=>i1(Z,X[Q]))}function lz($,X){return $===X}function i1($,X){if(D8($))return mz($,X);if(w2($))return uz($,X);if(b2($))return iz($,X);if(d($))return cz($,X);if(H2($))return lz($,X);throw new Error("ValueEquals: Unable to compare value")}class x$ extends v{constructor($){super($)}}function oz($,X,Z,Q){if(!D8(Z))m2.Set($,X,U8(Q));else{let W=Object.getOwnPropertyNames(Z),Y=Object.getOwnPropertyNames(Q);for(let J of W)if(!Y.includes(J))delete Z[J];for(let J of Y)if(!W.includes(J))Z[J]=null;for(let J of Y)k$($,`${X}/${J}`,Z[J],Q[J])}}function nz($,X,Z,Q){if(!d(Z))m2.Set($,X,U8(Q));else{for(let W=0;W<Q.length;W++)k$($,`${X}/${W}`,Z[W],Q[W]);Z.splice(Q.length)}}function tz($,X,Z,Q){if(b2(Z)&&Z.length===Q.length)for(let W=0;W<Z.length;W++)Z[W]=Q[W];else m2.Set($,X,U8(Q))}function sz($,X,Z,Q){if(Z===Q)return;m2.Set($,X,Q)}function k$($,X,Z,Q){if(d(Q))return nz($,X,Z,Q);if(b2(Q))return tz($,X,Z,Q);if(D8(Q))return oz($,X,Z,Q);if(H2(Q))return sz($,X,Z,Q)}function RQ($){return b2($)||H2($)}function rz($,X){return D8($)&&d(X)||d($)&&D8(X)}function VQ($,X){if(RQ($)||RQ(X))throw new x$("Only object and array types can be mutated at the root level");if(rz($,X))throw new x$("Cannot assign due type mismatch of assignable values");k$($,"",$,X)}class l1 extends v{constructor($,X,Z){super("Unable to decode value as it does not match the expected schema");this.schema=$,this.value=X,this.error=Z}}class E6 extends v{constructor($,X,Z,Q){super(Q instanceof Error?Q.message:"Unknown error");this.schema=$,this.path=X,this.value=Z,this.error=Q}}function R8($,X,Z){try{return L8($)?$[K8].Decode(Z):Z}catch(Q){throw new E6($,X,Z,Q)}}function az($,X,Z,Q){return d(Q)?R8($,Z,Q.map((W,Y)=>Q0($.items,X,`${Z}/${Y}`,W))):R8($,Z,Q)}function ez($,X,Z,Q){if(!D8(Q)||H2(Q))return R8($,Z,Q);let W=F6($),Y=W.map((G)=>G[0]),J={...Q};for(let[G,A]of W)if(G in J)J[G]=Q0(A,X,`${Z}/${G}`,J[G]);if(!L8($.unevaluatedProperties))return R8($,Z,J);let z=Object.getOwnPropertyNames(J),B=$.unevaluatedProperties,q={...J};for(let G of z)if(!Y.includes(G))q[G]=R8(B,`${Z}/${G}`,q[G]);return R8($,Z,q)}function $M($,X,Z,Q){return R8($,Z,Q0($.not,X,Z,Q))}function XM($,X,Z,Q){if(!D8(Q))return R8($,Z,Q);let W=M2($),Y={...Q};for(let q of W)if(q in Y)Y[q]=Q0($.properties[q],X,`${Z}/${q}`,Y[q]);if(!p($.additionalProperties))return R8($,Z,Y);let J=Object.getOwnPropertyNames(Y),z=$.additionalProperties,B={...Y};for(let q of J)if(!W.includes(q))B[q]=R8(z,`${Z}/${q}`,B[q]);return R8($,Z,B)}function ZM($,X,Z,Q){if(!D8(Q))return R8($,Z,Q);let W=Object.getOwnPropertyNames($.patternProperties)[0],Y=new RegExp(W),J={...Q};for(let G of Object.getOwnPropertyNames(Q))if(Y.test(G))J[G]=Q0($.patternProperties[W],X,`${Z}/${G}`,J[G]);if(!p($.additionalProperties))return R8($,Z,J);let z=Object.getOwnPropertyNames(J),B=$.additionalProperties,q={...J};for(let G of z)if(!Y.test(G))q[G]=R8(B,`${Z}/${G}`,q[G]);return R8($,Z,q)}function QM($,X,Z,Q){let W=$8($,X);return R8($,Z,Q0(W,X,Z,Q))}function WM($,X,Z,Q){let W=$8($,X);return R8($,Z,Q0(W,X,Z,Q))}function YM($,X,Z,Q){return d(Q)&&d($.items)?R8($,Z,$.items.map((W,Y)=>Q0(W,X,`${Z}/${Y}`,Q[Y]))):R8($,Z,Q)}function JM($,X,Z,Q){for(let W of $.anyOf){if(!W8(W,X,Q))continue;let Y=Q0(W,X,Z,Q);return R8($,Z,Y)}return R8($,Z,Q)}function Q0($,X,Z,Q){let W=typeof $.$id==="string"?[...X,$]:X,Y=$;switch($[N]){case"Array":return az(Y,W,Z,Q);case"Intersect":return ez(Y,W,Z,Q);case"Not":return $M(Y,W,Z,Q);case"Object":return XM(Y,W,Z,Q);case"Record":return ZM(Y,W,Z,Q);case"Ref":return QM(Y,W,Z,Q);case"Symbol":return R8(Y,Z,Q);case"This":return WM(Y,W,Z,Q);case"Tuple":return YM(Y,W,Z,Q);case"Union":return JM(Y,W,Z,Q);default:return R8(Y,Z,Q)}}function I6($,X,Z){return Q0($,X,"",Z)}class o1 extends v{constructor($,X,Z){super("The encoded value does not match the expected schema");this.schema=$,this.value=X,this.error=Z}}class EQ extends v{constructor($,X,Z,Q){super(`${Q instanceof Error?Q.message:"Unknown error"}`);this.schema=$,this.path=X,this.value=Z,this.error=Q}}function p8($,X,Z){try{return L8($)?$[K8].Encode(Z):Z}catch(Q){throw new EQ($,X,Z,Q)}}function zM($,X,Z,Q){let W=p8($,Z,Q);return d(W)?W.map((Y,J)=>W0($.items,X,`${Z}/${J}`,Y)):W}function MM($,X,Z,Q){let W=p8($,Z,Q);if(!D8(Q)||H2(Q))return W;let Y=F6($),J=Y.map((A)=>A[0]),z={...W};for(let[A,O]of Y)if(A in z)z[A]=W0(O,X,`${Z}/${A}`,z[A]);if(!L8($.unevaluatedProperties))return p8($,Z,z);let B=Object.getOwnPropertyNames(z),q=$.unevaluatedProperties,G={...z};for(let A of B)if(!J.includes(A))G[A]=p8(q,`${Z}/${A}`,G[A]);return G}function BM($,X,Z,Q){return p8($.not,Z,p8($,Z,Q))}function GM($,X,Z,Q){let W=p8($,Z,Q);if(!D8(W))return W;let Y=M2($),J={...W};for(let G of Y)if(G in J)J[G]=W0($.properties[G],X,`${Z}/${G}`,J[G]);if(!p($.additionalProperties))return J;let z=Object.getOwnPropertyNames(J),B=$.additionalProperties,q={...J};for(let G of z)if(!Y.includes(G))q[G]=p8(B,`${Z}/${G}`,q[G]);return q}function UM($,X,Z,Q){let W=p8($,Z,Q);if(!D8(Q))return W;let Y=Object.getOwnPropertyNames($.patternProperties)[0],J=new RegExp(Y),z={...W};for(let A of Object.getOwnPropertyNames(Q))if(J.test(A))z[A]=W0($.patternProperties[Y],X,`${Z}/${A}`,z[A]);if(!p($.additionalProperties))return p8($,Z,z);let B=Object.getOwnPropertyNames(z),q=$.additionalProperties,G={...z};for(let A of B)if(!J.test(A))G[A]=p8(q,`${Z}/${A}`,G[A]);return G}function qM($,X,Z,Q){let W=$8($,X),Y=W0(W,X,Z,Q);return p8($,Z,Y)}function wM($,X,Z,Q){let W=$8($,X),Y=W0(W,X,Z,Q);return p8($,Z,Y)}function HM($,X,Z,Q){let W=p8($,Z,Q);return d($.items)?$.items.map((Y,J)=>W0(Y,X,`${Z}/${J}`,W[J])):[]}function AM($,X,Z,Q){for(let W of $.anyOf){if(!W8(W,X,Q))continue;let Y=W0(W,X,Z,Q);return p8($,Z,Y)}for(let W of $.anyOf){let Y=W0(W,X,Z,Q);if(!W8($,X,Y))continue;return p8($,Z,Y)}return p8($,Z,Q)}function W0($,X,Z,Q){let W=typeof $.$id==="string"?[...X,$]:X,Y=$;switch($[N]){case"Array":return zM(Y,W,Z,Q);case"Intersect":return MM(Y,W,Z,Q);case"Not":return BM(Y,W,Z,Q);case"Object":return GM(Y,W,Z,Q);case"Record":return UM(Y,W,Z,Q);case"Ref":return qM(Y,W,Z,Q);case"This":return wM(Y,W,Z,Q);case"Tuple":return HM(Y,W,Z,Q);case"Union":return AM(Y,W,Z,Q);default:return p8(Y,Z,Q)}}function x6($,X,Z){return W0($,X,"",Z)}function NM($,X){return L8($)||m8($.items,X)}function DM($,X){return L8($)||m8($.items,X)}function PM($,X){return L8($)||m8($.returns,X)||$.parameters.some((Z)=>m8(Z,X))}function OM($,X){return L8($)||m8($.returns,X)||$.parameters.some((Z)=>m8(Z,X))}function LM($,X){return L8($)||L8($.unevaluatedProperties)||$.allOf.some((Z)=>m8(Z,X))}function _M($,X){return L8($)||m8($.items,X)}function FM($,X){return L8($)||m8($.not,X)}function SM($,X){return L8($)||Object.values($.properties).some((Z)=>m8(Z,X))||p($.additionalProperties)&&m8($.additionalProperties,X)}function KM($,X){return L8($)||m8($.item,X)}function CM($,X){let Z=Object.getOwnPropertyNames($.patternProperties)[0],Q=$.patternProperties[Z];return L8($)||m8(Q,X)||p($.additionalProperties)&&L8($.additionalProperties)}function jM($,X){if(L8($))return!0;return m8($8($,X),X)}function bM($,X){if(L8($))return!0;return m8($8($,X),X)}function RM($,X){return L8($)||!C8($.items)&&$.items.some((Z)=>m8(Z,X))}function VM($,X){return L8($)||$.anyOf.some((Z)=>m8(Z,X))}function m8($,X){let Z=c($.$id)?[...X,$]:X,Q=$;if($.$id&&T$.has($.$id))return!1;if($.$id)T$.add($.$id);switch($[N]){case"Array":return NM(Q,Z);case"AsyncIterator":return DM(Q,Z);case"Constructor":return PM(Q,Z);case"Function":return OM(Q,Z);case"Intersect":return LM(Q,Z);case"Iterator":return _M(Q,Z);case"Not":return FM(Q,Z);case"Object":return SM(Q,Z);case"Promise":return KM(Q,Z);case"Record":return CM(Q,Z);case"Ref":return jM(Q,Z);case"This":return bM(Q,Z);case"Tuple":return RM(Q,Z);case"Union":return VM(Q,Z);default:return L8($)}}var T$=new Set;function n1($,X){return T$.clear(),m8($,X)}var m={};x0(m,{Patch:()=>pM,Mutate:()=>mM,Hash:()=>hM,Errors:()=>f$,Equal:()=>dM,Encode:()=>yM,Diff:()=>vM,Default:()=>fM,Decode:()=>gM,Create:()=>IM,Convert:()=>kM,Clone:()=>TM,Clean:()=>xM,Check:()=>g$,Cast:()=>EM});function EM(...$){return j6.apply(j6,$)}function IM(...$){return S2.apply(S2,$)}function g$(...$){return W8.apply(W8,$)}function xM(...$){return j$.apply(j$,$)}function kM(...$){return b$.apply(b$,$)}function TM($){return U8($)}function gM(...$){let[X,Z,Q]=$.length===3?[$[0],$[1],$[2]]:[$[0],[],$[1]];if(!g$(X,Z,Q))throw new l1(X,Q,f$(X,Z,Q).First());return n1(X,Z)?I6(X,Z,Q):Q}function fM(...$){return R$.apply(R$,$)}function yM(...$){let[X,Z,Q]=$.length===3?[$[0],$[1],$[2]]:[$[0],[],$[1]],W=n1(X,Z)?x6(X,Z,Q):Q;if(!g$(X,Z,W))throw new o1(X,W,f$(X,Z,W).First());return W}function f$(...$){return y1.apply(y1,$)}function dM($,X){return i1($,X)}function vM($,X){return jQ($,X)}function hM($){return b0($)}function pM($,X){return bQ($,X)}function mM($,X){VQ($,X)}function IQ($){return $.map((X)=>y$(X))}function uM($){return X2(IQ($))}function cM($){return z8(IQ($))}function iM($){return y$($)}function y$($){return T8($)?uM($.allOf):Z8($)?cM($.anyOf):f0($)?iM($.item):$}function d$($,X={}){return C(y$($),X)}function lM($){let X=[];for(let Z of $)X.push(...M2(Z));return YZ(X)}function oM($){return $.filter((X)=>!Z1(X))}function nM($,X){let Z=[];for(let Q of $)Z.push(...x1(Q,[X]));return oM(Z)}function tM($,X){let Z={};for(let Q of X)Z[Q]=O6(nM($,Q));return Z}function v$($,X={}){let Z=lM($),Q=tM($,Z);return M8(Q,X)}function t1($={}){return{...$,[N]:"Date",type:"Date"}}function s1($={}){return{...$,[N]:"Null",type:"null"}}function r1($){return{...$,[N]:"Symbol",type:"symbol"}}function a1($={}){return{...$,[N]:"Undefined",type:"undefined"}}function e1($={}){return{...$,[N]:"Uint8Array",type:"Uint8Array"}}function sM($){return $.map((X)=>h$(X,!1))}function rM($){let X={};for(let Z of globalThis.Object.getOwnPropertyNames($))X[Z]=L2(h$($[Z],!1));return X}function k6($,X){return X===!0?$:L2($)}function h$($,X){return e6($)?k6(L0(),X):X$($)?k6(L0(),X):Y2($)?L2(p2(sM($))):k0($)?e1():D1($)?t1():P8($)?k6(M8(rM($)),X):$$($)?k6(q0([],$0()),X):b8($)?a1():Z$($)?s1():W$($)?r1():N1($)?d0():d2($)?Q8($):C0($)?Q8($):O8($)?Q8($):M8({})}function p$($,X={}){return C(h$($,!0),X)}function m$($,X={}){return p2(x8($.parameters),{...X})}function $6($,X){return $.map((Z)=>k2(Z,X))}function aM($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=k2($[Q],X);return Z}function eM($,X){return $.parameters=$6($.parameters,X),$.returns=k2($.returns,X),$}function $B($,X){return $.parameters=$6($.parameters,X),$.returns=k2($.returns,X),$}function XB($,X){return $.allOf=$6($.allOf,X),$}function ZB($,X){return $.anyOf=$6($.anyOf,X),$}function QB($,X){if(b8($.items))return $;return $.items=$6($.items,X),$}function WB($,X){return $.items=k2($.items,X),$}function YB($,X){return $.properties=aM($.properties,X),$}function JB($,X){return $.item=k2($.item,X),$}function zB($,X){return $.items=k2($.items,X),$}function MB($,X){return $.items=k2($.items,X),$}function BB($,X){let Z=X.find((W)=>W.$id===$.$ref);if(Z===void 0)throw Error(`Unable to dereference schema with \$id ${$.$ref}`);let Q=k8(Z,["$id"]);return k2(Q,X)}function GB($,X){return F1($)?eM($,X):S1($)?$B($,X):T8($)?XB($,X):Z8($)?ZB($,X):v2($)?QB($,X):w0($)?WB($,X):d8($)?YB($,X):f0($)?JB($,X):_1($)?zB($,X):K1($)?MB($,X):M$($)?BB($,X):$}function k2($,X){return GB(C($),x8(X))}function u$($,X={}){if(b8($))throw new Error("Enum undefined or empty");let Z=globalThis.Object.getOwnPropertyNames($).filter((Y)=>isNaN(Y)).map((Y)=>$[Y]),W=[...new Set(Z)].map((Y)=>Q8(Y));return z8(W,{...X,[A2]:"Enum"})}function xQ($,X){return m0(v0($),X)}function UB($,X){let Z=$.filter((Q)=>R0(Q,X)===P.False);return Z.length===1?Z[0]:z8(Z)}function m0($,X,Z={}){if(D2($))return C(xQ($,X),Z);if(F8($))return C(kQ($,X),Z);return C(Z8($)?UB($.anyOf,X):R0($,X)!==P.False?J8():$,Z)}function qB($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=m0($[Q],X);return Z}function wB($,X){return qB($.properties,X)}function kQ($,X){let Z=wB($,X);return a(Z)}function TQ($,X){return u0(v0($),X)}function HB($,X){let Z=$.filter((Q)=>R0(Q,X)!==P.False);return Z.length===1?Z[0]:z8(Z)}function u0($,X,Z={}){if(D2($))return C(TQ($,X),Z);if(F8($))return C(gQ($,X),Z);return C(Z8($)?HB($.anyOf,X):R0($,X)!==P.False?$:J8(),Z)}function AB($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=u0($[Q],X);return Z}function NB($,X){return AB($.properties,X)}function gQ($,X){let Z=NB($,X);return a(Z)}function c$($,X={}){return C($.returns,X)}function i$($={}){return{...$,[N]:"Integer",type:"integer"}}function DB($,X,Z){return{[$]:u2(Q8($),X,Z)}}function PB($,X,Z){return $.reduce((Q,W)=>{return{...Q,...DB(W,X,Z)}},{})}function OB($,X,Z){return PB($.keys,X,Z)}function fQ($,X,Z){let Q=OB($,X,Z);return a(Q)}function LB($){let[X,Z]=[$.slice(0,1),$.slice(1)];return[X.toLowerCase(),Z].join("")}function _B($){let[X,Z]=[$.slice(0,1),$.slice(1)];return[X.toUpperCase(),Z].join("")}function FB($){return $.toUpperCase()}function SB($){return $.toLowerCase()}function KB($,X,Z){let Q=Y1($.pattern);if(!y0(Q))return{...$,pattern:yQ($.pattern,X)};let J=[...V1(Q)].map((q)=>Q8(q)),z=dQ(J,X),B=z8(z);return I1([B],Z)}function yQ($,X){return typeof $==="string"?X==="Uncapitalize"?LB($):X==="Capitalize"?_B($):X==="Uppercase"?FB($):X==="Lowercase"?SB($):$:$.toString()}function dQ($,X){return $.map((Z)=>u2(Z,X))}function u2($,X,Z={}){return N2($)?fQ($,X,Z):D2($)?KB($,X,$):Z8($)?z8(dQ($.anyOf,X),Z):H0($)?Q8(yQ($.const,X),Z):$}function l$($,X={}){return u2($,"Capitalize",X)}function o$($,X={}){return u2($,"Lowercase",X)}function n$($,X={}){return u2($,"Uncapitalize",X)}function t$($,X={}){return u2($,"Uppercase",X)}function s$($,X){return{...X,[N]:"Not",not:C($)}}function CB($,X,Z){let Q={};for(let W of globalThis.Object.getOwnPropertyNames($))Q[W]=c0($[W],X,Z);return Q}function jB($,X,Z){return CB($.properties,X,Z)}function vQ($,X,Z){let Q=jB($,X,Z);return a(Q)}function bB($,X){return $.map((Z)=>r$(Z,X))}function RB($,X){return $.map((Z)=>r$(Z,X))}function VB($,X){let{[X]:Z,...Q}=$;return Q}function EB($,X){return X.reduce((Z,Q)=>VB(Z,Q),$)}function r$($,X){return T8($)?X2(bB($.allOf,X)):Z8($)?z8(RB($.anyOf,X)):d8($)?M8(EB($.properties,X)):M8({})}function c0($,X,Z={}){if(N2(X))return hQ($,X,Z);if(F8($))return vQ($,X,Z);let Q=P2(X)?z2(X):X,W=k8($,[K8,"$id","required"]),Y=C(r$($,Q),Z);return{...W,...Y}}function IB($,X,Z){return{[X]:c0($,[X],Z)}}function xB($,X,Z){return X.reduce((Q,W)=>{return{...Q,...IB($,W,Z)}},{})}function kB($,X,Z){return xB($,X.keys,Z)}function hQ($,X,Z){let Q=kB($,X,Z);return a(Q)}function a$($,X={}){return p2(x8($.parameters),{...X})}function pQ($){return $.map((X)=>mQ(X))}function TB($){let X={};for(let Z of globalThis.Object.getOwnPropertyNames($))X[Z]=$2($[Z]);return X}function mQ($){return T8($)?X2(pQ($.allOf)):Z8($)?z8(pQ($.anyOf)):d8($)?M8(TB($.properties)):M8({})}function X6($,X={}){if(F8($))return uQ($,X);let Z=k8($,[K8,"$id","required"]),Q=C(mQ($),X);return{...Z,...Q}}function gB($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=X6($[Q],X);return Z}function fB($,X){return gB($.properties,X)}function uQ($,X){let Z=fB($,X);return a(Z)}function yB($,X,Z){let Q={};for(let W of globalThis.Object.getOwnPropertyNames($))Q[W]=i0($[W],X,Z);return Q}function dB($,X,Z){return yB($.properties,X,Z)}function cQ($,X,Z){let Q=dB($,X,Z);return a(Q)}function vB($,X){return $.map((Z)=>e$(Z,X))}function hB($,X){return $.map((Z)=>e$(Z,X))}function pB($,X){let Z={};for(let Q of X)if(Q in $)Z[Q]=$[Q];return Z}function e$($,X){return T8($)?X2(vB($.allOf,X)):Z8($)?z8(hB($.anyOf,X)):d8($)?M8(pB($.properties,X)):M8({})}function i0($,X,Z={}){if(N2(X))return iQ($,X,Z);if(F8($))return cQ($,X,Z);let Q=P2(X)?z2(X):X,W=k8($,[K8,"$id","required"]),Y=C(e$($,Q),Z);return{...W,...Y}}function mB($,X,Z){return{[X]:i0($,[X],Z)}}function uB($,X,Z){return X.reduce((Q,W)=>{return{...Q,...mB($,W,Z)}},{})}function cB($,X,Z){return uB($,X.keys,Z)}function iQ($,X,Z){let Q=cB($,X,Z);return a(Q)}function $X($){return L2($2($))}function Z6($,X,Z){return{...Z,[N]:"Record",type:"object",patternProperties:{[$]:C(X)}}}function XX($,X,Z){let Q={};for(let W of $)Q[W]=C(X);return M8(Q,{...Z,[A2]:"Record"})}function iB($,X,Z){return L6($)?XX(z2($),X,Z):Z6($.pattern,X,Z)}function lB($,X,Z){return XX(z2(z8($)),X,Z)}function oB($,X,Z){return XX([$.toString()],X,Z)}function nB($,X,Z){return Z6($.source,X,Z)}function tB($,X,Z){let Q=b8($.pattern)?j0:$.pattern;return Z6(Q,X,Z)}function sB($,X,Z){return Z6(N0,X,Z)}function rB($,X,Z){return Z6(N0,X,Z)}function ZX($,X,Z={}){return Z8($)?lB($.anyOf,X,Z):D2($)?iB($,X,Z):H0($)?oB($.const,X,Z):T0($)?sB($,X,Z):g0($)?rB($,X,Z):B$($)?nB($,X,Z):C1($)?tB($,X,Z):J8(Z)}var aB=0;function QX($,X={}){if(b8(X.$id))X.$id=`T${aB++}`;let Z=$({[N]:"This",$ref:`${X.$id}`});return Z.$id=X.$id,C({...X,[A2]:"Recursive",...Z})}function WX($,X={}){if(O8($))return{...X,[N]:"Ref",$ref:$};if(b8($.$id))throw new Error("Reference target type must specify an $id");return{...X,[N]:"Ref",$ref:$.$id}}function YX($,X={}){let Z=O8($)?new globalThis.RegExp($):$;return{...X,[N]:"RegExp",type:"RegExp",source:Z.source,flags:Z.flags}}function lQ($){return $.map((X)=>oQ(X))}function eB($){let X={};for(let Z of globalThis.Object.getOwnPropertyNames($))X[Z]=k8($[Z],[t8]);return X}function oQ($){return T8($)?X2(lQ($.allOf)):Z8($)?z8(lQ($.anyOf)):d8($)?M8(eB($.properties)):M8({})}function Q6($,X={}){if(F8($))return nQ($,X);else{let Z=k8($,[K8,"$id","required"]),Q=C(oQ($),X);return{...Z,...Q}}}function $G($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=Q6($[Q],X);return Z}function XG($,X){return $G($.properties,X)}function nQ($,X){let Z=XG($,X);return a(Z)}function ZG($){return T8($)?x8($.allOf):Z8($)?x8($.anyOf):v2($)?x8($.items??[]):[]}function JX($){return x8(ZG($))}function zX($,X={}){return C($.returns,X)}function MX($){return JSON.parse(JSON.stringify($))}class tQ{constructor($){this.schema=$}Decode($){return new sQ(this.schema,$)}}class sQ{constructor($,X){this.schema=$,this.decode=X}EncodeTransform($,X){let W={Encode:(Y)=>X[K8].Encode($(Y)),Decode:(Y)=>this.decode(X[K8].Decode(Y))};return{...X,[K8]:W}}EncodeSchema($,X){let Z={Decode:this.decode,Encode:$};return{...X,[K8]:Z}}Encode($){let X=C(this.schema);return Q1(X)?this.EncodeTransform($,X):this.EncodeSchema($,X)}}function BX($){return new tQ($)}function GX($={}){return{...$,[N]:"Void",type:"void"}}var UX={};x0(UX,{Void:()=>GX,Uppercase:()=>t$,Unsafe:()=>A1,Unknown:()=>$0,Union:()=>z8,Undefined:()=>a1,Uncapitalize:()=>n$,Uint8Array:()=>e1,Tuple:()=>p2,Transform:()=>BX,TemplateLiteral:()=>I1,Symbol:()=>r1,String:()=>O2,Strict:()=>MX,ReturnType:()=>zX,Rest:()=>JX,Required:()=>Q6,RegExp:()=>YX,Ref:()=>WX,Recursive:()=>QX,Record:()=>ZX,ReadonlyOptional:()=>$X,Readonly:()=>L2,Promise:()=>T1,Pick:()=>i0,Partial:()=>X6,Parameters:()=>a$,Optional:()=>$2,Omit:()=>c0,Object:()=>M8,Number:()=>h2,Null:()=>s1,Not:()=>s$,Never:()=>J8,Mapped:()=>H$,Lowercase:()=>o$,Literal:()=>Q8,KeyOf:()=>f1,Iterator:()=>k1,Intersect:()=>X2,Integer:()=>i$,InstanceType:()=>c$,Index:()=>h0,Function:()=>q0,Extract:()=>u0,Extends:()=>p0,Exclude:()=>m0,Enum:()=>u$,Deref:()=>k2,Date:()=>t1,ConstructorParameters:()=>m$,Constructor:()=>L1,Const:()=>p$,Composite:()=>v$,Capitalize:()=>l$,Boolean:()=>E1,BigInt:()=>d0,Awaited:()=>d$,AsyncIterator:()=>O1,Array:()=>P1,Any:()=>L0});var G1=UX;class AX{constructor($,X,Z,Q){this.schema=$,this.references=X,this.checkFunc=Z,this.code=Q,this.hasTransform=n1($,X)}Code(){return this.code}Errors($){return y1(this.schema,this.references,$)}Check($){return this.checkFunc($)}Decode($){if(!this.checkFunc($))throw new l1(this.schema,$,this.Errors($).First());return this.hasTransform?I6(this.schema,this.references,$):$}Encode($){let X=this.hasTransform?x6(this.schema,this.references,$):$;if(!this.checkFunc(X))throw new o1(this.schema,$,this.Errors($).First());return X}}var _0;(function($){function X(Y){return Y===36}$.DollarSign=X;function Z(Y){return Y===95}$.IsUnderscore=Z;function Q(Y){return Y>=65&&Y<=90||Y>=97&&Y<=122}$.IsAlpha=Q;function W(Y){return Y>=48&&Y<=57}$.IsNumeric=W})(_0||(_0={}));var T6;(function($){function X(Y){if(Y.length===0)return!1;return _0.IsNumeric(Y.charCodeAt(0))}function Z(Y){if(X(Y))return!1;for(let J=0;J<Y.length;J++){let z=Y.charCodeAt(J);if(!(_0.IsAlpha(z)||_0.IsNumeric(z)||_0.DollarSign(z)||_0.IsUnderscore(z)))return!1}return!0}function Q(Y){return Y.replace(/'/g,"\\'")}function W(Y,J){return Z(J)?`${Y}.${J}`:`${Y}['${Q(J)}']`}$.Encode=W})(T6||(T6={}));var qX;(function($){function X(Z){let Q=[];for(let W=0;W<Z.length;W++){let Y=Z.charCodeAt(W);if(_0.IsNumeric(Y)||_0.IsAlpha(Y))Q.push(Z.charAt(W));else Q.push(`_${Y}_`)}return Q.join("").replace(/__/g,"_")}$.Encode=X})(qX||(qX={}));var wX;(function($){function X(Z){return Z.replace(/'/g,"\\'")}$.Escape=X})(wX||(wX={}));class rQ extends v{constructor($){super("Unknown type");this.schema=$}}class HX extends v{constructor($){super("Preflight validation check failed to guard for the given schema");this.schema=$}}var l0;(function($){function X(J,z,B){return I8.ExactOptionalPropertyTypes?`('${z}' in ${J} ? ${B} : true)`:`(${T6.Encode(J,z)} !== undefined ? ${B} : true)`}$.IsExactOptionalProperty=X;function Z(J){return!I8.AllowArrayObject?`(typeof ${J} === 'object' && ${J} !== null && !Array.isArray(${J}))`:`(typeof ${J} === 'object' && ${J} !== null)`}$.IsObjectLike=Z;function Q(J){return!I8.AllowArrayObject?`(typeof ${J} === 'object' && ${J} !== null && !Array.isArray(${J}) && !(${J} instanceof Date) && !(${J} instanceof Uint8Array))`:`(typeof ${J} === 'object' && ${J} !== null && !(${J} instanceof Date) && !(${J} instanceof Uint8Array))`}$.IsRecordLike=Q;function W(J){return I8.AllowNaN?`typeof ${J} === 'number'`:`Number.isFinite(${J})`}$.IsNumberLike=W;function Y(J){return I8.AllowNullVoid?`(${J} === undefined || ${J} === null)`:`${J} === undefined`}$.IsVoidLike=Y})(l0||(l0={}));var F0;(function($){function X(U){return U[N]==="Any"||U[N]==="Unknown"}function*Z(U,E,H){yield"true"}function*Q(U,E,H){yield`Array.isArray(${H})`;let[h,I]=[c8("value","any"),c8("acc","number")];if(g(U.maxItems))yield`${H}.length <= ${U.maxItems}`;if(g(U.minItems))yield`${H}.length >= ${U.minItems}`;let k=L(U.items,E,"value");if(yield`${H}.every((${h}) => ${k})`,p(U.contains)||g(U.minContains)||g(U.maxContains)){let _8=p(U.contains)?U.contains:J8(),Q2=L(_8,E,"value"),G0=g(U.minContains)?[`(count >= ${U.minContains})`]:[],y2=g(U.maxContains)?[`(count <= ${U.maxContains})`]:[],n2=`const count = value.reduce((${I}, ${h}) => ${Q2} ? acc + 1 : acc, 0)`,q6=["(count > 0)",...G0,...y2].join(" && ");yield`((${h}) => { ${n2}; return ${q6}})(${H})`}if(U.uniqueItems===!0)yield`((${h}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${H})`}function*W(U,E,H){yield`(typeof value === 'object' && Symbol.asyncIterator in ${H})`}function*Y(U,E,H){if(yield`(typeof ${H} === 'bigint')`,l8(U.exclusiveMaximum))yield`${H} < BigInt(${U.exclusiveMaximum})`;if(l8(U.exclusiveMinimum))yield`${H} > BigInt(${U.exclusiveMinimum})`;if(l8(U.maximum))yield`${H} <= BigInt(${U.maximum})`;if(l8(U.minimum))yield`${H} >= BigInt(${U.minimum})`;if(l8(U.multipleOf))yield`(${H} % BigInt(${U.multipleOf})) === 0`}function*J(U,E,H){yield`(typeof ${H} === 'boolean')`}function*z(U,E,H){yield*B0(U.returns,E,`${H}.prototype`)}function*B(U,E,H){if(yield`(${H} instanceof Date) && Number.isFinite(${H}.getTime())`,g(U.exclusiveMaximumTimestamp))yield`${H}.getTime() < ${U.exclusiveMaximumTimestamp}`;if(g(U.exclusiveMinimumTimestamp))yield`${H}.getTime() > ${U.exclusiveMinimumTimestamp}`;if(g(U.maximumTimestamp))yield`${H}.getTime() <= ${U.maximumTimestamp}`;if(g(U.minimumTimestamp))yield`${H}.getTime() >= ${U.minimumTimestamp}`;if(g(U.multipleOfTimestamp))yield`(${H}.getTime() % ${U.multipleOfTimestamp}) === 0`}function*q(U,E,H){yield`(typeof ${H} === 'function')`}function*G(U,E,H){if(yield`Number.isInteger(${H})`,g(U.exclusiveMaximum))yield`${H} < ${U.exclusiveMaximum}`;if(g(U.exclusiveMinimum))yield`${H} > ${U.exclusiveMinimum}`;if(g(U.maximum))yield`${H} <= ${U.maximum}`;if(g(U.minimum))yield`${H} >= ${U.minimum}`;if(g(U.multipleOf))yield`(${H} % ${U.multipleOf}) === 0`}function*A(U,E,H){let h=U.allOf.map((I)=>L(I,E,H)).join(" && ");if(U.unevaluatedProperties===!1){let I=T(`${new RegExp(D0(U))};`),k=`Object.getOwnPropertyNames(${H}).every(key => ${I}.test(key))`;yield`(${h} && ${k})`}else if(p(U.unevaluatedProperties)){let I=T(`${new RegExp(D0(U))};`),k=`Object.getOwnPropertyNames(${H}).every(key => ${I}.test(key) || ${L(U.unevaluatedProperties,E,`${H}[key]`)})`;yield`(${h} && ${k})`}else yield`(${h})`}function*O(U,E,H){yield`(typeof value === 'object' && Symbol.iterator in ${H})`}function*M(U,E,H){if(typeof U.const==="number"||typeof U.const==="boolean")yield`(${H} === ${U.const})`;else yield`(${H} === '${wX.Escape(U.const)}')`}function*F(U,E,H){yield"false"}function*S(U,E,H){yield`(!${L(U.not,E,H)})`}function*_(U,E,H){yield`(${H} === null)`}function*b(U,E,H){if(yield l0.IsNumberLike(H),g(U.exclusiveMaximum))yield`${H} < ${U.exclusiveMaximum}`;if(g(U.exclusiveMinimum))yield`${H} > ${U.exclusiveMinimum}`;if(g(U.maximum))yield`${H} <= ${U.maximum}`;if(g(U.minimum))yield`${H} >= ${U.minimum}`;if(g(U.multipleOf))yield`(${H} % ${U.multipleOf}) === 0`}function*x(U,E,H){if(yield l0.IsObjectLike(H),g(U.minProperties))yield`Object.getOwnPropertyNames(${H}).length >= ${U.minProperties}`;if(g(U.maxProperties))yield`Object.getOwnPropertyNames(${H}).length <= ${U.maxProperties}`;let h=Object.getOwnPropertyNames(U.properties);for(let I of h){let k=T6.Encode(H,I),_8=U.properties[I];if(U.required&&U.required.includes(I)){if(yield*B0(_8,E,k),P0(_8)||X(_8))yield`('${I}' in ${H})`}else{let Q2=L(_8,E,k);yield l0.IsExactOptionalProperty(H,I,Q2)}}if(U.additionalProperties===!1)if(U.required&&U.required.length===h.length)yield`Object.getOwnPropertyNames(${H}).length === ${h.length}`;else{let I=`[${h.map((k)=>`'${k}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${H}).every(key => ${I}.includes(key))`}if(typeof U.additionalProperties==="object"){let I=L(U.additionalProperties,E,`${H}[key]`),k=`[${h.map((_8)=>`'${_8}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${H}).every(key => ${k}.includes(key) || ${I}))`}}function*V(U,E,H){yield`(typeof value === 'object' && typeof ${H}.then === 'function')`}function*r(U,E,H){if(yield l0.IsRecordLike(H),g(U.minProperties))yield`Object.getOwnPropertyNames(${H}).length >= ${U.minProperties}`;if(g(U.maxProperties))yield`Object.getOwnPropertyNames(${H}).length <= ${U.maxProperties}`;let[h,I]=Object.entries(U.patternProperties)[0],k=T(`${new RegExp(h)}`),_8=L(I,E,"value"),Q2=p(U.additionalProperties)?L(U.additionalProperties,E,H):U.additionalProperties===!1?"false":"true",G0=`(${k}.test(key) ? ${_8} : ${Q2})`;yield`(Object.entries(${H}).every(([key, value]) => ${G0}))`}function*u(U,E,H){let h=$8(U,E);if(K.functions.has(U.$ref))return yield`${R(U.$ref)}(${H})`;yield*B0(h,E,H)}function*S8(U,E,H){let h=T(`${new RegExp(U.source,U.flags)};`);if(yield`(typeof ${H} === 'string')`,g(U.maxLength))yield`${H}.length <= ${U.maxLength}`;if(g(U.minLength))yield`${H}.length >= ${U.minLength}`;yield`${h}.test(${H})`}function*N8(U,E,H){if(yield`(typeof ${H} === 'string')`,g(U.maxLength))yield`${H}.length <= ${U.maxLength}`;if(g(U.minLength))yield`${H}.length >= ${U.minLength}`;if(U.pattern!==void 0)yield`${T(`${new RegExp(U.pattern)};`)}.test(${H})`;if(U.format!==void 0)yield`format('${U.format}', ${H})`}function*q8(U,E,H){yield`(typeof ${H} === 'symbol')`}function*Y8(U,E,H){yield`(typeof ${H} === 'string')`,yield`${T(`${new RegExp(U.pattern)};`)}.test(${H})`}function*t(U,E,H){yield`${R(U.$ref)}(${H})`}function*E8(U,E,H){if(yield`Array.isArray(${H})`,U.items===void 0)return yield`${H}.length === 0`;yield`(${H}.length === ${U.maxItems})`;for(let h=0;h<U.items.length;h++)yield`${L(U.items[h],E,`${H}[${h}]`)}`}function*q2(U,E,H){yield`${H} === undefined`}function*I0(U,E,H){yield`(${U.anyOf.map((I)=>L(I,E,H)).join(" || ")})`}function*o6(U,E,H){if(yield`${H} instanceof Uint8Array`,g(U.maxByteLength))yield`(${H}.length <= ${U.maxByteLength})`;if(g(U.minByteLength))yield`(${H}.length >= ${U.minByteLength})`}function*a0(U,E,H){yield"true"}function*Z2(U,E,H){yield l0.IsVoidLike(H)}function*n6(U,E,H){let h=K.instances.size;K.instances.set(h,U),yield`kind('${U[N]}', ${h}, ${H})`}function*B0(U,E,H,h=!0){let I=c(U.$id)?[...E,U]:E,k=U;if(h&&c(U.$id)){let _8=R(U.$id);if(K.functions.has(_8))return yield`${_8}(${H})`;else{let Q2=y(_8,U,E,"value",!1);return K.functions.set(_8,Q2),yield`${_8}(${H})`}}switch(k[N]){case"Any":return yield*Z(k,I,H);case"Array":return yield*Q(k,I,H);case"AsyncIterator":return yield*W(k,I,H);case"BigInt":return yield*Y(k,I,H);case"Boolean":return yield*J(k,I,H);case"Constructor":return yield*z(k,I,H);case"Date":return yield*B(k,I,H);case"Function":return yield*q(k,I,H);case"Integer":return yield*G(k,I,H);case"Intersect":return yield*A(k,I,H);case"Iterator":return yield*O(k,I,H);case"Literal":return yield*M(k,I,H);case"Never":return yield*F(k,I,H);case"Not":return yield*S(k,I,H);case"Null":return yield*_(k,I,H);case"Number":return yield*b(k,I,H);case"Object":return yield*x(k,I,H);case"Promise":return yield*V(k,I,H);case"Record":return yield*r(k,I,H);case"Ref":return yield*u(k,I,H);case"RegExp":return yield*S8(k,I,H);case"String":return yield*N8(k,I,H);case"Symbol":return yield*q8(k,I,H);case"TemplateLiteral":return yield*Y8(k,I,H);case"This":return yield*t(k,I,H);case"Tuple":return yield*E8(k,I,H);case"Undefined":return yield*q2(k,I,H);case"Union":return yield*I0(k,I,H);case"Uint8Array":return yield*o6(k,I,H);case"Unknown":return yield*a0(k,I,H);case"Void":return yield*Z2(k,I,H);default:if(!j8.Has(k[N]))throw new rQ(U);return yield*n6(k,I,H)}}let K={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function L(U,E,H,h=!0){return`(${[...B0(U,E,H,h)].join(" && ")})`}function R(U){return`check_${qX.Encode(U)}`}function T(U){let E=`local_${K.variables.size}`;return K.variables.set(E,`const ${E} = ${U}`),E}function y(U,E,H,h,I=!0){let[k,_8]=["\n",(n2)=>"".padStart(n2," ")],Q2=c8("value","any"),G0=l("boolean"),y2=[...B0(E,H,h,I)].map((n2)=>`${_8(4)}${n2}`).join(` &&${k}`);return`function ${U}(${Q2})${G0} {${k}${_8(2)}return (${k}${y2}${k}${_8(2)})\n}`}function c8(U,E){let H=K.language==="typescript"?`: ${E}`:"";return`${U}${H}`}function l(U){return K.language==="typescript"?`: ${U}`:""}function f2(U,E,H){let h=y("check",U,E,"value"),I=c8("value","any"),k=l("boolean"),_8=[...K.functions.values()],Q2=[...K.variables.values()],G0=c(U.$id)?`return function check(${I})${k} {\n  return ${R(U.$id)}(value)\n}`:`return ${h}`;return[...Q2,..._8,G0].join("\n")}function y8(...U){let E={language:"javascript"},[H,h,I]=U.length===2&&d(U[1])?[U[0],U[1],E]:U.length===2&&!d(U[1])?[U[0],[],U[1]]:U.length===3?[U[0],U[1],U[2]]:U.length===1?[U[0],[],E]:[null,[],E];if(K.language=I.language,K.variables.clear(),K.functions.clear(),K.instances.clear(),!p(H))throw new HX(H);for(let k of h)if(!p(k))throw new HX(k);return f2(H,h,I)}$.Code=y8;function j2(U,E=[]){let H=y8(U,E,{language:"javascript"}),h=globalThis.Function("kind","format","hash",H),I=new Map(K.instances);function k(y2,n2,q6){if(!j8.Has(y2)||!I.has(n2))return!1;let YY=j8.Get(y2),JY=I.get(n2);return YY(JY,q6)}function _8(y2,n2){if(!w8.Has(y2))return!1;return w8.Get(y2)(n2)}function Q2(y2){return b0(y2)}let G0=h(k,_8,Q2);return new AX(U,E,G0,H)}$.Compile=j2})(F0||(F0={}));var gW=H1(NX(),1),fW=H1(NX(),1),yW=H1(g6(),1);var r0=H1(g6(),1),oW=H1(g6(),1);var U1=($,X)=>{let Z=X?.length?{}:null;if(Z)for(let Q of X)Z[Q.part.charCodeAt(0)]=Q;return{part:$,store:null,inert:Z,params:null,wildcardStore:null}},WW=($,X)=>({...$,part:X}),YW=($)=>({name:$,store:null,inert:null}),PX=class ${root={};history=[];static regex={static:/:.+?(?=\/|$)/,params:/:.+?(?=\/|$)/g,optionalParams:/:.+?\?(?=\/|$)/g};add(X,Z,Q,{ignoreError:W=!1,ignoreHistory:Y=!1}={}){if(typeof Z!=="string")throw new TypeError("Route path must be a string");if(Z==="")Z="/";else if(Z[0]!=="/")Z=`/${Z}`;let J=Z[Z.length-1]==="*",z=Z.match($.regex.optionalParams);if(z){let O=Z.replaceAll("?","");this.add(X,O,Q,{ignoreError:W});for(let M=0;M<z.length;M++){let F=Z.replace("/"+z[M],"");this.add(X,F,Q,{ignoreError:!0})}return Q}if(z)Z=Z.replaceAll("?","");if(this.history.find(([O,M,F])=>O===X&&M===Z))return Q;if(J||z&&Z.charCodeAt(Z.length-1)===63)Z=Z.slice(0,-1);if(!Y)this.history.push([X,Z,Q]);let B=Z.split($.regex.static),q=Z.match($.regex.params)||[];if(B[B.length-1]==="")B.pop();let G;if(!this.root[X])G=this.root[X]=U1("/");else G=this.root[X];let A=0;for(let O=0;O<B.length;++O){let M=B[O];if(O>0){let F=q[A++].slice(1);if(G.params===null)G.params=YW(F);else if(G.params.name!==F)if(W)return Q;else throw new Error(`Cannot create route "${Z}" with parameter "${F}" because a route already exists with a different parameter name ("${G.params.name}") in the same location`);let S=G.params;if(S.inert===null){G=S.inert=U1(M);continue}G=S.inert}for(let F=0;;){if(F===M.length){if(F<G.part.length){let S=WW(G,G.part.slice(F));Object.assign(G,U1(M,[S]))}break}if(F===G.part.length){if(G.inert===null)G.inert={};let S=G.inert[M.charCodeAt(F)];if(S){G=S,M=M.slice(F),F=0;continue}let _=U1(M.slice(F));G.inert[M.charCodeAt(F)]=_,G=_;break}if(M[F]!==G.part[F]){let S=WW(G,G.part.slice(F)),_=U1(M.slice(F));Object.assign(G,U1(G.part.slice(0,F),[S,_])),G=_;break}++F}}if(A<q.length){let M=q[A].slice(1);if(G.params===null)G.params=YW(M);else if(G.params.name!==M)if(W)return Q;else throw new Error(`Cannot create route "${Z}" with parameter "${M}" because a route already exists with a different parameter name ("${G.params.name}") in the same location`);if(G.params.store===null)G.params.store=Q;return G.params.store}if(J){if(G.wildcardStore===null)G.wildcardStore=Q;return G.wildcardStore}if(G.store===null)G.store=Q;return G.store}find(X,Z){let Q=this.root[X];if(!Q)return null;return KX(Z,Z.length,Q,0)}},KX=($,X,Z,Q)=>{let W=Z.part,Y=W.length,J=Q+Y;if(Y>1){if(J>X)return null;if(Y<15){for(let z=1,B=Q+1;z<Y;++z,++B)if(W.charCodeAt(z)!==$.charCodeAt(B))return null}else if($.slice(Q,J)!==W)return null}if(J===X){if(Z.store!==null)return{store:Z.store,params:{}};if(Z.wildcardStore!==null)return{store:Z.wildcardStore,params:{"*":""}};return null}if(Z.inert!==null){let z=Z.inert[$.charCodeAt(J)];if(z!==void 0){let B=KX($,X,z,J);if(B!==null)return B}}if(Z.params!==null){let{store:z,name:B,inert:q}=Z.params,G=$.indexOf("/",J);if(G!==J){if(G===-1||G>=X){if(z!==null){let A={};return A[B]=$.substring(J,X),{store:z,params:A}}}else if(q!==null){let A=KX($,X,q,G);if(A!==null)return A.params[B]=$.substring(J,G),A}}}if(Z.wildcardStore!==null)return{store:Z.wildcardStore,params:{"*":$.substring(J,X)}};return null},J6=($)=>{let X=typeof $==="object"?$.fn.toString():typeof $==="string"?$.toString():$,Z=X.indexOf(")");if(X.charCodeAt(Z+2)===61&&X.charCodeAt(Z+5)!==123)return!0;return X.includes("return")},OG=($)=>{if($.startsWith("async"))$=$.slice(5);$=$.trimStart();let X=-1;if($.charCodeAt(0)===40){if(X=$.indexOf("=>",$.indexOf(")")),X!==-1){let W=X;while(W>0)if($.charCodeAt(--W)===41)break;let Y=$.slice(X+2);if(Y.charCodeAt(0)===32)Y=Y.trimStart();return[$.slice(1,W),Y,{isArrowReturn:Y.charCodeAt(0)!==123}]}}if($.startsWith("function")){X=$.indexOf("(");let W=$.indexOf(")");return[$.slice(X+1,W),$.slice(W+2),{isArrowReturn:!1}]}let Z=$.indexOf("(");if(Z!==-1){let W=$.indexOf("\n",2),Y=$.slice(0,W),J=Y.lastIndexOf(")")+1,z=$.slice(W+1);return[Y.slice(Z,J),"{"+z,{isArrowReturn:!1}]}let Q=$.split("\n",2);return[Q[0],Q[1],{isArrowReturn:!1}]},LG=($)=>{let X=$.indexOf("{");if(X===-1)return[-1,0];let Z=X+1,Q=1;for(;Z<$.length;Z++){let W=$.charCodeAt(Z);if(W===123)Q++;else if(W===125)Q--;if(Q===0)break}if(Q!==0)return[0,$.length];return[X,Z+1]},_G=($)=>{let X=$.lastIndexOf("}");if(X===-1)return[-1,0];let Z=X-1,Q=1;for(;Z>=0;Z--){let W=$.charCodeAt(Z);if(W===125)Q++;else if(W===123)Q--;if(Q===0)break}if(Q!==0)return[-1,0];return[Z,X+1]},bW=($)=>{while(!0){let X=$.indexOf(":");if(X===-1)break;let Z=$.indexOf(",",X);if(Z===-1)Z=$.indexOf("}",X)-1;if(Z===-2)Z=$.length;$=$.slice(0,X)+$.slice(Z)}return $},RW=($)=>{let X=!1;if($.charCodeAt(0)===40)$=$.slice(1,-1);if($.charCodeAt(0)===123)X=!0,$=$.slice(1,-1);$=$.replace(/( |\t|\n)/g,"").trim();let Z=[];while(!0){let[W,Y]=LG($);if(W===-1)break;if(Z.push($.slice(0,W-1)),$.charCodeAt(Y)===44)Y++;$=$.slice(Y)}if($=bW($),$)Z=Z.concat($.split(","));let Q=[];for(let W of Z){if(W.indexOf(",")===-1){Q.push(W);continue}for(let Y of W.split(","))Q.push(Y.trim())}return Z=Q,{hasParenthesis:X,parameters:Z}},FG=($,X)=>{let{parameters:Z,hasParenthesis:Q}=RW($);if(!X.query&&Z.includes("query"))X.query=!0;if(!X.headers&&Z.includes("headers"))X.headers=!0;if(!X.body&&Z.includes("body"))X.body=!0;if(!X.cookie&&Z.includes("cookie"))X.cookie=!0;if(!X.set&&Z.includes("set"))X.set=!0;if(!X.server&&Z.includes("server"))X.server=!0;if(Q)return`{ ${Z.join(", ")} }`;return Z.join(", ")},SG=($,X,Z)=>{let Q=X.indexOf($+"\n",Z),W=X.indexOf($+"	",Z),Y=X.indexOf($+",",Z),J=X.indexOf($+";",Z),z=X.indexOf($+" ",Z);return[Q,W,Y,J,z].filter((B)=>B>0).sort((B,q)=>B-q)[0]||-1},VW=($,X,Z=0)=>{if(Z>5)return[];let Q=[],W=X;while(!0){let Y=SG(" = "+$,W);if(Y===-1){let B=W.indexOf(" = "+$);if(B+3+$.length!==W.length)break;Y=B}let J=W.slice(0,Y),z=J.slice(J.lastIndexOf(" ")+1);if(z==="}"){let[B,q]=_G(J);Q.push(bW(W.slice(B,q))),W=W.slice(Y+3+$.length);continue}while(z.charCodeAt(0)===44)z=z.slice(1);while(z.charCodeAt(0)===9)z=z.slice(1);if(!z.includes("("))Q.push(z);W=W.slice(Y+3+$.length)}for(let Y of Q){if(Y.charCodeAt(0)===123)continue;let J=VW(Y,X);if(J.length>0)Q.push(...J)}return Q},KG=($)=>{if(!$)return;if($.charCodeAt(0)!==123)return $;if($=$.slice(2,-2),!$.includes(",")){if($.includes("..."))return $.slice($.indexOf("...")+3);return}let Z=$.indexOf("...");if(Z===-1)return;return $.slice(Z+3).trimEnd()},CG=($,X,Z)=>{let Q=(W,Y)=>$.includes(Y+"."+W)||$.includes(Y+'["'+W+'"]')||$.includes(Y+"['"+W+"']");for(let W of X){if(!W)continue;if(W.charCodeAt(0)===123){let Y=RW(W).parameters;if(!Z.query&&Y.includes("query"))Z.query=!0;if(!Z.headers&&Y.includes("headers"))Z.headers=!0;if(!Z.body&&Y.includes("body"))Z.body=!0;if(!Z.cookie&&Y.includes("cookie"))Z.cookie=!0;if(!Z.set&&Y.includes("set"))Z.set=!0;if(!Z.query&&Y.includes("server"))Z.server=!0;continue}if(!Z.query&&Q("query",W))Z.query=!0;if($.includes("return "+W)||$.includes("return "+W+".query"))Z.query=!0;if(!Z.headers&&Q("headers",W))Z.headers=!0;if(!Z.body&&Q("body",W))Z.body=!0;if(!Z.cookie&&Q("cookie",W))Z.cookie=!0;if(!Z.set&&Q("set",W))Z.set=!0;if(!Z.server&&Q("server",W))Z.server=!0;if(Z.query&&Z.headers&&Z.body&&Z.cookie&&Z.set&&Z.server)break}return X},jG=($,X,Z)=>{try{let Q=new RegExp(`(?:\\w)\\((?:.*)?${$}`,"gs");Q.test(X);let W=X.charCodeAt(Q.lastIndex);if(W===41||W===44)return Z.query=!0,Z.headers=!0,Z.body=!0,Z.cookie=!0,Z.set=!0,Z.server=!0,!0;return!1}catch(Q){return console.log("[Sucrose] warning: unexpected isContextPassToFunction error, you may continue development as usual but please report the following to maintainers:"),console.log("--- body ---"),console.log(X),console.log("--- context ---"),console.log($),!0}},EW=($,X={query:!1,headers:!1,body:!1,cookie:!1,set:!1,server:!1})=>{let Z=[];if($.handler&&typeof $.handler==="function")Z.push($.handler);if($.request?.length)Z.push(...$.request);if($.beforeHandle?.length)Z.push(...$.beforeHandle);if($.parse?.length)Z.push(...$.parse);if($.error?.length)Z.push(...$.error);if($.transform?.length)Z.push(...$.transform);if($.afterHandle?.length)Z.push(...$.afterHandle);if($.mapResponse?.length)Z.push(...$.mapResponse);if($.afterResponse?.length)Z.push(...$.afterResponse);for(let Q of Z){if(!Q)continue;let W="fn"in Q?Q.fn:Q,[Y,J,{isArrowReturn:z}]=OG(W.toString()),B=FG(Y,X),q=KG(B);if(q){let G=VW(q,J);if(G.splice(0,-1,q),!jG(q,J,X))CG(J,G,X);if(!X.query&&J.includes("return "+q+".query"))X.query=!0}if(X.query&&X.headers&&X.body&&X.cookie&&X.set&&X.server)break}return X},VX={date:IW,time:CX(!0),"date-time":JW(!0),"iso-time":CX(!1),"iso-date-time":JW(!1),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:TG,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:pG,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:gG,int32:{type:"number",validate:dG},int64:{type:"number",validate:vG},float:{type:"number",validate:MW},double:{type:"number",validate:MW},password:!0,binary:!0};function bG($){return $%4===0&&($%100!==0||$%400===0)}var RG=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,VG=[0,31,28,31,30,31,30,31,31,30,31,30,31];function IW($){let X=RG.exec($);if(!X)return!1;let Z=+X[1],Q=+X[2],W=+X[3];return Q>=1&&Q<=12&&W>=1&&W<=(Q===2&&bG(Z)?29:VG[Q])}var EG=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function CX($){return function X(Z){let Q=EG.exec(Z);if(!Q)return!1;let W=+Q[1],Y=+Q[2],J=+Q[3],z=Q[4],B=Q[5]==="-"?-1:1,q=+(Q[6]||0),G=+(Q[7]||0);if(q>23||G>59||$&&!z)return!1;if(W<=23&&Y<=59&&J<60)return!0;let A=Y-G*B,O=W-q*B-(A<0?1:0);return(O===23||O===-1)&&(A===59||A===-1)&&J<61}}var IG=/t|\s/i;function JW($){let X=CX($);return function Z(Q){let W=Q.split(IG);return W.length===2&&IW(W[0])&&X(W[1])}}var xG=/\/|:/,kG=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function TG($){return xG.test($)&&kG.test($)}var zW=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function gG($){return zW.lastIndex=0,zW.test($)}var fG=-2147483648,yG=2147483647;function dG($){return Number.isInteger($)&&$<=yG&&$>=fG}function vG($){return Number.isInteger($)}function MW(){return!0}var hG=/[^\\]\\Z/;function pG($){if(hG.test($))return!1;try{return new RegExp($),!0}catch(X){return!1}}var xW=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,kW=/(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s\d{2}\s\d{4}\s\d{2}:\d{2}:\d{2}\sGMT(?:\+|-)\d{4}\s\([^)]+\)/,TW=/^(?:(?:(?:(?:0?[1-9]|[12][0-9]|3[01])[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:19|20)\d{2})|(?:(?:19|20)\d{2}[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:0?[1-9]|[12][0-9]|3[01]))))(?:\s(?:1[012]|0?[1-9]):[0-5][0-9](?::[0-5][0-9])?(?:\s[AP]M)?)?$/,mG=VX.date,uG=VX["date-time"];if(!w8.Has("date"))r2.Format("date",($)=>{let X=$.replace(/"/g,"");if(xW.test(X)||kW.test(X)||TW.test(X)||mG(X)){let Z=new Date(X);if(!Number.isNaN(Z.getTime()))return!0}return!1});if(!w8.Has("date-time"))r2.Format("date-time",($)=>{let X=$.replace(/"/g,"");if(xW.test(X)||kW.test(X)||TW.test(X)||uG(X)){let Z=new Date(X);if(!Number.isNaN(Z.getTime()))return!0}return!1});Object.entries(VX).forEach(($)=>{let[X,Z]=$;if(!w8.Has(X)){if(Z instanceof RegExp)r2.Format(X,(Q)=>Z.test(Q));else if(typeof Z==="function")r2.Format(X,Z)}});var f=Object.assign({},G1),BW=($)=>{if(typeof $==="string")switch($.slice(-1)){case"k":return+$.slice(0,$.length-1)*1024;case"m":return+$.slice(0,$.length-1)*1048576;default:return+$}return $},jX=($,X)=>{if(!(X instanceof Blob))return!1;if($.minSize&&X.size<BW($.minSize))return!1;if($.maxSize&&X.size>BW($.maxSize))return!1;if($.extension)if(typeof $.extension==="string"){if(!X.type.startsWith($.extension))return!1}else{for(let Z=0;Z<$.extension.length;Z++)if(X.type.startsWith($.extension[Z]))return!0;return!1}return!0},cG=j8.Get("Files")??r2.Type("File",jX),iG=j8.Get("Files")??r2.Type("Files",($,X)=>{if(!Array.isArray(X))return jX($,X);if($.minItems&&X.length<$.minItems)return!1;if($.maxItems&&X.length>$.maxItems)return!1;for(let Z=0;Z<X.length;Z++)if(!jX($,X[Z]))return!1;return!0});if(!w8.Has("numeric"))w8.Set("numeric",($)=>!!$&&!isNaN(+$));if(!w8.Has("boolean"))w8.Set("boolean",($)=>$==="true"||$==="false");if(!w8.Has("ObjectString"))w8.Set("ObjectString",($)=>{let X=$.charCodeAt(0);if(X===9||X===10||X===32)X=$.trimStart().charCodeAt(0);if(X!==123&&X!==91)return!1;try{return JSON.parse($),!0}catch{return!1}});if(!w8.Has("ArrayString"))w8.Set("ArrayString",($)=>{let X=$.charCodeAt(0);if(X===9||X===10||X===32)X=$.trimStart().charCodeAt(0);if(X!==123&&X!==91)return!1;try{return JSON.parse($),!0}catch{return!1}});j8.Set("UnionEnum",($,X)=>{return(typeof X==="number"||typeof X==="string"||X===null)&&$.enum.includes(X)});var o2={Numeric:($)=>{let X=G1.Number($);return f.Transform(f.Union([f.String({format:"numeric",default:0}),f.Number($)],$)).Decode((Z)=>{let Q=+Z;if(isNaN(Q))return Z;if($&&!m.Check(X,Q))throw new A8("property",X,Q);return Q}).Encode((Z)=>Z)},Date:($)=>{let X=G1.Date($);return f.Transform(f.Union([G1.Date($),f.String({format:"date",default:new Date().toISOString()}),f.String({format:"date-time",default:new Date().toISOString()})],$)).Decode((Z)=>{if(Z instanceof Date)return Z;let Q=new Date(Z);if(!m.Check(X,Q))throw new A8("property",X,Q);return Q}).Encode((Z)=>{if(typeof Z==="string")return new Date(Z);return Z})},BooleanString:($)=>{let X=G1.Boolean($);return f.Transform(f.Union([f.String({format:"boolean",default:!1}),f.Boolean($)],$)).Decode((Z)=>{if(typeof Z==="string")return Z==="true";if($&&!m.Check(X,Z))throw new A8("property",X,Z);return Z}).Encode((Z)=>Z)},ObjectString:($,X)=>{let Z=f.Object($,X),Q=JSON.stringify(m.Create(Z)),W;try{W=F0.Compile(Z)}catch{}return f.Transform(f.Union([f.String({format:"ObjectString",default:Q}),Z])).Decode((Y)=>{if(typeof Y==="string"){if(Y.charCodeAt(0)!==123)throw new A8("property",Z,Y);try{Y=JSON.parse(Y)}catch{throw new A8("property",Z,Y)}if(W){if(!W.Check(Y))throw new A8("property",Z,Y);return W.Decode(Y)}if(!m.Check(Z,Y))throw new A8("property",Z,Y);return m.Decode(Z,Y)}return Y}).Encode((Y)=>{if(typeof Y==="string")try{Y=JSON.parse(Y)}catch{throw new A8("property",Z,Y)}if(!m.Check(Z,Y))throw new A8("property",Z,Y);return JSON.stringify(Y)})},ArrayString:($={},X)=>{let Z=f.Array($,X),Q=JSON.stringify(m.Create(Z)),W;try{W=F0.Compile(Z)}catch{}return f.Transform(f.Union([f.String({format:"ArrayString",default:Q}),Z])).Decode((Y)=>{if(typeof Y==="string"){if(Y.charCodeAt(0)!==91)throw new A8("property",Z,Y);try{Y=JSON.parse(Y)}catch{throw new A8("property",Z,Y)}if(W){if(!W.Check(Y))throw new A8("property",Z,Y);return W.Decode(Y)}if(!m.Check(Z,Y))throw new A8("property",Z,Y);return m.Decode(Z,Y)}return Y}).Encode((Y)=>{if(typeof Y==="string")try{Y=JSON.parse(Y)}catch{throw new A8("property",Z,Y)}if(!m.Check(Z,Y))throw new A8("property",Z,Y);return JSON.stringify(Y)})},File:cG,Files:($={})=>f.Transform(iG($)).Decode((X)=>{if(Array.isArray(X))return X;return[X]}).Encode((X)=>X),Nullable:($)=>f.Union([$,f.Null()]),MaybeEmpty:($)=>f.Union([$,f.Null(),f.Undefined()]),Cookie:($,{domain:X,expires:Z,httpOnly:Q,maxAge:W,path:Y,priority:J,sameSite:z,secure:B,secrets:q,sign:G,...A}={})=>{let O=f.Object($,A);return O.config={domain:X,expires:Z,httpOnly:Q,maxAge:W,path:Y,priority:J,sameSite:z,secure:B,secrets:q,sign:G},O},UnionEnum:($,X={})=>{let Z=$.every((Q)=>typeof Q==="string")?{type:"string"}:$.every((Q)=>typeof Q==="number")?{type:"number"}:$.every((Q)=>Q===null)?{type:"null"}:{};if($.some((Q)=>typeof Q==="object"&&Q!==null))throw new Error("This type does not support objects or arrays");return{default:$[0],...X,[N]:"UnionEnum",...Z,enum:$}}};f.BooleanString=o2.BooleanString;f.ObjectString=o2.ObjectString;f.ArrayString=o2.ArrayString;f.Numeric=o2.Numeric;f.File=($={})=>o2.File({default:"File",...$,extension:$?.type,type:"string",format:"binary"});f.Files=($={})=>o2.Files({...$,elysiaMeta:"Files",default:"Files",extension:$?.type,type:"array",items:{...$,default:"Files",type:"string",format:"binary"}});f.Nullable=($)=>o2.Nullable($);f.MaybeEmpty=o2.MaybeEmpty;f.Cookie=o2.Cookie;f.Date=o2.Date;f.UnionEnum=o2.UnionEnum;var w1=class{constructor($,X,Z={}){this.name=$,this.jar=X,this.initial=Z}get cookie(){return this.jar[this.name]??this.initial}set cookie($){if(!(this.name in this.jar))this.jar[this.name]=this.initial;this.jar[this.name]=$}get setCookie(){if(!(this.name in this.jar))this.jar[this.name]=this.initial;return this.jar[this.name]}set setCookie($){this.cookie=$}get value(){return this.cookie.value}set value($){this.setCookie.value=$}get expires(){return this.cookie.expires}set expires($){this.setCookie.expires=$}get maxAge(){return this.cookie.maxAge}set maxAge($){this.setCookie.maxAge=$}get domain(){return this.cookie.domain}set domain($){this.setCookie.domain=$}get path(){return this.cookie.path}set path($){this.setCookie.path=$}get secure(){return this.cookie.secure}set secure($){this.setCookie.secure=$}get httpOnly(){return this.cookie.httpOnly}set httpOnly($){this.setCookie.httpOnly=$}get sameSite(){return this.cookie.sameSite}set sameSite($){this.setCookie.sameSite=$}get priority(){return this.cookie.priority}set priority($){this.setCookie.priority=$}get partitioned(){return this.cookie.partitioned}set partitioned($){this.setCookie.partitioned=$}get secrets(){return this.cookie.secrets}set secrets($){this.setCookie.secrets=$}update($){return this.setCookie=Object.assign(this.cookie,typeof $==="function"?$(this.cookie):$),this}set($){return this.setCookie=Object.assign({...this.initial,value:this.value},typeof $==="function"?$(this.cookie):$),this}remove(){if(this.value===void 0)return;return this.set({expires:new Date(0),maxAge:0,value:""}),this}toString(){return typeof this.value==="object"?JSON.stringify(this.value):this.value?.toString()??""}},GW=($,X,Z)=>{if(!$.cookie)$.cookie={};return new Proxy(X,{get(Q,W){if(W in X)return new w1(W,$.cookie,Object.assign({},Z??{},X[W]));return new w1(W,$.cookie,Object.assign({},Z))}})},dW=async($,X,{secrets:Z,sign:Q,...W}={})=>{if(!X)return GW($,{},W);let Y=typeof Z==="string";if(Q&&Q!==!0&&!Array.isArray(Q))Q=[Q];let J={},z=fW.parse(X);for(let[B,q]of Object.entries(z)){let G=yW.default(q);if(Q===!0||Q?.includes(B)){if(!Z)throw new Error("No secret is provided to cookie plugin");if(Y){let A=await PW(G,Z);if(A===!1)throw new FW(B);G=A}else{let A=!0;for(let O=0;O<Z.length;O++){let M=await PW(G,Z[O]);if(M!==!1){A=!0,G=M;break}}if(!A)throw new FW(B)}}J[B]={value:G}}return GW($,J,W)},vW="toJSON"in new Headers,l2=($)=>{if(!$)return!1;for(let X in $)return!0;return!1},z6=($,X)=>{let Z=$.size;if(!X&&Z||Z&&X&&X.status!==206&&X.status!==304&&X.status!==412&&X.status!==416){if(X&&l2(X.headers)){if(X.headers instanceof Headers){if(vW)X.headers=X.headers.toJSON();else for(let[Q,W]of X.headers.entries())if(Q in X.headers)X.headers[Q]=W}return new Response($,{status:X.status,headers:Object.assign({"accept-ranges":"bytes","content-range":`bytes 0-${Z-1}/${Z}`},X.headers)})}return new Response($,{headers:{"accept-ranges":"bytes","content-range":`bytes 0-${Z-1}/${Z}`,"transfer-encoding":"chunked"}})}return new Response($)},hW=($,X)=>{if(!$)return $;$.delete("set-cookie");for(let Z=0;Z<X.length;Z++){let Q=X[Z].indexOf("=");$.append("set-cookie",`${X[Z].slice(0,Q)}=${X[Z].slice(Q+1)||""}`)}return $},pW=($)=>{if(!$||!l2($))return;let X=[];for(let[Z,Q]of Object.entries($)){if(!Z||!Q)continue;let W=Q.value;if(W===void 0||W===null)continue;X.push(gW.serialize(Z,typeof W==="object"?JSON.stringify(W):W+"",Q))}if(X.length===0)return;if(X.length===1)return X[0];return X},J0=async($,X,Z)=>{let Q=$.next();if(Q instanceof Promise)Q=await Q;if(Q.done){if(X)return V8(Q.value,X,Z);return K0(Q.value,Z)}return new Response(new ReadableStream({async start(W){let Y=!1;if(Z?.signal.addEventListener("abort",()=>{Y=!0;try{W.close()}catch{}}),Q.value!==void 0&&Q.value!==null)if(typeof Q.value==="object")try{W.enqueue(Buffer.from(JSON.stringify(Q.value)))}catch{W.enqueue(Buffer.from(Q.value.toString()))}else W.enqueue(Buffer.from(Q.value.toString()));for await(let J of $){if(Y)break;if(J===void 0||J===null)continue;if(typeof J==="object")try{W.enqueue(Buffer.from(JSON.stringify(J)))}catch{W.enqueue(Buffer.from(J.toString()))}else W.enqueue(Buffer.from(J.toString()));await new Promise((z)=>setTimeout(()=>z(),0))}try{W.close()}catch{}}}),{...X,headers:{"transfer-encoding":"chunked","content-type":"text/event-stream; charset=utf-8",...X?.headers}})};async function*M6($){let X=$.body;if(!X)return;let Z=X.getReader(),Q=new TextDecoder;try{while(!0){let{done:W,value:Y}=await Z.read();if(W)break;yield Q.decode(Y)}}finally{Z.releaseLock()}}var V8=($,X,Z)=>{if(l2(X.headers)||X.status!==200||X.redirect||X.cookie){if(typeof X.status==="string")X.status=B6[X.status];if(X.redirect){if(X.headers.Location=X.redirect,!X.status||X.status<300||X.status>=400)X.status=302}if(X.cookie&&l2(X.cookie)){let Q=pW(X.cookie);if(Q)X.headers["set-cookie"]=Q}if(X.headers["set-cookie"]&&Array.isArray(X.headers["set-cookie"]))X.headers=hW(new Headers(X.headers),X.headers["set-cookie"]);switch($?.constructor?.name){case"String":return new Response($,X);case"Blob":return z6($,X);case"Array":return Response.json($,X);case"Object":return Response.json($,X);case"ElysiaCustomStatusResponse":return X.status=$.code,V8($.response,X,Z);case"ReadableStream":if(!X.headers["content-type"]?.startsWith("text/event-stream"))X.headers["content-type"]="text/event-stream; charset=utf-8";return Z?.signal.addEventListener("abort",{handleEvent(){if(!Z?.signal.aborted)$.cancel(Z)}},{once:!0}),new Response($,X);case void 0:if(!$)return new Response("",X);return Response.json($,X);case"Response":let Q=!1;if(X.headers instanceof Headers)for(let W of X.headers.keys())if(W==="set-cookie"){if(Q)continue;Q=!0;for(let Y of X.headers.getSetCookie())$.headers.append("set-cookie",Y)}else $.headers.append(W,X.headers?.get(W)??"");else for(let W in X.headers)$.headers.append(W,X.headers[W]);if($.status!==X.status)X.status=$.status;if($.headers.get("transfer-encoding")==="chunked")return J0(M6($),X,Z);return $;case"Error":return z0($,X);case"Promise":return $.then((W)=>V8(W,X));case"Function":return V8($(),X);case"Number":case"Boolean":return new Response($.toString(),X);case"Cookie":if($ instanceof w1)return new Response($.value,X);return new Response($?.toString(),X);case"FormData":return new Response($,X);default:if($ instanceof Response){let W=!1;if(X.headers instanceof Headers)for(let Y of X.headers.keys())if(Y==="set-cookie"){if(W)continue;W=!0;for(let J of X.headers.getSetCookie())$.headers.append("set-cookie",J)}else $.headers.append(Y,X.headers?.get(Y)??"");else for(let Y in X.headers)$.headers.append(Y,X.headers[Y]);if(vW)X.headers=$.headers.toJSON();else for(let[Y,J]of $.headers.entries())if(Y in X.headers)X.headers[Y]=J;return $}if($ instanceof Promise)return $.then((W)=>V8(W,X));if($ instanceof Error)return z0($,X);if($ instanceof M0)return X.status=$.code,V8($.response,X,Z);if(typeof $?.next==="function")return J0($,X,Z);if(typeof $?.then==="function")return $.then((W)=>V8(W,X));if(typeof $?.toResponse==="function")return V8($.toResponse(),X);if("charCodeAt"in $){let W=$.charCodeAt(0);if(W===123||W===91){if(!X.headers["Content-Type"])X.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),X)}}return new Response($,X)}}else switch($?.constructor?.name){case"String":return new Response($);case"Blob":return z6($,X);case"Array":return Response.json($);case"Object":return Response.json($,X);case"ElysiaCustomStatusResponse":return X.status=$.code,V8($.response,X,Z);case"ReadableStream":return Z?.signal.addEventListener("abort",{handleEvent(){if(!Z?.signal.aborted)$.cancel(Z)}},{once:!0}),new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":if($.headers.get("transfer-encoding")==="chunked")return J0(M6($),X,Z);return $;case"Error":return z0($,X);case"Promise":return $.then((Q)=>{let W=K0(Q,Z);if(W!==void 0)return W;return new Response("")});case"Function":return K0($(),Z);case"Number":case"Boolean":return new Response($.toString());case"Cookie":if($ instanceof w1)return new Response($.value,X);return new Response($?.toString(),X);case"FormData":return new Response($,X);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((Q)=>V8(Q,X));if($ instanceof Error)return z0($,X);if($ instanceof M0)return X.status=$.code,V8($.response,X,Z);if(typeof $?.next==="function")return J0($,X,Z);if(typeof $?.then==="function")return $.then((Q)=>V8(Q,X));if(typeof $?.toResponse==="function")return V8($.toResponse(),X);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91){if(!X.headers["Content-Type"])X.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),X)}}return new Response($)}},u8=($,X,Z)=>{if($===void 0||$===null)return;if(l2(X.headers)||X.status!==200||X.redirect||X.cookie){if(typeof X.status==="string")X.status=B6[X.status];if(X.redirect){if(X.headers.Location=X.redirect,!X.status||X.status<300||X.status>=400)X.status=302}if(X.cookie&&l2(X.cookie)){let Q=pW(X.cookie);if(Q)X.headers["set-cookie"]=Q}if(X.headers["set-cookie"]&&Array.isArray(X.headers["set-cookie"]))X.headers=hW(new Headers(X.headers),X.headers["set-cookie"]);switch($?.constructor?.name){case"String":return new Response($,X);case"Blob":return z6($,X);case"Array":return Response.json($,X);case"Object":return Response.json($,X);case"ElysiaCustomStatusResponse":return X.status=$.code,u8($.response,X,Z);case"ReadableStream":if(!X.headers["content-type"]?.startsWith("text/event-stream"))X.headers["content-type"]="text/event-stream; charset=utf-8";return Z?.signal.addEventListener("abort",{handleEvent(){if(!Z?.signal.aborted)$.cancel(Z)}},{once:!0}),new Response($,X);case void 0:if(!$)return;return Response.json($,X);case"Response":let Q=!1;if(X.headers instanceof Headers)for(let W of X.headers.keys())if(W==="set-cookie"){if(Q)continue;Q=!0;for(let Y of X.headers.getSetCookie())$.headers.append("set-cookie",Y)}else $.headers.append(W,X.headers?.get(W)??"");else for(let W in X.headers)$.headers.append(W,X.headers[W]);if($.status!==X.status)X.status=$.status;if($.headers.get("transfer-encoding")==="chunked")return J0(M6($),X,Z);return $;case"Promise":return $.then((W)=>{let Y=u8(W,X);if(Y!==void 0)return Y});case"Error":return z0($,X);case"Function":return u8($(),X);case"Number":case"Boolean":return new Response($.toString(),X);case"FormData":return new Response($);case"Cookie":if($ instanceof w1)return new Response($.value,X);return new Response($?.toString(),X);default:if($ instanceof Response){let W=!1;if(X.headers instanceof Headers)for(let Y of X.headers.keys())if(Y==="set-cookie"){if(W)continue;W=!0;for(let J of X.headers.getSetCookie())$.headers.append("set-cookie",J)}else $.headers.append(Y,X.headers?.get(Y)??"");else for(let Y in X.headers)$.headers.append(Y,X.headers[Y]);if($.status!==X.status)X.status=$.status;return $}if($ instanceof Promise)return $.then((W)=>u8(W,X));if($ instanceof Error)return z0($,X);if($ instanceof M0)return X.status=$.code,u8($.response,X,Z);if(typeof $?.next==="function")return J0($,X,Z);if(typeof $?.then==="function")return $.then((W)=>u8(W,X));if(typeof $?.toResponse==="function")return u8($.toResponse(),X);if("charCodeAt"in $){let W=$.charCodeAt(0);if(W===123||W===91){if(!X.headers["Content-Type"])X.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),X)}}return new Response($,X)}}else switch($?.constructor?.name){case"String":return new Response($);case"Blob":return z6($,X);case"Array":return Response.json($);case"Object":return Response.json($,X);case"ElysiaCustomStatusResponse":return X.status=$.code,u8($.response,X,Z);case"ReadableStream":return Z?.signal.addEventListener("abort",{handleEvent(){if(!Z?.signal.aborted)$.cancel(Z)}},{once:!0}),new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":if($.headers.get("transfer-encoding")==="chunked")return J0(M6($));return $;case"Promise":return $.then((Q)=>{let W=u8(Q,X);if(W!==void 0)return W});case"Error":return z0($,X);case"Function":return K0($(),Z);case"Number":case"Boolean":return new Response($.toString());case"Cookie":if($ instanceof w1)return new Response($.value,X);return new Response($?.toString(),X);case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((Q)=>u8(Q,X));if($ instanceof Error)return z0($,X);if($ instanceof M0)return X.status=$.code,u8($.response,X,Z);if(typeof $?.next==="function")return J0($,X,Z);if(typeof $?.then==="function")return $.then((Q)=>u8(Q,X));if(typeof $?.toResponse==="function")return u8($.toResponse(),X);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91){if(!X.headers["Content-Type"])X.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),X)}}return new Response($)}},K0=($,X)=>{switch($?.constructor?.name){case"String":return new Response($);case"Blob":return z6($);case"Array":return Response.json($);case"Object":return Response.json($);case"ElysiaCustomStatusResponse":return V8($.response,{status:$.code,headers:{}});case"ReadableStream":return X?.signal.addEventListener("abort",{handleEvent(){if(!X?.signal.aborted)$.cancel(X)}},{once:!0}),new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":if($.headers.get("transfer-encoding")==="chunked")return J0(M6($));return $;case"Error":return z0($);case"Promise":return $.then((Z)=>K0(Z,X));case"Function":return K0($(),X);case"Number":case"Boolean":return new Response($.toString());case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((Z)=>K0(Z,X));if($ instanceof Error)return z0($);if($ instanceof M0)return V8($.response,{status:$.code,headers:{}});if(typeof $?.next==="function")return J0($,void 0,X);if(typeof $?.then==="function")return $.then((Z)=>V8(Z,set));if(typeof $?.toResponse==="function")return K0($.toResponse());if("charCodeAt"in $){let Z=$.charCodeAt(0);if(Z===123||Z===91)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}})}return new Response($)}},z0=($,X)=>new Response(JSON.stringify({name:$?.name,message:$?.message,cause:$?.cause}),{status:X?.status!==200?X?.status??500:500,headers:X?.headers}),lG=($,X,Z={})=>{if(typeof $==="function")return;let Q=V8($,{headers:Z});if(X.parse.length===0&&X.transform.length===0&&X.beforeHandle.length===0&&X.afterHandle.length===0)return Q.clone.bind(Q)},oG=($,X,Z={})=>{if(typeof $==="function"||$ instanceof Blob)return;let Q=V8($,{headers:Z});if(X.parse.length===0&&X.transform.length===0&&X.beforeHandle.length===0&&X.afterHandle.length===0){if(!Q.headers.has("content-type"))Q.headers.append("content-type","text/plain;charset=utf-8");return Q.clone.bind(Q)}},f6=($,X)=>{let Z=new URL($);return Z.pathname=X,Z.toString()},nG=($)=>typeof $==="function"&&/^\s*class\s+/.test($.toString())||$.toString().startsWith("[object ")&&$.toString()!=="[object Object]"||l2(Object.getPrototypeOf($)),OX=($)=>$&&typeof $==="object"&&!Array.isArray($),U2=($,X,{skipKeys:Z,override:Q=!0}={})=>{if(!OX($)||!OX(X))return $;for(let[W,Y]of Object.entries(X)){if(Z?.includes(W))continue;if(!OX(Y)||!(W in $)||nG(Y)){if(Q||!(W in $))$[W]=Y;continue}$[W]=U2($[W],Y,{skipKeys:Z,override:Q})}return $},tG=($,X)=>{let{properties:Z,...Q}=$??{},{properties:W,...Y}=X??{};return U2(Q,Y)},h8=($=[],X=[])=>{if(!$)return[];if(!X)return $;let Z=[],Q=[];if(!Array.isArray($))$=[$];if(!Array.isArray(X))X=[X];for(let W of $)if(Z.push(W),W.checksum)Q.push(W.checksum);for(let W of X)if(!Q.includes(W.checksum))Z.push(W);return Z},sG=["start","request","parse","transform","resolve","beforeHandle","afterHandle","mapResponse","afterResponse","trace","error","stop","body","headers","params","query","response","type","detail"],rG=sG.reduce(($,X)=>($[X]=!0,$),{}),mW=($,X)=>{let Z=(Q)=>typeof Q==="object"&&Object.keys(Q).every(bX);if(Z($)&&Z(X))return{...$,...X};else if($&&!Z($)&&Z(X))return{200:$,...X};return X??$},W6=($,X)=>{return{body:X?.body??$?.body,headers:X?.headers??$?.headers,params:X?.params??$?.params,query:X?.query??$?.query,cookie:X?.cookie??$?.cookie,response:mW($?.response,X?.response)}},T2=($,X)=>{return{...$,...X,body:X?.body??$?.body,headers:X?.headers??$?.headers,params:X?.params??$?.params,query:X?.query??$?.query,cookie:X?.cookie??$?.cookie,response:mW($?.response,X?.response),type:$?.type||X?.type,detail:U2(X?.detail??{},$?.detail??{}),parse:h8($?.parse,X?.parse),transform:h8($?.transform,X?.transform),beforeHandle:h8($?.beforeHandle,X?.beforeHandle),afterHandle:h8($?.afterHandle,X?.afterHandle),mapResponse:h8($?.mapResponse,X?.mapResponse),afterResponse:h8($?.afterResponse,X?.afterResponse),trace:h8($?.trace,X?.trace),error:h8($?.error,X?.error)}},UW=($,X,Z=!0)=>{if(!Array.isArray(X))return e8($,X,Z);for(let Q of X)$=e8($,Q,Z);return $},e8=($,X,Z=!0)=>{if(!$)return $;if(X.untilObjectFound&&!Z&&$.type==="object")return $;let Q=X.from[N];if($.oneOf){for(let J=0;J<$.oneOf.length;J++)$.oneOf[J]=e8($.oneOf[J],X,Z);return $}if($.anyOf){for(let J=0;J<$.anyOf.length;J++)$.anyOf[J]=e8($.anyOf[J],X,Z);return $}if($.allOf){for(let J=0;J<$.allOf.length;J++)$.allOf[J]=e8($.allOf[J],X,Z);return $}if($.not){for(let J=0;J<$.not.length;J++)$.not[J]=e8($.not[J],X,Z);return $}let W=Z&&!!X.excludeRoot;if($[N]===Q){let{anyOf:J,oneOf:z,allOf:B,not:q,properties:G,items:A,...O}=$,M=X.to(O),F,S=(_)=>{if(G&&_.type==="object"){let x={};for(let[V,r]of Object.entries(G))x[V]=e8(r,X,!1);return{...O,..._,properties:x}}if(A&&_.type==="array")return{...O,..._,items:e8(A,X,!1)};let b={...O,..._};if(delete b.required,G&&_.type==="string"&&_.format==="ObjectString"&&_.default==="{}")F=f.ObjectString(G,O),b.default=JSON.stringify(m.Create(f.Object(G))),b.properties=G;if(A&&_.type==="string"&&_.format==="ArrayString"&&_.default==="[]")F=f.ArrayString(A,O),b.default=JSON.stringify(m.Create(f.Array(A))),b.items=A;return b};if(W){if(G){let _={};for(let[b,x]of Object.entries(G))_[b]=e8(x,X,!1);return{...O,properties:_}}else if(A?.map)return{...O,items:A.map((_)=>e8(_,X,!1))};return O}if(M.anyOf)for(let _=0;_<M.anyOf.length;_++)M.anyOf[_]=S(M.anyOf[_]);else if(M.oneOf)for(let _=0;_<M.oneOf.length;_++)M.oneOf[_]=S(M.oneOf[_]);else if(M.allOf)for(let _=0;_<M.allOf.length;_++)M.allOf[_]=S(M.allOf[_]);else if(M.not)for(let _=0;_<M.not.length;_++)M.not[_]=S(M.not[_]);if(F)M[K8]=F[K8];if(M.anyOf||M.oneOf||M.allOf||M.not)return M;if(G){let _={};for(let[b,x]of Object.entries(G))_[b]=e8(x,X,!1);return{...O,...M,properties:_}}else if(A?.map)return{...O,...M,items:A.map((_)=>e8(_,X,!1))};return{...O,...M}}let Y=$?.properties;if(Y&&Z&&X.rootOnly!==!0)for(let[J,z]of Object.entries(Y))switch(z[N]){case Q:let{anyOf:B,oneOf:q,allOf:G,not:A,type:O,...M}=z,F=X.to(M);if(F.anyOf)for(let S=0;S<F.anyOf.length;S++)F.anyOf[S]={...M,...F.anyOf[S]};else if(F.oneOf)for(let S=0;S<F.oneOf.length;S++)F.oneOf[S]={...M,...F.oneOf[S]};else if(F.allOf)for(let S=0;S<F.allOf.length;S++)F.allOf[S]={...M,...F.allOf[S]};else if(F.not)for(let S=0;S<F.not.length;S++)F.not[S]={...M,...F.not[S]};Y[J]={...M,...e8(M,X,!1)};break;case"Object":case"Union":Y[J]=e8(z,X,!1);break;default:if(z.items)for(let S=0;S<z.items.length;S++)z.items[S]=e8(z.items[S],X,!1);else if(z.anyOf||z.oneOf||z.allOf||z.not)Y[J]=e8(z,X,!1);break}return $},G2=($,{models:X={},dynamic:Z=!1,normalize:Q=!1,additionalProperties:W=!1,coerce:Y=!1,additionalCoerce:J=[]}={})=>{if(!$)return;if(typeof $==="string"&&!($ in X))return;let z=typeof $==="string"?X[$]:$;if(Y||J)if(Y)z=UW(z,[{from:f.Number(),to:(G)=>f.Numeric(G),untilObjectFound:!0},{from:f.Boolean(),to:(G)=>f.BooleanString(G),untilObjectFound:!0},...Array.isArray(J)?J:[J]]);else z=UW(z,[...Array.isArray(J)?J:[J]]);if(z.type==="object"&&"additionalProperties"in z===!1)z.additionalProperties=W;let B=(G)=>m.Clean(z,G);if(Z){let G={schema:z,references:"",checkFunc:()=>{},code:"",Check:(A)=>m.Check(z,A),Errors:(A)=>m.Errors(z,A),Code:()=>"",Clean:B,Decode:(A)=>m.Decode(z,A),Encode:(A)=>m.Encode(z,A)};if(Q&&z.additionalProperties===!1)G.Clean=B;if(z.config){if(G.config=z.config,G?.schema?.config)delete G.schema.config}return G.parse=(A)=>{try{return G.Decode(A)}catch(O){throw[...G.Errors(A)].map(Y0)}},G.safeParse=(A)=>{try{return{success:!0,data:G.Decode(A),error:null}}catch(O){let M=[...q.Errors(A)].map(Y0);return{success:!1,data:null,error:M[0]?.summary,errors:M}}},G}let q=F0.Compile(z,Object.values(X));if(q.Clean=B,z.config){if(q.config=z.config,q?.schema?.config)delete q.schema.config}return q.parse=(G)=>{try{return q.Decode(G)}catch(A){throw[...q.Errors(G)].map(Y0)}},q.safeParse=(G)=>{try{return{success:!0,data:q.Decode(G),error:null}}catch(A){let O=[...q.Errors(G)].map(Y0);return{success:!1,data:null,error:O[0]?.summary,errors:O}}},q},qW=($,{models:X={},dynamic:Z=!1,normalize:Q=!1,additionalProperties:W=!1})=>{if(!$)return;if(typeof $==="string"&&!($ in X))return;let Y=typeof $==="string"?X[$]:$,J=(B,q)=>{let G=(O)=>{if(!O||typeof O!=="object")return m.Clean(B,O);if(Array.isArray(O))O=m.Clean(B,O);else O=m.Clean(B,O);return O};if(Z)return{schema:B,references:"",checkFunc:()=>{},code:"",Check:(O)=>m.Check(B,O),Errors:(O)=>m.Errors(B,O),Code:()=>"",Decode:(O)=>m.Decode(B,O),Encode:(O)=>m.Encode(B,O)};let A=F0.Compile(B,q);if(Q&&B.additionalProperties===!1)A.Clean=G;return A};if(N in Y){if("additionalProperties"in Y===!1)Y.additionalProperties=W;return{200:J(Y,Object.values(X))}}let z={};return Object.keys(Y).forEach((B)=>{let q=Y[+B];if(typeof q==="string"){if(q in X){let G=X[q];G.type==="object"&&"additionalProperties"in G,z[+B]=N in G?J(G,Object.values(X)):G}return}if(q.type==="object"&&"additionalProperties"in q===!1)q.additionalProperties=W;z[+B]=N in q?J(q,Object.values(X)):q}),z},aG=typeof Bun!=="undefined",eG=aG&&typeof Bun.hash==="function",Y6=($)=>{if(eG)return Bun.hash($);let X=9;for(let Z=0;Z<$.length;)X=Math.imul(X^$.charCodeAt(Z++),387420489);return X=X^X>>>9},LX,o0=()=>{if(!LX)LX=[{from:f.Object({}),to:()=>f.ObjectString({}),excludeRoot:!0},{from:f.Array(f.Any()),to:()=>f.ArrayString(f.Any())}];return LX},_X,wW=()=>{if(!_X)_X=[{from:f.Number(),to:($)=>f.Numeric($),rootOnly:!0},{from:f.Boolean(),to:($)=>f.BooleanString($),rootOnly:!0}];return _X},uW=({validator:$,defaultConfig:X={},config:Z,dynamic:Q,models:W})=>{let Y=G2($,{dynamic:Q,models:W,additionalProperties:!0,coerce:!0,additionalCoerce:o0()});if(l2(X))if(Y)Y.config=tG(Y.config,Z);else Y=G2(f.Cookie({}),{dynamic:Q,models:W,additionalProperties:!0}),Y.config=X;return Y},c2=($,X)=>{if(!X)return;if(!Array.isArray(X)){let Q=X;if($&&!Q.checksum)Q.checksum=$;if(Q.scope==="scoped")Q.scope="local";return Q}let Z=[...X];for(let Q of Z){if($&&!Q.checksum)Q.checksum=$;if(Q.scope==="scoped")Q.scope="local"}return Z},HW=($,X,Z)=>{return{start:h8($.start,c2(Z,X?.start)),request:h8($.request,c2(Z,X?.request)),parse:h8($.parse,c2(Z,X?.parse)),transform:h8($.transform,c2(Z,X?.transform)),beforeHandle:h8($.beforeHandle,c2(Z,X?.beforeHandle)),afterHandle:h8($.afterHandle,c2(Z,X?.afterHandle)),mapResponse:h8($.mapResponse,c2(Z,X?.mapResponse)),afterResponse:h8($.afterResponse,c2(Z,X?.afterResponse)),trace:h8($.trace,c2(Z,X?.trace)),error:h8($.error,c2(Z,X?.error)),stop:h8($.stop,c2(Z,X?.stop))}},$U=($,X,{skipIfHasType:Z=!1}={})=>{if(!$)return $;if(!Array.isArray($)){if(Z)$.scope??=X;else $.scope=X;return $}for(let Q of $)if(Z)Q.scope??=X;else Q.scope=X;return $},E0=($)=>{if(!$)return $;if(!Array.isArray($))switch($.scope){case"global":case"scoped":return{...$};default:return{fn:$}}let X=[];for(let Z of $)switch(Z.scope){case"global":case"scoped":X.push({...Z});break}return X},AW=($)=>{return{...$,type:$?.type,detail:$?.detail,parse:E0($?.parse),transform:E0($?.transform),beforeHandle:E0($?.beforeHandle),afterHandle:E0($?.afterHandle),mapResponse:E0($?.mapResponse),afterResponse:E0($?.afterResponse),error:E0($?.error),trace:E0($?.trace)}},B6={Continue:100,"Switching Protocols":101,Processing:102,"Early Hints":103,OK:200,Created:201,Accepted:202,"Non-Authoritative Information":203,"No Content":204,"Reset Content":205,"Partial Content":206,"Multi-Status":207,"Already Reported":208,"Multiple Choices":300,"Moved Permanently":301,Found:302,"See Other":303,"Not Modified":304,"Temporary Redirect":307,"Permanent Redirect":308,"Bad Request":400,Unauthorized:401,"Payment Required":402,Forbidden:403,"Not Found":404,"Method Not Allowed":405,"Not Acceptable":406,"Proxy Authentication Required":407,"Request Timeout":408,Conflict:409,Gone:410,"Length Required":411,"Precondition Failed":412,"Payload Too Large":413,"URI Too Long":414,"Unsupported Media Type":415,"Range Not Satisfiable":416,"Expectation Failed":417,"I'm a teapot":418,"Misdirected Request":421,"Unprocessable Content":422,Locked:423,"Failed Dependency":424,"Too Early":425,"Upgrade Required":426,"Precondition Required":428,"Too Many Requests":429,"Request Header Fields Too Large":431,"Unavailable For Legal Reasons":451,"Internal Server Error":500,"Not Implemented":501,"Bad Gateway":502,"Service Unavailable":503,"Gateway Timeout":504,"HTTP Version Not Supported":505,"Variant Also Negotiates":506,"Insufficient Storage":507,"Loop Detected":508,"Not Extended":510,"Network Authentication Required":511},NW=Object.fromEntries(Object.entries(B6).map(([$,X])=>[X,$]));function XU($){let X=$;while(X.endsWith("="))X=X.slice(0,-1);return X}var DW=new TextEncoder,v6=async($,X)=>{if(typeof $!=="string")throw new TypeError("Cookie value must be provided as a string.");if(X===null)throw new TypeError("Secret key must be provided.");let Z=await crypto.subtle.importKey("raw",DW.encode(X),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),Q=await crypto.subtle.sign("HMAC",Z,DW.encode($));return $+"."+XU(Buffer.from(Q).toString("base64"))},PW=async($,X)=>{if(typeof $!=="string")throw new TypeError("Signed cookie string must be provided.");if(X===null)throw new TypeError("Secret key must be provided.");let Z=$.slice(0,$.lastIndexOf("."));return await v6(Z,X)===$?Z:!1},ZU=($,X)=>{if(!$||typeof $!=="object"||!X)return;for(let[Z,Q]of Object.entries(X)){if(Z in rG||!(Z in $))continue;let W=$[Z];if(typeof W==="function")W(Q),delete X[Z]}},QU=({globalHook:$,localHook:X})=>(Z)=>(Q,W)=>{if(typeof Q==="function")Q={fn:Q};if("fn"in Q||Array.isArray(Q)){if(!X[Z])X[Z]=[];if(typeof X[Z]==="function")X[Z]=[X[Z]];if(Array.isArray(Q))X[Z]=X[Z].concat(Q);else X[Z].push(Q);return}let{insert:Y="after",stack:J="local"}=Q;if(typeof W==="function")W={fn:W};if(J==="global")if(!Array.isArray(W))if(Y==="before")$[Z].unshift(W);else $[Z].push(W);else if(Y==="before")$[Z]=W.concat($[Z]);else $[Z]=$[Z].concat(W);else{if(!X[Z])X[Z]=[];if(typeof X[Z]==="function")X[Z]=[X[Z]];if(!Array.isArray(W))if(Y==="before")X[Z].unshift(W);else X[Z].push(W);else if(Y==="before")X[Z]=W.concat(X[Z]);else X[Z]=X[Z].concat(W)}},WU=($)=>{if(typeof $==="number")return $;if($.length<16){if($.trim().length===0)return null;let X=Number($);if(Number.isNaN(X))return null;return X}if($.length===16){if($.trim().length===0)return null;let X=Number($);if(Number.isNaN(X)||X.toString()!==$)return null;return X}return null},bX=($)=>WU($)!==null,YU=class{constructor($=console.error){this.onError=$,this.root=null,this.promises=[]}get size(){return this.promises.length}add($){return this.promises.push($),this.root||=this.drain(),$}async drain(){while(this.promises.length>0){try{await this.promises[0]}catch($){this.onError($)}this.promises.shift()}this.root=null}then($,X){return(this.root??Promise.resolve()).then($,X)}},g2=($)=>{if(!$)return $;if(!Array.isArray($)){if(typeof $==="function")return{fn:$};else if("fn"in $)return $}let X=[];for(let Z of $)if(typeof Z==="function")X.push({fn:Z});else if("fn"in Z)X.push(Z);return X},JU=($)=>{return{...$,start:g2($?.start),request:g2($?.request),parse:g2($?.parse),transform:g2($?.transform),beforeHandle:g2($?.beforeHandle),afterHandle:g2($?.afterHandle),mapResponse:g2($?.mapResponse),afterResponse:g2($?.afterResponse),trace:g2($?.trace),error:g2($?.error),stop:g2($?.stop)}},OW=($)=>{return{...$,start:$.start?.map((X)=>X.fn),request:$.request?.map((X)=>X.fn),parse:$.parse?.map((X)=>X.fn),transform:$.transform?.map((X)=>X.fn),beforeHandle:$.beforeHandle?.map((X)=>X.fn),afterHandle:$.afterHandle?.map((X)=>X.fn),afterResponse:$.afterResponse?.map((X)=>X.fn),mapResponse:$.mapResponse?.map((X)=>X.fn),trace:$.trace?.map((X)=>X.fn),error:$.error?.map((X)=>X.fn),stop:$.stop?.map((X)=>X.fn)}},FX=($)=>({body:$.body,cookie:$.cookie,headers:$.headers,query:$.query,set:$.set,server:$.server}),cW=($,X=302)=>Response.redirect($,X),kV=Symbol("ElysiaFormData"),m6=Symbol("ElysiaRequestId");var iW=()=>crypto.getRandomValues(new Uint32Array(1))[0],LW=($)=>{let X=[];for(let Z=0;Z<$.length;Z++){let Q=$[Z];if(Q.checksum){if(X.includes(Q.checksum))$.splice(Z,1),Z--;X.push(Q.checksum)}}return $},a8=($,X="scoped")=>{if(X==="scoped"){for(let Z of $)if("scope"in Z&&Z.scope==="local")Z.scope="scoped";return}for(let Z of $)if("scope"in Z)Z.scope="global"},_W=typeof Bun!=="undefined"?Bun.env:typeof process!=="undefined"?process?.env:void 0,h6=Symbol("ElysiaErrorCode"),p6=(_W?.NODE_ENV??_W?.ENV)==="production",M0=class{constructor($,X){let Z=X??($ in NW?NW[$]:$);this.code=B6[$]??$,this.response=Z}},zU=($,X)=>new M0($,X),MU=class extends Error{constructor($){super($??"INTERNAL_SERVER_ERROR");this.code="INTERNAL_SERVER_ERROR",this.status=500}},EX=class extends Error{constructor($){super($??"NOT_FOUND");this.code="NOT_FOUND",this.status=404}},BU=class extends Error{constructor(){super("Failed to parse body");this.code="PARSE",this.status=400}},FW=class extends Error{constructor($,X){super(X??`"${$}" has invalid cookie signature`);this.key=$,this.code="INVALID_COOKIE_SIGNATURE",this.status=400}},Y0=($)=>{if(!$)return{summary:void 0};let{message:X,path:Z,value:Q,type:W}=$,Y=Z.slice(1).replaceAll("/","."),J=Z==="";switch(W){case 42:return{...$,summary:J?"Value should not be provided":`Property '${Y}' should not be provided`};case 45:return{...$,summary:J?"Value is missing":`Property '${Y}' is missing`};case 50:let z=X.indexOf("'"),B=X.slice(z+1,X.indexOf("'",z+1));return{...$,summary:J?"Value should be an email":`Property '${Y}' should be ${B}`};case 54:return{...$,summary:`${X.slice(0,9)} property '${Y}' to be ${X.slice(8)} but found: ${Q}`};case 62:let q=$.schema.anyOf.map((G)=>`'${G?.format??G.type}'`).join(", ");return{...$,summary:J?`Value should be one of ${q}`:`Property '${Y}' should be one of: ${q}`};default:return{summary:X,...$}}},A8=class $ extends Error{constructor(X,Z,Q){if(Q&&typeof Q==="object"&&Q instanceof M0)Q=Q.response;let W=p6?void 0:("Errors"in Z)?Z.Errors(Q).First():m.Errors(Z,Q).First(),Y=W?.schema.error!==void 0?typeof W.schema.error==="function"?W.schema.error({type:X,validator:Z,value:Q,get errors(){return[...Z.Errors(Q)].map(Y0)}}):W.schema.error:void 0,J=W?.path||"root",z="";if(Y!==void 0)z=typeof Y==="object"?JSON.stringify(Y):Y+"";else if(p6)z=JSON.stringify({type:"validation",on:X,summary:Y0(W).summary,message:W?.message,found:Q});else{let B=Z?.schema??Z,q="Errors"in Z?[...Z.Errors(Q)].map(Y0):[...m.Errors(Z,Q)].map(Y0),G;try{G=m.Create(B)}catch(A){G={type:"Could not create expected value",message:A?.message,error:A}}z=JSON.stringify({type:"validation",on:X,summary:q[0]?.summary,property:J,message:W?.message,expected:G,found:Q,errors:q},null,2)}super(z);this.type=X,this.validator=Z,this.value=Q,this.code="VALIDATION",this.status=422,Object.setPrototypeOf(this,$.prototype)}get all(){return"Errors"in this.validator?[...this.validator.Errors(this.value)].map(Y0):[...m.Errors(this.validator,this.value)].map(Y0)}static simplifyModel(X){let Z="schema"in X?X.schema:X;try{return m.Create(Z)}catch{return Z}}get model(){return $.simplifyModel(this.validator)}toResponse(X){return new Response(this.message,{status:400,headers:{...X,"content-type":"application/json"}})}},SW={open($){$.data.open?.($)},message($,X){$.data.message?.($,X)},drain($){$.data.drain?.($)},close($,X,Z){$.data.close?.($,X,Z)}},y6=class{constructor($,X){if(this.raw=$,this.data=X,this.validator=$.data.validator,$.data.id)this.id=$.data.id;else this.id=iW().toString()}get id(){return this.raw.data.id}set id($){this.raw.data.id=$}get publish(){return($,X=void 0,Z)=>{if(this.validator?.Check(X)===!1)throw new A8("message",this.validator,X);if(typeof X==="object")X=JSON.stringify(X);return this.raw.publish($,X,Z),this}}get send(){return($)=>{if(this.validator?.Check($)===!1)throw new A8("message",this.validator,$);if(Buffer.isBuffer($))return this.raw.send($),this;if(typeof $==="object")$=JSON.stringify($);return this.raw.send($),this}}get subscribe(){return($)=>{return this.raw.subscribe($),this}}get unsubscribe(){return($)=>{return this.raw.unsubscribe($),this}}get cork(){return($)=>{return this.raw.cork($),this}}get close(){return()=>{return this.raw.close(),this}}get terminate(){return this.raw.terminate.bind(this.raw)}get isSubscribed(){return this.raw.isSubscribed.bind(this.raw)}get remoteAddress(){return this.raw.remoteAddress}},KW="1.1.24",q1=/\+/g;function lW($){let X={};if(typeof $!=="string")return X;let Z="",Q="",W=-1,Y=-1,J=0,z=$.length;for(let B=0;B<z;B++)switch($.charCodeAt(B)){case 38:let q=Y>W;if(!q)Y=B;if(Z=$.slice(W+1,Y),q||Z.length>0){if(J&1)Z=Z.replace(q1," ");if(J&2)Z=r0.default(Z)||Z;if(!X[Z]){if(q){if(Q=$.slice(Y+1,B),J&4)Q=Q.replace(q1," ");if(J&8)Q=r0.default(Q)||Q}X[Z]=Q}}Z="",Q="",W=B,Y=B,J=0;break;case 61:if(Y<=W)Y=B;else J|=8;break;case 43:if(Y>W)J|=4;else J|=1;break;case 37:if(Y>W)J|=8;else J|=2;break}if(W<z){let B=Y>W;if(Z=$.slice(W+1,B?Y:z),B||Z.length>0){if(J&1)Z=Z.replace(q1," ");if(J&2)Z=r0.default(Z)||Z;if(!X[Z]){if(B){if(Q=$.slice(Y+1,z),J&4)Q=Q.replace(q1," ");if(J&8)Q=r0.default(Q)||Q}X[Z]=Q}}}return X}var RX=($)=>{let X={};if(typeof $!=="string")return X;let Z=$.length,Q="",W="",Y=-1,J=-1,z=!1,B=!1,q=!1,G=!1,A=!1,O=0;for(let M=0;M<Z+1;M++){if(M!==Z)O=$.charCodeAt(M);else O=38;switch(O){case 38:{if(A=J>Y,!A)J=M;if(Q=$.slice(Y+1,J),A||Q.length>0){if(q)Q=Q.replace(q1," ");if(z)Q=r0.default(Q)||Q;if(A){if(W=$.slice(J+1,M),G)W=W.replace(q1," ");if(B)W=r0.default(W)||W}let F=X[Q];if(F===void 0)X[Q]=W;else if(F.pop)F.push(W);else X[Q]=[F,W]}W="",Y=M,J=M,z=!1,B=!1,q=!1,G=!1;break}case 61:if(J<=Y)J=M;else B=!0;break;case 43:if(J>Y)G=!0;else q=!0;break;case 37:if(J>Y)B=!0;else z=!0;break}}return X},IX=Symbol("ElysiaTrace"),S0=()=>{let{promise:$,resolve:X}=Promise.withResolvers(),{promise:Z,resolve:Q}=Promise.withResolvers(),{promise:W,resolve:Y}=Promise.withResolvers(),J=[],z=[];return[(B)=>{if(B)J.push(B);return $},(B)=>{let q=[],G=[],A=null;for(let M=0;M<(B.total??0);M++){let{promise:F,resolve:S}=Promise.withResolvers(),{promise:_,resolve:b}=Promise.withResolvers(),{promise:x,resolve:V}=Promise.withResolvers(),r=[],u=[];q.push((S8)=>{if(S8)r.push(S8);return F}),G.push((S8)=>{let N8={...S8,end:_,error:x,index:M,onStop(q8){if(q8)u.push(q8);return _}};S(N8);for(let q8=0;q8<r.length;q8++)r[q8](N8);return(q8=null)=>{let Y8=performance.now();if(q8)A=q8;let t={end:Y8,error:q8,get elapsed(){return Y8-S8.begin}};for(let E8=0;E8<u.length;E8++)u[E8](t);b(Y8),V(q8)}})}let O={...B,end:Z,error:W,onEvent(M){for(let F=0;F<q.length;F++)q[F](M)},onStop(M){if(M)z.push(M);return Z}};X(O);for(let M=0;M<J.length;M++)J[M](O);return{resolveChild:G,resolve(M=null){let F=performance.now();if(!M&&A)M=A;let S={end:F,error:M,get elapsed(){return F-B.begin}};for(let _=0;_<z.length;_++)z[_](S);Q(F),Y(M)}}}]},GU=($)=>{return(X)=>{let[Z,Q]=S0(),[W,Y]=S0(),[J,z]=S0(),[B,q]=S0(),[G,A]=S0(),[O,M]=S0(),[F,S]=S0(),[_,b]=S0(),[x,V]=S0();return $({id:X[m6],context:X,set:X.set,onRequest:Z,onParse:W,onTransform:J,onBeforeHandle:B,onHandle:G,onAfterHandle:O,onMapResponse:_,onAfterResponse:x,onError:F}),{request:Q,parse:Y,transform:z,beforeHandle:q,handle:A,afterHandle:M,error:S,mapResponse:b,afterResponse:V}}},UU=new Headers().toJSON,nW={optional:Symbol.for("TypeBox.Optional"),kind:Symbol.for("TypeBox.Kind")},C2=($)=>{if(!$)return!1;let X=$?.schema;return!!X&&nW.optional in X},i2=($)=>{if(!$)return!1;let X=$?.schema??$;if(X.anyOf)return X.anyOf.some(i2);if(X.someOf)return X.someOf.some(i2);if(X.allOf)return X.allOf.some(i2);if(X.not)return X.not.some(i2);if(X.type==="object"){let Z=X.properties;if("additionalProperties"in X)return X.additionalProperties;if("patternProperties"in X)return!1;for(let Q of Object.keys(Z)){let W=Z[Q];if(W.type==="object"){if(i2(W))return!0}else if(W.anyOf){for(let Y=0;Y<W.anyOf.length;Y++)if(i2(W.anyOf[Y]))return!0}return W.additionalProperties}return!1}return!1},xX=({context:$="c",trace:X,addFn:Z})=>{if(!X.length)return()=>{return{resolveChild(){return()=>{}},resolve(){}}};for(let Q=0;Q<X.length;Q++)Z(`let report${Q}, reportChild${Q}, reportErr${Q}, reportErrChild${Q}; let trace${Q} = ${$}[ELYSIA_TRACE]?.[${Q}] ?? trace[${Q}](${$});
`);return(Q,{name:W,total:Y=0}={})=>{if(!W)W="anonymous";let J=Q==="error"?"reportErr":"report";for(let z=0;z<X.length;z++)Z(`
${J}${z} = trace${z}.${Q}({id,event: '${Q}',name: '${W}',begin: performance.now(),total: ${Y}})
`);return{resolve(){for(let z=0;z<X.length;z++)Z(`
${J}${z}.resolve()
`)},resolveChild(z){for(let B=0;B<X.length;B++)Z(`${J}Child${B} = ${J}${B}.resolveChild?.shift()?.({id,event: '${Q}',name: '${z}',begin: performance.now()})
`);return(B)=>{for(let q=0;q<X.length;q++)if(B)Z(`
                             	if (${B} instanceof Error)
                    				${J}Child${q}?.(${B})
                           		else
                             		${J}Child${q}?.()
`);else Z(`${J}Child${q}?.()
`)}}}}},qU=({injectResponse:$="",normalize:X=!1,validator:Z})=>({composeValidation:(Q,W=`c.${Q}`)=>`c.set.status = 422; throw new ValidationError('${Q}', validator.${Q}, ${W})`,composeResponseValidation:(Q="r")=>{let W="\n"+$+"\n";W+=`if(${Q} instanceof ElysiaCustomStatusResponse) {
			c.set.status = ${Q}.code
			${Q} = ${Q}.response
		}

		const isResponse = ${Q} instanceof Response

`,W+=`switch(c.set.status) {
`;for(let[Y,J]of Object.entries(Z.response)){if(W+=`	case ${Y}:
				if (!isResponse) {
`,X&&"Clean"in J&&!i2(J))W+=`${Q} = validator.response['${Y}'].Clean(${Q})
`;W+=`if(validator.response['${Y}'].Check(${Q}) === false) {
					c.set.status = 422

					throw new ValidationError('response', validator.response['${Y}'], ${Q})
				}

				c.set.status = ${Y}
			}

			break

`}return W+="\n}\n",W}}),fV=Symbol.for("TypeBox.Kind"),n0=($,X)=>{if(!X)return;if(X.type==="object"){let Z=X.properties;if(!Z)return!1;for(let Q of Object.keys(Z)){let W=Z[Q];if($ in W)return!0;if(W.type==="object"){if(n0($,W))return!0}else if(W.anyOf){for(let Y=0;Y<W.anyOf.length;Y++)if(n0($,W.anyOf[Y]))return!0}}return!1}return $ in X},SX=Symbol.for("TypeBox.Transform"),t0=($)=>{if(!$)return;if($.type==="object"&&$.properties){let X=$.properties;for(let Z of Object.keys(X)){let Q=X[Z];if(Q.type==="object"){if(t0(Q))return!0}else if(Q.anyOf){for(let Y=0;Y<Q.anyOf.length;Y++)if(t0(Q.anyOf[Y]))return!0}if(SX in Q)return!0}return!1}return SX in $||$.properties&&SX in $.properties},wU=/(?:return|=>) \S+\(/g,s0=($)=>{return($?.fn??$).constructor.name==="AsyncFunction"},v8=($)=>{let X=$?.fn??$;if(X.constructor.name==="AsyncFunction")return!0;let Z=X.toString();if(Z.includes("=> response.clone("))return!1;if(Z.includes("await"))return!0;if(Z.includes("async"))return!0;return!!Z.match(wU)},d6=($)=>{let X=$?.fn??$;return X.constructor.name==="AsyncGeneratorFunction"||X.constructor.name==="GeneratorFunction"},HU=({app:$,path:X,method:Z,localHook:Q,hooks:W,validator:Y,handler:J,allowMeta:z=!1,inference:B})=>{let q=typeof J==="function";if(!q){if(J=V8(J,{headers:$.setHeaders??{}}),W.parse.length===0&&W.transform.length===0&&W.beforeHandle.length===0&&W.afterHandle.length===0)return Function("a","return function () { return a.clone() }")(J)}let G=q?"handler(c)":"handler",A=W.afterResponse.length>0,O=W.trace.length>0,M="";if(B=EW(Object.assign(Q,{handler:J}),B),B.server)M+=`
Object.defineProperty(c, 'server', {
			get: function() { return getServer() }
		})
`;if(B.body)M+=`let isParsing = false
`;Y.createBody?.(),Y.createQuery?.(),Y.createHeaders?.(),Y.createParams?.(),Y.createCookie?.(),Y.createResponse?.();let F=B.query||!!Y.query,S=Z!=="$INTERNALWS"&&Z!=="GET"&&Z!=="HEAD"&&(B.body||!!Y.body||W.parse.length),_=$.setHeaders,b=_&&!!Object.keys(_).length,x=B.headers||Y.headers,V=B.cookie||!!Y.cookie,r=V?uW({validator:Y.cookie,defaultConfig:$.config.cookie,dynamic:!!$.config.aot,config:Y.cookie?.config??{},models:$.definitions.type}):void 0,u=r?.config,S8="";if(u?.sign){if(!u.secrets)throw new Error(`t.Cookie required secret which is not set in (${Z}) ${X}.`);let K=!u.secrets?void 0:typeof u.secrets==="string"?u.secrets:u.secrets[0];if(S8+=`const _setCookie = c.set.cookie
		if(_setCookie) {`,u.sign===!0)S8+=`for(const [key, cookie] of Object.entries(_setCookie)) {
				c.set.cookie[key].value = await signCookie(cookie.value, '${K}')
			}`;else for(let L of u.sign)S8+=`if(_setCookie['${L}']?.value) { c.set.cookie['${L}'].value = await signCookie(_setCookie['${L}'].value, '${K}') }
`;S8+="}\n"}let N8=$.config.normalize,{composeValidation:q8,composeResponseValidation:Y8}=qU({normalize:N8,validator:Y});if(x)M+=UU?`c.headers = c.request.headers.toJSON()
`:`c.headers = {}
                for (const [key, value] of c.request.headers.entries())
					c.headers[key] = value
				`;if(V){let K=(R,T)=>{let y=u?.[R]??T;if(!y)return typeof T==="string"?`${R}: "${T}",`:`${R}: ${T},`;if(typeof y==="string")return`${R}: '${y}',`;if(y instanceof Date)return`${R}: new Date(${y.getTime()}),`;return`${R}: ${y},`},L=u?`{
			secrets: ${u.secrets!==void 0?typeof u.secrets==="string"?`'${u.secrets}'`:"["+u.secrets.reduce((R,T)=>R+`'${T}',`,"")+"]":"undefined"},
			sign: ${u.sign===!0?!0:u.sign!==void 0?"["+u.sign.reduce((R,T)=>R+`'${T}',`,"")+"]":"undefined"},
			${K("domain")}
			${K("expires")}
			${K("httpOnly")}
			${K("maxAge")}
			${K("path","/")}
			${K("priority")}
			${K("sameSite")}
			${K("secure")}
		}`:"undefined";if(x)M+=`
c.cookie = await parseCookie(c.set, c.headers.cookie, ${L})
`;else M+=`
c.cookie = await parseCookie(c.set, c.request.headers.get('cookie'), ${L})
`}if(F){let K=[];if(Y.query&&Y.query.schema.type==="object"){let L=Y.query.schema.properties;if(!i2(Y.query))for(let[R,T]of Object.entries(L)){let y=T;if(y&&nW.optional in y&&y.type==="array"&&y.items)y=y.items;let{type:c8,anyOf:l}=y,f2=c8==="array"||l?.some((y8)=>y8.type==="string"&&y8.format==="ArrayString");K.push({key:R,isArray:f2,isNestedObjectArray:f2&&y.items?.type==="object"||!!y.items?.anyOf?.some((y8)=>y8.type==="object"||y8.type==="array"),isObject:c8==="object"||l?.some((y8)=>y8.type==="string"&&y8.format==="ArrayString"),anyOf:!!l})}}if(!K.length)M+=`if(c.qi === -1) {
				c.query = {}
			} else {
				c.query = parseQueryFromURL(c.url.slice(c.qi + 1))
			}`;else M+=`if(c.qi !== -1) {
				let url = '&' + c.url.slice(c.qi + 1)

				${K.map(({key:L,isArray:R,isObject:T,isNestedObjectArray:y,anyOf:c8},l)=>{let f2=`${l===0?"let":""} memory = url.indexOf('&${L}=')
							let a${l}
`;if(R)return f2+(y?`while (memory !== -1) {
											const start = memory + ${L.length+2}
											memory = url.indexOf('&', start)

											if(a${l} === undefined)
												a${l} = ''
											else
												a${l} += ','

											let temp

											if(memory === -1) temp = decodeURIComponent(url.slice(start).replace(/\\+/g, ' '))
											else temp = decodeURIComponent(url.slice(start, memory).replace(/\\+/g, ' '))

											const charCode = temp.charCodeAt(0)
											if(charCode !== 91 && charCode !== 123)
												temp = '"' + temp + '"'

											a${l} += temp

											if(memory === -1) break

											memory = url.indexOf('&${L}=', memory)
											if(memory === -1) break
										}

										try {
										    if(a${l}.charCodeAt(0) === 91)
												a${l} = JSON.parse(a${l})
											else
												a${l} = JSON.parse('[' + a${l} + ']')
										} catch {}
`:`while (memory !== -1) {
											const start = memory + ${L.length+2}
											memory = url.indexOf('&', start)

											if(a${l} === undefined)
												a${l} = []

											if(memory === -1) {
												a${l}.push(decodeURIComponent(url.slice(start)).replace(/\\+/g, ' '))
												break
											}
											else a${l}.push(decodeURIComponent(url.slice(start, memory)).replace(/\\+/g, ' '))

											memory = url.indexOf('&${L}=', memory)
											if(memory === -1) break
										}
`);if(T)return f2+`if (memory !== -1) {
										const start = memory + ${L.length+2}
										memory = url.indexOf('&', start)

										if(memory === -1) a${l} = decodeURIComponent(url.slice(start).replace(/\\+/g, ' '))
										else a${l} = decodeURIComponent(url.slice(start, memory).replace(/\\+/g, ' '))

										if (a${l} !== undefined) {
											try {
												a${l} = JSON.parse(a${l})
											} catch {}
										}
									}`;return f2+`if (memory !== -1) {
										const start = memory + ${L.length+2}
										memory = url.indexOf('&', start)

										if(memory === -1) a${l} = decodeURIComponent(url.slice(start).replace(/\\+/g, ' '))
										else {
											a${l} = decodeURIComponent(url.slice(start, memory).replace(/\\+/g, ' '))

											${c8?`
											let deepMemory = url.indexOf('&${L}=', memory)

											if(deepMemory !== -1) {
												a${l} = [a${l}]
												let first = true

												while(true) {
													const start = deepMemory + ${L.length+2}
													if(first)
														first = false
													else
														deepMemory = url.indexOf('&', start)

													let value
													if(deepMemory === -1) value = decodeURIComponent(url.slice(start).replace(/\\+/g, ' '))
													else value = decodeURIComponent(url.slice(start, deepMemory).replace(/\\+/g, ' '))

													const vStart = value.charCodeAt(0)
													const vEnd = value.charCodeAt(value.length - 1)

													if((vStart === 91 && vEnd === 93) || (vStart === 123 && vEnd === 125))
														try {
															a${l}.push(JSON.parse(value))
														} catch {
														 	a${l}.push(value)
														}

													if(deepMemory === -1) break
												}
											}
												`:""}
										}
									}`}).join("\n")}

				c.query = {
					${K.map(({key:L},R)=>`'${L}': a${R}`).join(", ")}
				}
			} else {
				c.query = {}
			}`}if(O)M+="\nconst id = c[ELYSIA_REQUEST_ID]\n";let t=xX({trace:W.trace,addFn:(K)=>{M+=K}});M+="\ntry {\n";let E8=typeof J==="function"&&v8(J),q2=O||W.afterResponse.length>0?"c.response = ":"",I0=V||S||E8||W.parse.length>0||W.afterHandle.some(v8)||W.beforeHandle.some(v8)||W.transform.some(v8)||W.mapResponse.some(v8),o6=(typeof J==="function"?d6(J):!1)||W.beforeHandle.some(d6)||W.afterHandle.some(d6)||W.transform.some(d6),a0=B.cookie||B.set||x||O||Y.response||q&&b||o6,Z2=", c.request";M+=`c.route = \`${X}\`
`;let n6=t("parse",{total:W.parse.length});if(S){let K=W.parse.length||B.body||Y.body;if(M+="isParsing = true\n",W.type&&!W.parse.length)switch(W.type){case"json":case"application/json":if(C2(Y.body))M+="try { c.body = await c.request.json() } catch {}";else M+="c.body = await c.request.json()";break;case"text":case"text/plain":M+=`c.body = await c.request.text()
`;break;case"urlencoded":case"application/x-www-form-urlencoded":M+=`c.body = parseQuery(await c.request.text())
`;break;case"arrayBuffer":case"application/octet-stream":M+=`c.body = await c.request.arrayBuffer()
`;break;case"formdata":case"multipart/form-data":if(M+=`c.body = {}
`,C2(Y.body))M+="let form; try { form = await c.request.formData() } catch {}";else M+="const form = await c.request.formData()";M+=`
if(form)
						for (const key of form.keys()) {
							if (c.body[key])
								continue

							const value = form.getAll(key)
							if (value.length === 1)
								c.body[key] = value[0]
							else c.body[key] = value
						} else form = {}
`;break}else if(K){if(M+="\n",M+=x?"let contentType = c.headers['content-type']":"let contentType = c.request.headers.get('content-type')",M+=`
				if (contentType) {
					const index = contentType.indexOf(';')
					if (index !== -1) contentType = contentType.substring(0, index)

					c.contentType = contentType
`,W.parse.length){M+=`let used = false
`;let L=t("parse",{total:W.parse.length});for(let R=0;R<W.parse.length;R++){let T=L.resolveChild(W.parse[R].fn.name),y=`bo${R}`;if(R!==0)M+=`if(!used) {
`;if(M+=`let ${y} = parse[${R}](c, contentType)
`,M+=`if(${y} instanceof Promise) ${y} = await ${y}
`,M+=`if(${y} !== undefined) { c.body = ${y}; used = true }
`,T(),R!==0)M+="}"}L.resolve()}if(M+="\ndelete c.contentType\n",W.parse.length)M+="if (!used) {";if(W.type&&!Array.isArray(W.type))switch(W.type){case"json":case"application/json":if(C2(Y.body))M+="try { c.body = await c.request.json() } catch {}";else M+="c.body = await c.request.json()";break;case"text":case"text/plain":M+=`c.body = await c.request.text()
`;break;case"urlencoded":case"application/x-www-form-urlencoded":M+=`c.body = parseQuery(await c.request.text())
`;break;case"arrayBuffer":case"application/octet-stream":M+=`c.body = await c.request.arrayBuffer()
`;break;case"formdata":case"multipart/form-data":M+=`c.body = {}

							const form = await c.request.formData()
							for (const key of form.keys()) {
								if (c.body[key])
									continue

								const value = form.getAll(key)
								if (value.length === 1)
									c.body[key] = value[0]
								else c.body[key] = value
							}
`;break}else M+=`
					switch (contentType) {
						case 'application/json':
							${C2(Y.body)?"try { c.body = await c.request.json() } catch {}":"c.body = await c.request.json()"}
							break

						case 'text/plain':
							c.body = await c.request.text()
							break

						case 'application/x-www-form-urlencoded':
							c.body = parseQuery(await c.request.text())
							break

						case 'application/octet-stream':
							c.body = await c.request.arrayBuffer();
							break

						case 'multipart/form-data':
							c.body = {}

							const form = await c.request.formData()
							for (const key of form.keys()) {
								if (c.body[key])
									continue

								const value = form.getAll(key)
								if (value.length === 1)
									c.body[key] = value[0]
								else c.body[key] = value
							}

							break
					}`;if(W.parse.length)M+="}";M+="}\n"}M+="\nisParsing = false\n"}if(n6.resolve(),W?.transform){let K=t("transform",{total:W.transform.length});if(W.transform.length)M+="\nlet transformed\n";for(let L=0;L<W.transform.length;L++){let R=W.transform[L],T=K.resolveChild(R.fn.name);if(M+=v8(R)?`transformed = await transform[${L}](c)
`:`transformed = transform[${L}](c)
`,R.subType==="mapDerive")M+=`if(transformed instanceof ElysiaCustomStatusResponse)
					throw transformed
				else {
					transformed.request = c.request
					transformed.store = c.store
					transformed.qi = c.qi
					transformed.path = c.path
					transformed.url = c.url
					transformed.redirect = c.redirect
					transformed.set = c.set
					transformed.error = c.error

					c = transformed
			}`;else M+=`if(transformed instanceof ElysiaCustomStatusResponse)
					throw transformed
				else
					Object.assign(c, transformed)
`;T()}K.resolve()}if(Y){if(M+="\n",Y.headers){if(N8&&"Clean"in Y.headers&&!i2(Y.headers))M+="c.headers = validator.headers.Clean(c.headers);\n";if(n0("default",Y.headers.schema))for(let[K,L]of Object.entries(m.Default(Y.headers.schema,{}))){let R=typeof L==="object"?JSON.stringify(L):typeof L==="string"?`'${L}'`:L;if(R!==void 0)M+=`c.headers['${K}'] ??= ${R}
`}if(C2(Y.headers))M+="if(isNotEmpty(c.headers)) {";if(M+=`if(validator.headers.Check(c.headers) === false) {
				${q8("headers")}
			}`,t0(Y.headers.schema))M+=`c.headers = validator.headers.Decode(c.headers)
`;if(C2(Y.headers))M+="}"}if(Y.params){if(n0("default",Y.params.schema))for(let[K,L]of Object.entries(m.Default(Y.params.schema,{}))){let R=typeof L==="object"?JSON.stringify(L):typeof L==="string"?`'${L}'`:L;if(R!==void 0)M+=`c.params['${K}'] ??= ${R}
`}if(M+=`if(validator.params.Check(c.params) === false) {
				${q8("params")}
			}`,t0(Y.params.schema))M+=`
c.params = validator.params.Decode(c.params)
`}if(Y.query){if(N8&&"Clean"in Y.query&&!i2(Y.query))M+="c.query = validator.query.Clean(c.query);\n";if(n0("default",Y.query.schema))for(let[K,L]of Object.entries(m.Default(Y.query.schema,{}))){let R=typeof L==="object"?JSON.stringify(L):typeof L==="string"?`'${L}'`:L;if(R!==void 0)M+=`if(c.query['${K}'] === undefined) c.query['${K}'] = ${R}
`}if(C2(Y.query))M+="if(isNotEmpty(c.query)) {";if(M+=`if(validator.query.Check(c.query) === false) {
          		${q8("query")}
			}`,t0(Y.query.schema))M+=`
c.query = validator.query.Decode(Object.assign({}, c.query))
`;if(C2(Y.query))M+="}"}if(Y.body){if(N8&&"Clean"in Y.body&&!i2(Y.body))M+="c.body = validator.body.Clean(c.body);\n";let K=t0(Y.body.schema);if(K||C2(Y.body))M+=`
const isNotEmptyObject = c.body && (typeof c.body === "object" && isNotEmpty(c.body))
`;if(n0("default",Y.body.schema)){let L=m.Default(Y.body.schema,Y.body.schema.type==="object"?{}:void 0),R=typeof L==="object"?JSON.stringify(L):typeof L==="string"?`'${L}'`:L;if(M+=`if(validator.body.Check(c.body) === false) {
					if (typeof c.body === 'object') {
						c.body = Object.assign(${R}, c.body)
					} else { c.body = ${R} }`,C2(Y.body))M+=`
					    if(isNotEmptyObject && validator.body.Check(c.body) === false) {
            				${q8("body")}
             			}
                    }`;else M+=`
    				if(validator.body.Check(c.body) === false) {
        				${q8("body")}
         			}
                }`}else if(C2(Y.body))M+=`if(isNotEmptyObject && validator.body.Check(c.body) === false) {
         			${q8("body")}
          		}`;else M+=`if(validator.body.Check(c.body) === false) {
         			${q8("body")}
          		}`;if(K)M+=`
if(isNotEmptyObject) c.body = validator.body.Decode(c.body)
`}if(l2(r?.schema?.properties??r?.schema?.schema??{})){if(M+=`const cookieValue = {}
    			for(const [key, value] of Object.entries(c.cookie))
    				cookieValue[key] = value.value
`,n0("default",r.schema))for(let[K,L]of Object.entries(m.Default(r.schema,{})))M+=`cookieValue['${K}'] = ${typeof L==="object"?JSON.stringify(L):L}
`;if(C2(Y.cookie))M+="if(isNotEmpty(c.cookie)) {";if(M+=`if(validator.cookie.Check(cookieValue) === false) {
				${q8("cookie","cookieValue")}
			}`,t0(Y.cookie.schema))M+=`
for(const [key, value] of Object.entries(validator.cookie.Decode(cookieValue)))
					c.cookie[key].value = value
`;if(C2(Y.cookie))M+="}"}}if(W?.beforeHandle){let K=t("beforeHandle",{total:W.beforeHandle.length}),L=!1;for(let R=0;R<W.beforeHandle.length;R++){let T=W.beforeHandle[R],y=K.resolveChild(T.fn.name),c8=J6(T);if(T.subType==="resolve"||T.subType==="mapResolve"){if(!L)L=!0,M+="\nlet resolved\n";if(M+=v8(T)?`resolved = await beforeHandle[${R}](c);
`:`resolved = beforeHandle[${R}](c);
`,T.subType==="mapResolve")M+=`if(resolved instanceof ElysiaCustomStatusResponse)
						throw resolved
					else {
						resolved.request = c.request
						resolved.store = c.store
						resolved.qi = c.qi
						resolved.path = c.path
						resolved.url = c.url
						resolved.redirect = c.redirect
						resolved.set = c.set
						resolved.error = c.error

						c = resolved
					}`;else M+=`if(resolved instanceof ElysiaCustomStatusResponse)
						throw resolved
					else
						Object.assign(c, resolved)
`}else if(!c8)M+=v8(T)?`await beforeHandle[${R}](c);
`:`beforeHandle[${R}](c);
`,y();else{if(M+=v8(T)?`be = await beforeHandle[${R}](c);
`:`be = beforeHandle[${R}](c);
`,y("be"),M+=`if(be !== undefined) {
`,K.resolve(),W.afterHandle?.length){t("handle",{name:q?J.name:void 0}).resolve();let y8=t("afterHandle",{total:W.afterHandle.length});for(let j2=0;j2<W.afterHandle.length;j2++){let U=W.afterHandle[j2],E=J6(U),H=y8.resolveChild(U.fn.name);if(M+=`c.response = be
`,!E)M+=v8(U.fn)?`await afterHandle[${j2}](c, be)
`:`afterHandle[${j2}](c, be)
`;else M+=v8(U.fn)?`af = await afterHandle[${j2}](c)
`:`af = afterHandle[${j2}](c)
`,M+=`if(af !== undefined) { c.response = be = af }
`;H("af")}y8.resolve()}if(Y.response)M+=Y8("be");let f2=t("mapResponse",{total:W.mapResponse.length});if(W.mapResponse.length){M+=`
c.response = be
`;for(let y8=0;y8<W.mapResponse.length;y8++){let j2=W.mapResponse[y8],U=f2.resolveChild(j2.fn.name);M+=`
if(mr === undefined) {
							mr = ${s0(j2)?"await":""} onMapResponse[${y8}](c)
							if(mr !== undefined) be = c.response = mr
						}
`,U()}}f2.resolve(),M+=S8,M+=`return mapEarlyResponse(${q2} be, c.set ${Z2})}
`}}K.resolve()}if(W?.afterHandle.length){let K=t("handle",{name:q?J.name:void 0});if(W.afterHandle.length)M+=E8?`let r = c.response = await ${G};
`:`let r = c.response = ${G};
`;else M+=E8?`let r = await ${G};
`:`let r = ${G};
`;K.resolve();let L=t("afterHandle",{total:W.afterHandle.length});for(let T=0;T<W.afterHandle.length;T++){let y=W.afterHandle[T],c8=J6(y),l=L.resolveChild(y.fn.name);if(!c8)M+=v8(y.fn)?`await afterHandle[${T}](c)
`:`afterHandle[${T}](c)
`,l();else if(M+=v8(y.fn)?`af = await afterHandle[${T}](c)
`:`af = afterHandle[${T}](c)
`,l("af"),Y.response)M+="if(af !== undefined) {",L.resolve(),M+=Y8("af"),M+="c.response = af }";else M+="if(af !== undefined) {",L.resolve(),M+=`c.response = af}
`}if(L.resolve(),M+=`r = c.response
`,Y.response)M+=Y8();M+=S8;let R=t("mapResponse",{total:W.mapResponse.length});if(W.mapResponse.length)for(let T=0;T<W.mapResponse.length;T++){let y=W.mapResponse[T],c8=R.resolveChild(y.fn.name);M+=`
mr = ${s0(y)?"await":""} onMapResponse[${T}](c)
				if(mr !== undefined) r = c.response = mr
`,c8()}if(R.resolve(),a0)M+=`return mapResponse(${q2} r, c.set ${Z2})
`;else M+=`return mapCompactResponse(${q2} r ${Z2})
`}else{let K=t("handle",{name:q?J.name:void 0});if(Y.response||W.mapResponse.length){if(M+=E8?`let r = await ${G};
`:`let r = ${G};
`,K.resolve(),Y.response)M+=Y8();t("afterHandle").resolve();let L=t("mapResponse",{total:W.mapResponse.length});if(W.mapResponse.length){M+="\nc.response = r\n";for(let R=0;R<W.mapResponse.length;R++){let T=W.mapResponse[R],y=L.resolveChild(T.fn.name);M+=`
if(mr === undefined) {
						mr = ${s0(T)?"await":""} onMapResponse[${R}](c)
    					if(mr !== undefined) r = c.response = mr
					}
`,y()}}if(L.resolve(),M+=S8,J instanceof Response)M+=B.set?`if(
					isNotEmpty(c.set.headers) ||
					c.set.status !== 200 ||
					c.set.redirect ||
					c.set.cookie
				)
					return mapResponse(${q2} ${G}.clone(), c.set ${Z2})
				else
					return ${G}.clone()`:`return ${G}.clone()`,M+="\n";else if(a0)M+=`return mapResponse(${q2} r, c.set ${Z2})
`;else M+=`return mapCompactResponse(${q2} r ${Z2})
`}else if(V||O){M+=E8?`let r = await ${G};
`:`let r = ${G};
`,K.resolve(),t("afterHandle").resolve();let L=t("mapResponse",{total:W.mapResponse.length});if(W.mapResponse.length){M+="\nc.response = r\n";for(let R=0;R<W.mapResponse.length;R++){let T=W.mapResponse[R],y=L.resolveChild(T.fn.name);M+=`
if(mr === undefined) {
							mr = ${s0(T)?"await":""} onMapResponse[${R}](c)
    						if(mr !== undefined) r = c.response = mr
						}
`,y()}}if(L.resolve(),M+=S8,a0)M+=`return mapResponse(${q2} r, c.set ${Z2})
`;else M+=`return mapCompactResponse(${q2} r ${Z2})
`}else{K.resolve();let L=E8?`await ${G}`:G;if(t("afterHandle").resolve(),J instanceof Response)M+=B.set?`if(
					isNotEmpty(c.set.headers) ||
					c.set.status !== 200 ||
					c.set.redirect ||
					c.set.cookie
				)
					return mapResponse(${q2} ${G}.clone(), c.set ${Z2})
				else
					return ${G}.clone()`:`return ${G}.clone()`,M+="\n";else if(a0)M+=`return mapResponse(${q2} ${L}, c.set ${Z2})
`;else M+=`return mapCompactResponse(${q2} ${L} ${Z2})
`}}if(M+=`
} catch(error) {`,S)M+=`
if(isParsing) error = new ParseError()
`;if(!I0)M+=`
return (async () => {
`;if(M+=`
const set = c.set
if (!set.status || set.status < 300) set.status = error?.status || 500
`,O)for(let K=0;K<W.trace.length;K++)M+=`report${K}?.resolve(error);reportChild${K}?.(error);
`;let B0=t("error",{total:W.error.length});if(W.error.length){M+=`
				c.error = error
				if(error instanceof TypeBoxError) {
					c.code = "VALIDATION"
					c.set.status = 422
				} else
					c.code = error.code ?? error[ERROR_CODE] ?? "UNKNOWN"
				let er
			`;for(let K=0;K<W.error.length;K++){let L=B0.resolveChild(W.error[K].fn.name);if(v8(W.error[K]))M+=`
er = await handleErrors[${K}](c)
`;else M+=`
er = handleErrors[${K}](c)
if (er instanceof Promise) er = await er
`;L();let R=t("mapResponse",{total:W.mapResponse.length});if(W.mapResponse.length)for(let T=0;T<W.mapResponse.length;T++){let y=W.mapResponse[T],c8=R.resolveChild(y.fn.name);M+=`
c.response = er

							er = ${s0(y)?"await":""} onMapResponse[${T}](c)
							if(er instanceof Promise) er = await er
`,c8()}if(R.resolve(),M+=`er = mapEarlyResponse(er, set ${Z2})
`,M+="if (er) {",O){for(let T=0;T<W.trace.length;T++)M+=`
report${T}.resolve()
`;B0.resolve()}M+=`return er
}
`}}if(B0.resolve(),M+=`return handleError(c, error, true)
`,!I0)M+="})()";if(M+="}",A||O){if(M+=" finally { ",!I0)M+=";(async () => {";let K=t("afterResponse",{total:W.afterResponse.length});if(A)for(let L=0;L<W.afterResponse.length;L++){let R=K.resolveChild(W.afterResponse[L].fn.name);M+=`
await afterResponse[${L}](c);
`,R()}if(K.resolve(),!I0)M+="})();";M+="}"}M=`const {
		handler,
		handleError,
		hooks: {
			transform,
			resolve,
			beforeHandle,
			afterHandle,
			mapResponse: onMapResponse,
			parse,
			error: handleErrors,
			afterResponse,
			trace: _trace
		},
		validator,
		utils: {
			mapResponse,
			mapCompactResponse,
			mapEarlyResponse,
			parseQuery,
			parseQueryFromURL,
			isNotEmpty
		},
		error: {
			NotFoundError,
			ValidationError,
			InternalServerError,
			ParseError
		},
		schema,
		definitions,
		ERROR_CODE,
		parseCookie,
		signCookie,
		decodeURIComponent,
		ElysiaCustomStatusResponse,
		ELYSIA_TRACE,
		ELYSIA_REQUEST_ID,
		getServer,
		TypeBoxError
	} = hooks

	const trace = _trace.map(x => typeof x === 'function' ? x : x.fn)

	return ${I0?"async":""} function handle(c) {
		${W.beforeHandle.length?"let be":""}
		${W.afterHandle.length?"let af":""}
		${W.mapResponse.length?"let mr":""}

		${z?"c.schema = schema; c.defs = definitions":""}
		${M}
	}`;try{return Function("hooks",M)({handler:J,hooks:OW(W),validator:Y,handleError:$.handleError,utils:{mapResponse:V8,mapCompactResponse:K0,mapEarlyResponse:u8,parseQuery:RX,parseQueryFromURL:lW,isNotEmpty:l2},error:{NotFoundError:EX,ValidationError:A8,InternalServerError:MU,ParseError:BU},schema:$.router.history,definitions:$.definitions.type,ERROR_CODE:h6,parseCookie:dW,signCookie:v6,decodeURIComponent:oW.default,ElysiaCustomStatusResponse:M0,ELYSIA_TRACE:IX,ELYSIA_REQUEST_ID:m6,getServer:()=>$.getServer(),TypeBoxError:v})}catch{let K=OW(W);console.log("[Composer] failed to generate optimized handler"),console.log("Please report the following to SaltyAom privately as it may include sensitive information about your codebase:"),console.log("---"),console.log({handler:typeof J==="function"?J.toString():J,hooks:{...K,transform:K?.transform?.map?.((L)=>L.toString()),resolve:K?.resolve?.map?.((L)=>L.toString()),beforeHandle:K?.beforeHandle?.map?.((L)=>L.toString()),afterHandle:K?.afterHandle?.map?.((L)=>L.toString()),mapResponse:K?.mapResponse?.map?.((L)=>L.toString()),parse:K?.parse?.map?.((L)=>L.toString()),error:K?.error?.map?.((L)=>L.toString()),afterResponse:K?.afterResponse?.map?.((L)=>L.toString()),stop:K?.stop?.map?.((L)=>L.toString())},validator:Y,definitions:$.definitions.type}),console.log("---"),process.exit(1)}},CW=($)=>{let X=$.config.handler?.standardHostname??!0,Z="",Q="",W=$.setHeaders;for(let S of Object.keys($.singleton.decorator))Z+=`,${S}: app.singleton.decorator.${S}`;let Y=$.router,J=$.event.trace.length>0,z=`
	const route = router.find(request.method, path) ${Y.http.root.ALL?'?? router.find("ALL", path)':""}

	if (route === null)
		return ${$.event.error.length?"app.handleError(ctx, notFound)":$.event.request.length?`new Response(error404Message, {
					status: ctx.set.status === 200 ? 404 : ctx.set.status,
					headers: ctx.set.headers
				})`:"error404.clone()"}

	ctx.params = route.params
`;z+=`if(route.store.handler) return route.store.handler(ctx)
	return (route.store.handler = route.store.compile())(ctx)
`;let B="";for(let[S,{code:_,all:b,static:x}]of Object.entries(Y.static.http.map)){if(x)B+=`case '${S}':
switch(request.method) {
${_}
${b??"default: break map"}}

`;B+=`case '${S}':
switch(request.method) {
${_}
${b??"default: break map"}}

`}let q=$.event.request.some(v8);if(Q+=`const {
		app,
		mapEarlyResponse,
		NotFoundError,
		randomId,
		handleError,
		error,
		redirect,
		ELYSIA_TRACE,
		ELYSIA_REQUEST_ID,
		getServer
	} = data

	const store = app.singleton.store
	const staticRouter = app.router.static.http
	const st = staticRouter.handlers
	const wsRouter = app.router.ws
	const router = app.router.http
	const trace = app.event.trace.map(x => typeof x === 'function' ? x : x.fn)

	const notFound = new NotFoundError()
	const hoc = app.extender.higherOrderFunctions.map(x => x.fn)

	${$.event.request.length?"const onRequest = app.event.request.map(x => x.fn)":""}
	${$.event.error.length?"":`
const error404Message = notFound.message.toString()
	const error404 = new Response(error404Message, { status: 404 });
`}

	${$.event.trace.length?`const ${$.event.trace.map((S,_)=>`tr${_} = app.event.trace[${_}].fn`).join(",")}`:""}

	${q?"async":""} function map(request) {
`,$.event.request.length)Q+="let re";if(Q+=`
const url = request.url
		const s = url.indexOf('/', ${X?11:7})
		const qi = url.indexOf('?', s + 1)
		let path
		if(qi === -1)
			path = url.substring(s)
		else
			path = url.substring(s, qi)
`,Q+=`${J?"const id = randomId()":""}
		const ctx = {
			request,
			store,
			qi,
			path,
			url,
			redirect,
			set: {
				headers: ${Object.keys(W??{}).length?"Object.assign({}, app.setHeaders)":"{}"},
				status: 200
			},
			error
			${$.inference.server?`, get server() {
							return getServer()
						}`:""}
			${J?",[ELYSIA_REQUEST_ID]: id":""}
			${Z}
		}
`,$.event.trace.length)Q+=`
ctx[ELYSIA_TRACE] = [${$.event.trace.map((S,_)=>`tr${_}(ctx)`).join(",")}]
`;let A=xX({context:"ctx",trace:$.event.trace,addFn(S){Q+=S}})("request",{attribute:"ctx",total:$.event.request.length});if($.event.request.length){Q+=`
 try {
`;for(let S=0;S<$.event.request.length;S++){let _=$.event.request[S],b=J6(_),x=v8(_),V=A.resolveChild($.event.request[S].fn.name);if(b)Q+=`re = mapEarlyResponse(
					${x?"await":""} onRequest[${S}](ctx),
					ctx.set,
					request
				)
`,V("re"),Q+=`if(re !== undefined) return re
`;else Q+=`${x?"await":""} onRequest[${S}](ctx)
`,V()}Q+=`} catch (error) {
			return app.handleError(ctx, error)
		}`}A.resolve();let O=$.router.static.ws,M=$.router.ws;if(Object.keys(O).length||M.history.length){Q+=`
			if(request.method === 'GET') {
				switch(path) {`;for(let[S,_]of Object.entries(O))Q+=`
					case '${S}':
						if(request.headers.get('upgrade') === 'websocket')
							return st[${_}](ctx)

						break`;Q+=`
				default:
					if(request.headers.get('upgrade') === 'websocket') {
						const route = wsRouter.find('ws', path)

						if(route) {
							ctx.params = route.params

							if(route.store.handler)
							    return route.store.handler(ctx)

							return (route.store.handler = route.store.compile())(ctx)
						}
					}

					break
			}
		}
`}if(Q+=`
		map: switch(path) {
			${B}

			default:
				break
		}

		${z}
	}
`,$.extender.higherOrderFunctions.length){let S="map";for(let _=0;_<$.extender.higherOrderFunctions.length;_++)S=`hoc[${_}](${S}, request)`;Q+=`return function hocMap(request) { return ${S}(request) }`}else Q+="return map";let F=tW($);return $.handleError=F,Function("data",Q)({app:$,mapEarlyResponse:u8,NotFoundError:EX,randomId:iW,handleError:F,error:zU,redirect:cW,ELYSIA_TRACE:IX,ELYSIA_REQUEST_ID:m6,getServer:()=>$.getServer()})},tW=($)=>{let X=$.event,Z="";Z+=`const {
		app: { event: { error: onErrorContainer, afterResponse: resContainer, mapResponse: _onMapResponse, trace: _trace } },
		mapResponse,
		ERROR_CODE,
		ElysiaCustomStatusResponse,
		ELYSIA_TRACE,
		ELYSIA_REQUEST_ID
	} = inject

	const trace = _trace.map(x => typeof x === 'function' ? x : x.fn)
	const onMapResponse = []

	for(let i = 0; i < _onMapResponse.length; i++)
		onMapResponse.push(_onMapResponse[i].fn ?? _onMapResponse[i])

	delete _onMapResponse

	const onError = onErrorContainer.map(x => x.fn)
	const res = resContainer.map(x => x.fn)

	return ${$.event.error.find(v8)||$.event.mapResponse.find(v8)?"async":""} function(context, error, skipGlobal) {`;let Q=$.event.trace.length>0;if(Q)Z+="\nconst id = context[ELYSIA_REQUEST_ID]\n";let W=xX({context:"context",trace:X.trace,addFn:(z)=>{Z+=z}});Z+=`
		const set = context.set
		let r

		if(!context.code)
			context.code = error.code ?? error[ERROR_CODE]

		if(!(context.error instanceof Error))
			context.error = error

		if(error instanceof ElysiaCustomStatusResponse) {
			error.status = error.code
			error.message = error.response
		}
`;let Y=Q||X.afterResponse.length>0||X.afterResponse.length>0?"context.response = ":"";for(let z=0;z<$.event.error.length;z++){let B=$.event.error[z],q=`${v8(B)?"await ":""}onError[${z}](context)`;if(Z+="\nif(skipGlobal !== true) {\n",J6(B)){Z+=`r = ${q}; if(r !== undefined) {
				if(r instanceof Response) return r

				if(r instanceof ElysiaCustomStatusResponse) {
					error.status = error.code
					error.message = error.response
				}

				if(set.status === 200) set.status = error.status
`;let G=W("mapResponse",{total:X.mapResponse.length,name:"context"});if(X.mapResponse.length)for(let A=0;A<X.mapResponse.length;A++){let O=X.mapResponse[A],M=G.resolveChild(O.fn.name);Z+=`
context.response = r
						r = ${s0(O)?"await":""} onMapResponse[${A}](context)
`,M()}G.resolve(),Z+=`return mapResponse(${Y} r, set, context.request)}
`}else Z+=q+"\n";Z+="\n}\n"}Z+=`if(error.constructor.name === "ValidationError" || error.constructor.name === "TransformDecodeError") {
	    const reportedError = error.error ?? error
		set.status = reportedError.status ?? 422
		return new Response(
			reportedError.message,
			{
				headers: Object.assign(
					{ 'content-type': 'application/json'},
					set.headers
				),
				status: set.status
			}
		)
	} else {
		if(error.code && typeof error.status === "number")
			return new Response(
				error.message,
				{ headers: set.headers, status: error.status }
			)
`;let J=W("mapResponse",{total:X.mapResponse.length,name:"context"});if(X.mapResponse.length)for(let z=0;z<X.mapResponse.length;z++){let B=X.mapResponse[z],q=J.resolveChild(B.fn.name);Z+=`
context.response = error
			error = ${s0(B)?"await":""} onMapResponse[${z}](context)
`,q()}return J.resolve(),Z+=`
return mapResponse(${Y} error, set, context.request)
}
}`,Function("inject",Z)({app:$,mapResponse:V8,ERROR_CODE:h6,ElysiaCustomStatusResponse:M0,ELYSIA_TRACE:IX,ELYSIA_REQUEST_ID:m6})},jW=($)=>async(X)=>{let Z=X.url,Q=Z.indexOf("/",11),W=Z.indexOf("?",Q+1),Y=W===-1?Z.substring(Q):Z.substring(Q,W),J={cookie:{},status:200,headers:{}},z=Object.assign({},$.singleton.decorator,{set:J,store:$.singleton.store,request:X,path:Y,qi:W,redirect:cW});try{for(let b=0;b<$.event.request.length;b++){let x=$.event.request[b].fn,V=x(z);if(V instanceof Promise)V=await V;if(V=u8(V,J),V)return z.response=V}let B=$.router.dynamic.find(X.method,Y)??$.router.dynamic.find("ALL",Y);if(!B)throw new EX;let{handle:q,hooks:G,validator:A,content:O}=B.store,M;if(X.method!=="GET"&&X.method!=="HEAD")if(O)switch(O){case"application/json":M=await X.json();break;case"text/plain":M=await X.text();break;case"application/x-www-form-urlencoded":M=RX(await X.text());break;case"application/octet-stream":M=await X.arrayBuffer();break;case"multipart/form-data":M={};let b=await X.formData();for(let x of b.keys()){if(M[x])continue;let V=b.getAll(x);if(V.length===1)M[x]=V[0];else M[x]=V}break}else{let b=X.headers.get("content-type");if(b){let x=b.indexOf(";");if(x!==-1)b=b.slice(0,x);z.contentType=b;for(let V=0;V<G.parse.length;V++){let r=G.parse[V].fn,u=r(z,b);if(u instanceof Promise)u=await u;if(u){M=u;break}}if(delete z.contentType,M===void 0)switch(b){case"application/json":M=await X.json();break;case"text/plain":M=await X.text();break;case"application/x-www-form-urlencoded":M=RX(await X.text());break;case"application/octet-stream":M=await X.arrayBuffer();break;case"multipart/form-data":M={};let V=await X.formData();for(let r of V.keys()){if(M[r])continue;let u=V.getAll(r);if(u.length===1)M[r]=u[0];else M[r]=u}break}}}z.body=M,z.params=B?.params||void 0,z.query=W===-1?{}:lW(Z.substring(W+1)),z.headers={};for(let[b,x]of X.headers.entries())z.headers[b]=x;let F=Object.assign({},$.config?.cookie,A?.cookie?.config),S=X.headers.get("cookie");z.cookie=await dW(z.set,S,F?{secrets:F.secrets!==void 0?typeof F.secrets==="string"?F.secrets:F.secrets.join(","):void 0,sign:F.sign===!0?!0:F.sign!==void 0?typeof F.sign==="string"?F.sign:F.sign.join(","):void 0}:void 0);for(let b=0;b<G.transform.length;b++){let x=G.transform[b],V=x.fn(z);if(x.subType==="derive")if(V instanceof Promise)Object.assign(z,await V);else Object.assign(z,V);else if(V instanceof Promise)await V}if(A){if(A.createHeaders?.()){let b={};for(let x in X.headers)b[x]=X.headers.get(x);if(A.headers.Check(b)===!1)throw new A8("header",A.headers,b)}else if(A.headers?.Decode)z.headers=A.headers.Decode(z.headers);if(A.createParams?.()?.Check(z.params)===!1)throw new A8("params",A.params,z.params);else if(A.params?.Decode)z.params=A.params.Decode(z.params);if(A.createQuery?.()?.Check(z.query)===!1)throw new A8("query",A.query,z.query);else if(A.query?.Decode)z.query=A.query.Decode(z.query);if(A.createCookie?.()){let b={};for(let[x,V]of Object.entries(z.cookie))b[x]=V.value;if(A.cookie.Check(b)===!1)throw new A8("cookie",A.cookie,b);else if(A.cookie?.Decode)b=A.cookie.Decode(b)}if(A.createBody?.()?.Check(M)===!1)throw new A8("body",A.body,M);else if(A.body?.Decode)z.body=A.body.Decode(M)}for(let b=0;b<G.beforeHandle.length;b++){let x=G.beforeHandle[b],V=x.fn(z);if(x.subType==="resolve"){if(V instanceof Promise)Object.assign(z,await V);else Object.assign(z,V);continue}else if(V instanceof Promise)V=await V;if(V!==void 0){z.response=V;for(let u=0;u<G.afterHandle.length;u++){let S8=G.afterHandle[u].fn(z);if(S8 instanceof Promise)S8=await S8;if(S8)V=S8}let r=u8(V,z.set);if(r)return z.response=r}}let _=q(z);if(_ instanceof Promise)_=await _;if(!G.afterHandle.length){let b=_ instanceof M0?_.code:J.status?typeof J.status==="string"?B6[J.status]:J.status:200,x=A?.createResponse?.()?.[b];if(x?.Check(_)===!1)throw new A8("response",x,_);else if(x?.Decode)_=x.Decode(_)}else{z.response=_;for(let b=0;b<G.afterHandle.length;b++){let x=G.afterHandle[b].fn(z);if(x instanceof Promise)x=await x;let V=u8(x,z.set);if(V!==void 0){let r=A?.response?.[V.status];if(r?.Check(V)===!1)throw new A8("response",r,V);else if(r?.Decode)_=r.Decode(_);return z.response=V}}}if(z.set.cookie&&F?.sign){let b=!F.secrets?void 0:typeof F.secrets==="string"?F.secrets:F.secrets[0];if(F.sign===!0)for(let[x,V]of Object.entries(z.set.cookie))z.set.cookie[x].value=await v6(V.value,"${secret}");else{let x=A?.cookie?.schema?.properties;for(let V of F.sign){if(!(V in x))continue;if(z.set.cookie[V]?.value)z.set.cookie[V].value=await v6(z.set.cookie[V].value,b)}}}return z.response=V8(_,z.set)}catch(B){let q=B instanceof E6&&B.error?B.error:B;if(q.status)J.status=q.status;return $.handleError(z,q)}finally{for(let B of $.event.afterResponse)await B.fn(z)}},AU=($)=>async(X,Z)=>{let Q=Object.assign(X,{error:Z,code:Z.code});Q.set=X.set;for(let W=0;W<$.event.error.length;W++){let J=$.event.error[W].fn(Q);if(J instanceof Promise)J=await J;if(J!==void 0&&J!==null)return X.response=V8(J,X.set)}return new Response(typeof Z.cause==="string"?Z.cause:Z.message,{headers:X.set.headers,status:Z.status??500})},u6=class ${constructor(X={}){if(this.server=null,this.dependencies={},this._routes={},this._types={Prefix:"",Scoped:!1,Singleton:{},Definitions:{},Metadata:{}},this._ephemeral={},this._volatile={},this.version=KW,this.singleton={decorator:{},store:{},derive:{},resolve:{}},this.definitions={type:{},error:{}},this.extender={macros:[],higherOrderFunctions:[]},this.validator={global:null,scoped:null,local:null,getCandidate(){return W6(W6(this.global,this.scoped),this.local)}},this.event={start:[],request:[],parse:[],transform:[],beforeHandle:[],afterHandle:[],mapResponse:[],afterResponse:[],trace:[],error:[],stop:[]},this.telemetry={stack:void 0},this.router={http:new PX,ws:new PX,dynamic:new PX,static:{http:{static:{},handlers:[],map:{},all:""},ws:{}},history:[]},this.routeTree=new Map,this.inference={body:!1,cookie:!1,headers:!1,query:!1,set:!1,server:!1},this.handle=async(Z)=>this.fetch(Z),this.fetch=(Z)=>{return(this.fetch=this.config.aot?CW(this):jW(this))(Z)},this.handleError=async(Z,Q)=>(this.handleError=this.config.aot?tW(this):AU(this))(Z,Q),this.outerErrorHandler=(Z)=>new Response(Z.message||Z.name||"Error",{status:Z?.status??500}),this.listen=(Z,Q)=>{if(typeof Bun==="undefined")throw new Error(".listen() is designed to run on Bun only. If you are running Elysia in other environment please use a dedicated plugin or export the handler via Elysia.fetch");if(this.compile(),typeof Z==="string"){if(!bX(Z))throw new Error("Port must be a numeric value");Z=parseInt(Z)}let W=this.fetch,Y=typeof Z==="object"?{development:!p6,reusePort:!0,...this.config.serve||{},...Z||{},static:this.router.static.http.static,websocket:{...this.config.websocket||{},...SW||{}},fetch:W,error:this.outerErrorHandler}:{development:!p6,reusePort:!0,...this.config.serve||{},static:this.router.static.http.static,websocket:{...this.config.websocket||{},...SW||{}},port:Z,fetch:W,error:this.outerErrorHandler};this.server=Bun?.serve(Y);for(let J=0;J<this.event.start.length;J++)this.event.start[J].fn(this);if(Q)Q(this.server);return process.on("beforeExit",()=>{if(this.server){this.server.stop(),this.server=null;for(let J=0;J<this.event.stop.length;J++)this.event.stop[J].fn(this)}}),this.promisedModules.then(()=>{Bun?.gc(!1)}),this},this.stop=async(Z)=>{if(!this.server)throw new Error("Elysia isn't running. Call `app.listen` to start the server.");if(this.server){if(this.server.stop(Z),this.server=null,this.event.stop.length)for(let Q=0;Q<this.event.stop.length;Q++)this.event.stop[Q].fn(this)}},X.tags)if(!X.detail)X.detail={tags:X.tags};else X.detail.tags=X.tags;if(X.nativeStaticResponse===void 0)X.nativeStaticResponse=!0;if(this.config={},this.applyConfig(X??{}),X?.analytic&&(X?.name||X?.seed!==void 0))this.telemetry.stack=new Error().stack}static{this.version=KW}get store(){return this.singleton.store}get decorator(){return this.singleton.decorator}get _scoped(){return this.config.scoped}get routes(){return this.router.history}getGlobalRoutes(){return this.router.history}getServer(){return this.server}get promisedModules(){if(!this._promisedModules)this._promisedModules=new YU;return this._promisedModules}env(X,Z=Bun?.env??process.env){if(G2(X,{dynamic:!0,additionalProperties:!0,coerce:!0}).Check(Z)===!1){let W=new A8("env",X,Z);throw new Error(W.all.map((Y)=>Y.summary).join("\n"))}return this}wrap(X){return this.extender.higherOrderFunctions.push({checksum:Y6(JSON.stringify({name:this.config.name,seed:this.config.seed,content:X.toString()})),fn:X}),this}applyMacro(X){if(this.extender.macros.length){let Z=QU({globalHook:this.event,localHook:X}),Q={events:{global:this.event,local:X},onParse:Z("parse"),onTransform:Z("transform"),onBeforeHandle:Z("beforeHandle"),onAfterHandle:Z("afterHandle"),mapResponse:Z("mapResponse"),onAfterResponse:Z("afterResponse"),onError:Z("error")};for(let W of this.extender.macros)ZU(W.fn(Q),X)}}applyConfig(X){return this.config={prefix:"",aot:!0,strictPath:!1,global:!1,analytic:!1,normalize:!0,...X,cookie:{path:"/",...X?.cookie},experimental:X?.experimental??{},seed:X?.seed===void 0?"":X?.seed},this}get models(){let X={};for(let[Z,Q]of Object.entries(this.definitions.type))X[Z]=G2(Q);return X}add(X,Z,Q,W,{allowMeta:Y=!1,skipPrefix:J=!1}={allowMeta:!1,skipPrefix:!1}){if(W=JU(W),Z!==""&&Z.charCodeAt(0)!==47)Z="/"+Z;if(this.config.prefix&&!J&&!this.config.scoped)Z=this.config.prefix+Z;if(W?.type)switch(W.type){case"text":W.type="text/plain";break;case"json":W.type="application/json";break;case"formdata":W.type="multipart/form-data";break;case"urlencoded":W.type="application/x-www-form-urlencoded";break;case"arrayBuffer":W.type="application/octet-stream";break;default:break}let z=this.definitions.type,B=!this.config.aot,q={...this.validator.getCandidate()},G={body:W?.body??q?.body,headers:W?.headers??q?.headers,params:W?.params??q?.params,query:W?.query??q?.query,cookie:W?.cookie??q?.cookie,response:W?.response??q?.response},A=()=>G.cookie?uW({validator:G.cookie,defaultConfig:this.config.cookie,config:G.cookie?.config??{},dynamic:B,models:z}):void 0,O=this.config.normalize,M=this.config.precompile===!0||typeof this.config.precompile==="object"&&this.config.precompile.schema===!0?{body:G2(G.body,{dynamic:B,models:z,normalize:O,additionalCoerce:wW()}),headers:G2(G.headers,{dynamic:B,models:z,additionalProperties:!this.config.normalize,coerce:!0,additionalCoerce:o0()}),params:G2(G.params,{dynamic:B,models:z,coerce:!0,additionalCoerce:o0()}),query:G2(G.query,{dynamic:B,models:z,normalize:O,coerce:!0,additionalCoerce:o0()}),cookie:A(),response:qW(G.response,{dynamic:B,models:z,normalize:O})}:{createBody(){if(this.body)return this.body;return this.body=G2(G.body,{dynamic:B,models:z,normalize:O,additionalCoerce:wW()})},createHeaders(){if(this.headers)return this.headers;return this.headers=G2(G.headers,{dynamic:B,models:z,additionalProperties:!O,coerce:!0,additionalCoerce:o0()})},createParams(){if(this.params)return this.params;return this.params=G2(G.params,{dynamic:B,models:z,coerce:!0,additionalCoerce:o0()})},createQuery(){if(this.query)return this.query;return this.query=G2(G.query,{dynamic:B,models:z,coerce:!0,additionalCoerce:o0()})},createCookie(){if(this.cookie)return this.cookie;return this.cookie=A()},createResponse(){if(this.response)return this.response;return this.response=qW(G.response,{dynamic:B,models:z,normalize:O})}},F=Z.endsWith("/")?Z.slice(0,Z.length-1):Z+"/";if(W=T2(W,q),W.tags)if(!W.detail)W.detail={tags:W.tags};else W.detail.tags=W.tags;if(l2(this.config.detail))W.detail=U2(Object.assign({},this.config.detail),W.detail);this.applyMacro(W);let S=T2(this.event,W);if(this.config.aot===!1){if(this.router.dynamic.add(X,Z,{validator:M,hooks:S,content:W?.type,handle:Q}),this.config.strictPath===!1)this.router.dynamic.add(X,F,{validator:M,hooks:S,content:W?.type,handle:Q});this.router.history.push({method:X,path:Z,composed:null,handler:Q,hooks:S});return}let _=this.config.precompile===!0||typeof this.config.precompile==="object"&&this.config.precompile.compose===!0,b=FX(this.inference),x=typeof Q!=="function"?lG(Q,S,this.setHeaders):void 0,V=typeof Q!=="function"?oG(Q,S,this.setHeaders):void 0;if(this.config.nativeStaticResponse===!0&&V&&(X==="GET"||X==="ALL"))this.router.static.http.static[Z]=V();let r=()=>HU({app:this,path:Z,method:X,localHook:T2(W),hooks:S,validator:M,handler:Q,allowMeta:Y,inference:b}),u=_?r():(Y8)=>{return r()(Y8)},S8=this.router.history.length;if(this.routeTree.has(X+Z))for(let Y8=0;Y8<this.router.history.length;Y8++){let t=this.router.history[Y8];if(t.path===Z&&t.method===X){let E8=this.router.history.splice(Y8,1)[0];if(E8&&this.routeTree.has(E8?.method+E8?.path))this.routeTree.delete(E8.method+E8.path)}}else this.routeTree.set(X+Z,S8);this.router.history.push({method:X,path:Z,composed:u,handler:Q,hooks:S});let N8=this.router.static.http,q8={handler:_?u:void 0,compile:r};if(X==="$INTERNALWS"){let Y8=this.config.strictPath?void 0:Z.endsWith("/")?Z.slice(0,Z.length-1):Z+"/";if(Z.indexOf(":")===-1&&Z.indexOf("*")===-1){let t=N8.handlers.length;if(N8.handlers.push((E8)=>(N8.handlers[t]=r())(E8)),this.router.static.ws[Z]=t,Y8)this.router.static.ws[Y8]=t}else if(this.router.ws.add("ws",Z,q8),Y8)this.router.ws.add("ws",Y8,q8);return}if(Z.indexOf(":")===-1&&Z.indexOf("*")===-1){let Y8=N8.handlers.length;if(N8.handlers.push(x??((E8)=>(N8.handlers[Y8]=r())(E8))),!N8.map[Z])N8.map[Z]={code:""};let t=x?"":"ctx";if(X==="ALL")N8.map[Z].all=`default: return st[${Y8}](${t})
`;else N8.map[Z].code=`case '${X}': return st[${Y8}](${t})
${N8.map[Z].code}`;if(!this.config.strictPath){if(!N8.map[F])N8.map[F]={code:""};if(this.config.nativeStaticResponse===!0&&V&&(X==="GET"||X==="ALL"))this.router.static.http.static[F]=V();if(X==="ALL")N8.map[F].all=`default: return st[${Y8}](${t})
`;else N8.map[F].code=`case '${X}': return st[${Y8}](${t})
${N8.map[F].code}`}}else if(this.router.http.add(X,Z,q8),!this.config.strictPath){let Y8=Z.endsWith("/")?Z.slice(0,Z.length-1):Z+"/";if(this.config.nativeStaticResponse===!0&&x&&(X==="GET"||X==="ALL"))this.router.static.http.static[Y8]=x();this.router.http.add(X,Y8,q8)}}headers(X){if(!X)return this;if(!this.setHeaders)this.setHeaders={};return this.setHeaders=U2(this.setHeaders,X),this}onStart(X){return this.on("start",X),this}onRequest(X){return this.on("request",X),this}onParse(X,Z){if(!Z)return this.on("parse",X);return this.on(X,"parse",Z)}onTransform(X,Z){if(!Z)return this.on("transform",X);return this.on(X,"transform",Z)}resolve(X,Z){if(!Z)Z=X,X={as:"local"};let Q={subType:"resolve",fn:Z};return this.onBeforeHandle(X,Q)}mapResolve(X,Z){if(!Z)Z=X,X={as:"local"};let Q={subType:"mapResolve",fn:Z};return this.onBeforeHandle(X,Q)}onBeforeHandle(X,Z){if(!Z)return this.on("beforeHandle",X);return this.on(X,"beforeHandle",Z)}onAfterHandle(X,Z){if(!Z)return this.on("afterHandle",X);return this.on(X,"afterHandle",Z)}mapResponse(X,Z){if(!Z)return this.on("mapResponse",X);return this.on(X,"mapResponse",Z)}onAfterResponse(X,Z){if(!Z)return this.on("afterResponse",X);return this.on(X,"afterResponse",Z)}trace(X,Z){if(!Z)Z=X,X={as:"local"};if(!Array.isArray(Z))Z=[Z];for(let Q of Z)this.on(X,"trace",GU(Q));return this}error(X,Z){switch(typeof X){case"string":return Z.prototype[h6]=X,this.definitions.error[X]=Z,this;case"function":return this.definitions.error=X(this.definitions.error),this}for(let[Q,W]of Object.entries(X))W.prototype[h6]=Q,this.definitions.error[Q]=W;return this}onError(X,Z){if(!Z)return this.on("error",X);return this.on(X,"error",Z)}onStop(X){return this.on("stop",X),this}on(X,Z,Q){let W;switch(typeof X){case"string":W=X,Q=Z;break;case"object":if(W=Z,!Array.isArray(Z)&&typeof Z==="object")Q=Z;break}if(Array.isArray(Q))Q=g2(Q);else if(typeof Q==="function")Q=[{fn:Q}];else Q=[Q];let Y=Q;for(let J of Y)J.scope=typeof X==="string"?"local":X?.as??"local";if(W!=="trace")EW({[W]:Y.map((J)=>J.fn)},this.inference);for(let J of Y){let z=$U(J,"global",{skipIfHasType:!0});switch(W){case"start":this.event.start.push(z);break;case"request":this.event.request.push(z);break;case"parse":this.event.parse.push(z);break;case"transform":this.event.transform.push(z);break;case"beforeHandle":this.event.beforeHandle.push(z);break;case"afterHandle":this.event.afterHandle.push(z);break;case"mapResponse":this.event.mapResponse.push(z);break;case"afterResponse":this.event.afterResponse.push(z);break;case"trace":this.event.trace.push(z);break;case"error":this.event.error.push(z);break;case"stop":this.event.stop.push(z);break}}return this}propagate(){return a8(this.event.parse),a8(this.event.transform),a8(this.event.beforeHandle),a8(this.event.afterHandle),a8(this.event.mapResponse),a8(this.event.afterResponse),a8(this.event.trace),a8(this.event.error),this}as(X){let Z={plugin:"scoped",global:"global"}[X];if(a8(this.event.parse,Z),a8(this.event.transform,Z),a8(this.event.beforeHandle,Z),a8(this.event.afterHandle,Z),a8(this.event.mapResponse,Z),a8(this.event.afterResponse,Z),a8(this.event.trace,Z),a8(this.event.error,Z),X==="plugin")this.validator.scoped=W6(this.validator.scoped,this.validator.local),this.validator.local=null;else if(X==="global")this.validator.global=W6(this.validator.global,W6(this.validator.scoped,this.validator.local)),this.validator.scoped=null,this.validator.local=null;return this}group(X,Z,Q){let W=new $({...this.config,prefix:""});W.singleton={...this.singleton},W.definitions={...this.definitions},W.getServer=()=>this.getServer(),W.inference=FX(this.inference),W.extender={...this.extender};let Y=typeof Z==="object",J=(Y?Q:Z)(W);if(this.singleton=U2(this.singleton,W.singleton),this.definitions=U2(this.definitions,W.definitions),J.event.request.length)this.event.request=[...this.event.request||[],...J.event.request||[]];if(J.event.mapResponse.length)this.event.mapResponse=[...this.event.mapResponse||[],...J.event.mapResponse||[]];return this.model(J.definitions.type),Object.values(W.router.history).forEach(({method:z,path:B,handler:q,hooks:G})=>{if(B=(Y?"":this.config.prefix)+X+B,Y){let A=Z,O=G;this.add(z,B,q,T2(A,{...O||{},error:!O.error?J.event.error:Array.isArray(O.error)?[...O.error||{},...J.event.error||{}]:[O.error,...J.event.error||{}]}))}else this.add(z,B,q,T2(G,{error:J.event.error}),{skipPrefix:!0})}),this}guard(X,Z){if(!Z){if(typeof X==="object"){this.applyMacro(X);let Y=X.as??"local";if(this.validator[Y]={body:X.body??this.validator[Y]?.body,headers:X.headers??this.validator[Y]?.headers,params:X.params??this.validator[Y]?.params,query:X.query??this.validator[Y]?.query,response:X.response??this.validator[Y]?.response,cookie:X.cookie??this.validator[Y]?.cookie},X.parse)this.on({as:Y},"parse",X.parse);if(X.transform)this.on({as:Y},"transform",X.transform);if(X.beforeHandle)this.on({as:Y},"beforeHandle",X.beforeHandle);if(X.afterHandle)this.on({as:Y},"afterHandle",X.afterHandle);if(X.mapResponse)this.on({as:Y},"mapResponse",X.mapResponse);if(X.afterResponse)this.on({as:Y},"afterResponse",X.afterResponse);if(X.error)this.on({as:Y},"error",X.error);if(X.detail)if(this.config.detail)this.config.detail=U2(Object.assign({},this.config.detail),X.detail);else this.config.detail=X.detail;if(X?.tags)if(!this.config.detail)this.config.detail={tags:X.tags};else this.config.detail.tags=X.tags;return this}return this.guard({},X)}let Q=new $({...this.config,prefix:""});Q.singleton={...this.singleton},Q.definitions={...this.definitions},Q.inference=FX(this.inference),Q.extender={...this.extender};let W=Z(Q);if(this.singleton=U2(this.singleton,Q.singleton),this.definitions=U2(this.definitions,Q.definitions),W.getServer=()=>this.server,W.event.request.length)this.event.request=[...this.event.request||[],...W.event.request||[]];if(W.event.mapResponse.length)this.event.mapResponse=[...this.event.mapResponse||[],...W.event.mapResponse||[]];return this.model(W.definitions.type),Object.values(Q.router.history).forEach(({method:Y,path:J,handler:z,hooks:B})=>{this.add(Y,J,z,T2(X,{...B||{},error:!B.error?W.event.error:Array.isArray(B.error)?[...B.error||{},...W.event.error||[]]:[B.error,...W.event.error||[]]}))}),this}use(X,Z){if(Z?.scoped)return this.guard({},(Q)=>Q.use(X));if(Array.isArray(X)){let Q=this;for(let W of X)Q=this.use(W);return Q}if(X instanceof Promise)return this.promisedModules.add(X.then((Q)=>{if(typeof Q==="function")return Q(this);if(Q instanceof $)return this._use(Q).compile();if(typeof Q.default==="function")return Q.default(this);if(Q.default instanceof $)return this._use(Q.default);throw new Error('Invalid plugin type. Expected Elysia instance, function, or module with "default" as Elysia instance or function that returns Elysia instance.')}).then((Q)=>Q.compile())),this;return this._use(X)}_use(X){if(typeof X==="function"){let Y=X(this);if(Y instanceof Promise)return this.promisedModules.add(Y.then((J)=>{if(J instanceof $){J.getServer=()=>this.getServer(),J.getGlobalRoutes=()=>this.getGlobalRoutes(),J.model(this.definitions.type),J.error(this.definitions.error);for(let{method:z,path:B,handler:q,hooks:G}of Object.values(J.router.history))this.add(z,B,q,T2(G,{error:J.event.error}));return J.compile(),J}if(typeof J==="function")return J(this);if(typeof J.default==="function")return J.default(this);return this._use(J)}).then((J)=>J.compile())),this;return Y}let{name:Z,seed:Q}=X.config;X.getServer=()=>this.getServer(),X.getGlobalRoutes=()=>this.getGlobalRoutes(),X.model(this.definitions.type),X.error(this.definitions.error);let W=X.config.scoped;if(W){if(Z){if(!(Z in this.dependencies))this.dependencies[Z]=[];let J=Q!==void 0?Y6(Z+JSON.stringify(Q)):0;if(this.dependencies[Z].some(({checksum:z})=>J===z))return this;this.dependencies[Z].push(!this.config?.analytic?{name:X.config.name,seed:X.config.seed,checksum:J,dependencies:X.dependencies}:{name:X.config.name,seed:X.config.seed,checksum:J,dependencies:X.dependencies,stack:X.telemetry.stack,routes:X.router.history,decorators:X.singleton.decorator,store:X.singleton.store,type:X.definitions.type,error:X.definitions.error,derive:X.event.transform.filter((z)=>z.subType==="derive").map((z)=>({fn:z.fn.toString(),stack:new Error().stack??""})),resolve:X.event.transform.filter((z)=>z.subType==="derive").map((z)=>({fn:z.fn.toString(),stack:new Error().stack??""}))})}X.extender.macros=this.extender.macros.concat(X.extender.macros);let Y=[];for(let J=0;J<X.extender.macros.length;J++){let z=this.extender.macros[J];if(Y.includes(z.checksum))X.extender.macros.splice(J,1),J--;Y.push(z.checksum)}if(X.onRequest((J)=>{Object.assign(J,this.singleton.decorator),Object.assign(J.store,this.singleton.store)}),X.event.trace.length)X.event.trace.push(...X.event.trace);if(!X.config.prefix)console.warn("It's recommended to use scoped instance with a prefix to prevent collision routing with other instance.");if(X.event.error.length)X.event.error.push(...this.event.error);if(X.config.aot)X.compile();if(W===!0&&X.config.prefix){this.mount(X.config.prefix+"/",X.fetch);for(let J of X.router.history)this.routeTree.set(J.method+`${X.config.prefix}${J.path}`,this.router.history.length),this.router.history.push({...J,path:`${X.config.prefix}${J.path}`,hooks:T2(J.hooks,{error:this.event.error})})}else{this.mount(X.fetch);for(let J of X.router.history)this.routeTree.set(J.method+`${X.config.prefix}${J.path}`,this.router.history.length),this.router.history.push({...J,path:`${X.config.prefix}${J.path}`,hooks:T2(J.hooks,{error:this.event.error})})}return this}else{if(this.headers(X.setHeaders),Z){if(!(Z in this.dependencies))this.dependencies[Z]=[];let J=Q!==void 0?Y6(Z+JSON.stringify(Q)):0;if(!this.dependencies[Z].some(({checksum:z})=>J===z))this.extender.macros=this.extender.macros.concat(X.extender.macros),this.extender.higherOrderFunctions=this.extender.higherOrderFunctions.concat(X.extender.higherOrderFunctions)}else this.extender.macros=this.extender.macros.concat(X.extender.macros),this.extender.higherOrderFunctions=this.extender.higherOrderFunctions.concat(X.extender.higherOrderFunctions);LW(this.extender.macros),LW(this.extender.higherOrderFunctions);let Y=[];for(let J=0;J<this.extender.higherOrderFunctions.length;J++){let z=this.extender.higherOrderFunctions[J];if(z.checksum){if(Y.includes(z.checksum))this.extender.higherOrderFunctions.splice(J,1),J--;Y.push(z.checksum)}}this.inference={body:this.inference.body||X.inference.body,cookie:this.inference.cookie||X.inference.cookie,headers:this.inference.headers||X.inference.headers,query:this.inference.query||X.inference.query,set:this.inference.set||X.inference.set,server:this.inference.server||X.inference.server}}this.decorate(X.singleton.decorator),this.state(X.singleton.store),this.model(X.definitions.type),this.error(X.definitions.error),X.extender.macros=this.extender.macros.concat(X.extender.macros);for(let{method:Y,path:J,handler:z,hooks:B}of Object.values(X.router.history))this.add(Y,J,z,T2(B,{error:X.event.error}));if(!W)if(Z){if(!(Z in this.dependencies))this.dependencies[Z]=[];let Y=Q!==void 0?Y6(Z+JSON.stringify(Q)):0;if(this.dependencies[Z].some(({checksum:J})=>Y===J))return this;this.dependencies[Z].push(!this.config?.analytic?{name:X.config.name,seed:X.config.seed,checksum:Y,dependencies:X.dependencies}:{name:X.config.name,seed:X.config.seed,checksum:Y,dependencies:X.dependencies,stack:X.telemetry.stack,routes:X.router.history,decorators:X.singleton,store:X.singleton.store,type:X.definitions.type,error:X.definitions.error,derive:X.event.transform.filter((J)=>J?.subType==="derive").map((J)=>({fn:J.toString(),stack:new Error().stack??""})),resolve:X.event.transform.filter((J)=>J?.subType==="resolve").map((J)=>({fn:J.toString(),stack:new Error().stack??""}))}),this.event=HW(this.event,AW(X.event),Y)}else this.event=HW(this.event,AW(X.event));return this.validator.global=T2(this.validator.global,{...X.validator.global}),this.validator.local=T2(this.validator.local,{...X.validator.scoped}),this}macro(X){let Z={checksum:Y6(JSON.stringify({name:this.config.name,seed:this.config.seed,content:X.toString()})),fn:X};return this.extender.macros.push(Z),this}mount(X,Z){if(X instanceof $||typeof X==="function"||X.length===0||X==="/"){let Y=typeof X==="function"?X:X instanceof $?X.compile().fetch:Z instanceof $?Z.compile().fetch:Z,J=async({request:z,path:B})=>{if(z.method==="GET"||z.method==="HEAD"||!z.headers.get("content-type"))return Y(new Request(f6(z.url,B||"/"),z));return Y(new Request(f6(z.url,B||"/"),{...z,body:await z.arrayBuffer()}))};return this.all("/*",J,{type:"none"}),this}let Q=X.length;if(Z instanceof $)Z=Z.compile().fetch;let W=async({request:Y,path:J})=>{if(Y.method==="GET"||Y.method==="HEAD"||!Y.headers.get("content-type"))return Z(new Request(f6(Y.url,J.slice(Q)||"/"),Y));return Z(new Request(f6(Y.url,J.slice(Q)||"/"),{...Y,body:await Y.arrayBuffer()}))};return this.all(X,W,{type:"none"}),this.all(X+(X.endsWith("/")?"*":"/*"),W,{type:"none"}),this}get(X,Z,Q){return this.add("GET",X,Z,Q),this}post(X,Z,Q){return this.add("POST",X,Z,Q),this}put(X,Z,Q){return this.add("PUT",X,Z,Q),this}patch(X,Z,Q){return this.add("PATCH",X,Z,Q),this}delete(X,Z,Q){return this.add("DELETE",X,Z,Q),this}options(X,Z,Q){return this.add("OPTIONS",X,Z,Q),this}all(X,Z,Q){return this.add("ALL",X,Z,Q),this}head(X,Z,Q){return this.add("HEAD",X,Z,Q),this}connect(X,Z,Q){return this.add("CONNECT",X,Z,Q),this}route(X,Z,Q,W){return this.add(X.toUpperCase(),Z,Q,W,W?.config),this}ws(X,Z){let Q=Z.transformMessage?Array.isArray(Z.transformMessage)?Z.transformMessage:[Z.transformMessage]:void 0,W=null,Y=G2(Z?.body,{models:this.definitions.type,normalize:this.config.normalize}),J=G2(Z?.response,{models:this.definitions.type,normalize:this.config.normalize}),z=(B)=>{if(typeof B==="string"){let q=B?.charCodeAt(0);if(q===47||q===123)try{B=JSON.parse(B)}catch{}else if(bX(B))B=+B}if(Q?.length)for(let q=0;q<Q.length;q++){let G=Q[q](B);if(G!==void 0)B=G}return B};return this.route("$INTERNALWS",X,(B)=>{let{set:q,path:G,qi:A,headers:O,query:M,params:F}=B;if(W===null)W=this.getServer();if(W?.upgrade(B.request,{headers:typeof Z.upgrade==="function"?Z.upgrade(B):Z.upgrade,data:{validator:J,open(S){Z.open?.(new y6(S,B))},message:(S,_)=>{let b=z(_);if(Y?.Check(b)===!1)return void S.send(new A8("message",Y,b).message);Z.message?.(new y6(S,B),b)},drain(S){Z.drain?.(new y6(S,B))},close(S,_,b){Z.close?.(new y6(S,B),_,b)}}}))return;return q.status=400,"Expected a websocket connection"},{beforeHandle:Z.beforeHandle,transform:Z.transform,headers:Z.headers,params:Z.params,query:Z.query}),this}state(X,Z,Q){if(Z===void 0)Q=X,X={as:"append"},Z="";else if(Q===void 0){if(typeof X==="string")Q=Z,Z=X,X={as:"append"};else if(typeof X==="object")Q=Z,Z=""}let{as:W}=X;if(typeof Z!=="string")return this;switch(typeof Q){case"object":if(Z){if(Z in this.singleton.store)this.singleton.store[Z]=U2(this.singleton.store[Z],Q,{override:W==="override"});else this.singleton.store[Z]=Q;return this}if(Q===null)return this;return this.singleton.store=U2(this.singleton.store,Q,{override:W==="override"}),this;case"function":if(Z){if(W==="override"||!(Z in this.singleton.store))this.singleton.store[Z]=Q}else this.singleton.store=Q(this.singleton.store);return this;default:if(W==="override"||!(Z in this.singleton.store))this.singleton.store[Z]=Q;return this}}decorate(X,Z,Q){if(Z===void 0)Q=X,X={as:"append"},Z="";else if(Q===void 0){if(typeof X==="string")Q=Z,Z=X,X={as:"append"};else if(typeof X==="object")Q=Z,Z=""}let{as:W}=X;if(typeof Z!=="string")return this;switch(typeof Q){case"object":if(Z){if(Z in this.singleton.decorator)this.singleton.decorator[Z]=U2(this.singleton.decorator[Z],Q,{override:W==="override"});else this.singleton.decorator[Z]=Q;return this}if(Q===null)return this;return this.singleton.decorator=U2(this.singleton.decorator,Q,{override:W==="override"}),this;case"function":if(Z){if(W==="override"||!(Z in this.singleton.decorator))this.singleton.decorator[Z]=Q}else this.singleton.decorator=Q(this.singleton.decorator);return this;default:if(W==="override"||!(Z in this.singleton.decorator))this.singleton.decorator[Z]=Q;return this}}derive(X,Z){if(!Z)Z=X,X={as:"local"};let Q={subType:"derive",fn:Z};return this.onTransform(X,Q)}model(X,Z){switch(typeof X){case"object":return Object.entries(X).forEach(([Q,W])=>{if(!(Q in this.definitions.type))this.definitions.type[Q]=W}),this;case"function":return this.definitions.type=X(this.definitions.type),this}return this.definitions.type[X]=Z,this}mapDerive(X,Z){if(!Z)Z=X,X={as:"local"};let Q={subType:"mapDerive",fn:Z};return this.onTransform(X,Q)}affix(X,Z,Q){if(Q==="")return this;let W=["_","-"," "],Y=(q)=>q[0].toUpperCase()+q.slice(1),J=X==="prefix"?(q,G)=>W.includes(q.at(-1)??"")?q+G:q+Y(G):W.includes(Q.at(-1)??"")?(q,G)=>G+q:(q,G)=>G+Y(q),z=(q)=>{let G={};switch(q){case"decorator":for(let A in this.singleton.decorator)G[J(Q,A)]=this.singleton.decorator[A];this.singleton.decorator=G;break;case"state":for(let A in this.singleton.store)G[J(Q,A)]=this.singleton.store[A];this.singleton.store=G;break;case"model":for(let A in this.definitions.type)G[J(Q,A)]=this.definitions.type[A];this.definitions.type=G;break;case"error":for(let A in this.definitions.error)G[J(Q,A)]=this.definitions.error[A];this.definitions.error=G;break}},B=Array.isArray(Z)?Z:[Z];for(let q of B.some((G)=>G==="all")?["decorator","state","model","error"]:B)z(q);return this}prefix(X,Z){return this.affix("prefix",X,Z)}suffix(X,Z){return this.affix("suffix",X,Z)}compile(){if(this.fetch=this.config.aot?CW(this):jW(this),typeof this.server?.reload==="function")this.server.reload({...this.server||{},fetch:this.fetch});return this}get modules(){return Promise.all(this.promisedModules.promises)}};import{Readable as fU}from"node:stream";var{contentsToString:tV,contentToString:sV}=QY(),{Readable:c6,PassThrough:kU}=qY("node:stream");if(!globalThis.SUSPENSE_ROOT)globalThis.SUSPENSE_ROOT={requests:new Map,requestCounter:1,autoScript:!0};var rV=`
      <script id="kita-html-suspense">
        /*! MIT License https://kita.js.org */
        function \$KITA_RC(i){
          // simple aliases
          var d=document,q=d.querySelector.bind(d),
            // div sent as the fallback wrapper
            v=q('div[id="B:'+i+'"][data-sf]'),
            // template and script sent after promise finishes
            t=q('template[id="N:'+i+'"][data-sr]'),s=q('script[id="S:'+i+'"][data-ss]'),
            // fragment created to avoid inserting element one by one
            f=d.createDocumentFragment(),
            // used by iterators
            c,j,
            // all pending hydrations
            r;

          // if div or template is not found, let this hydration as pending
          if(t&&v&&s){
            // appends into the fragment
            while(c=t.content.firstChild)
              f.appendChild(c);

            // replaces the div and removes the script and template
            v.parentNode.replaceChild(f,v);
            t.remove();
            s.remove();

            // looks for pending templates
            r=d.querySelectorAll('template[id][data-sr]');

            do{
              // resets j & c from previous loop
              c=j=0;

              // loops over every found pending template and 
              for(;c<r.length;c++)
                if(r[c]!=t)
                  // let j as true while at least on \$KITA_RC call returns true
                  j=\$KITA_RC(r[c].id.slice(2))?!0:j;
            }while(j)

            // we know at least the original template was substituted
            return!0;
          }
        }
      </script>
    `.replace(/^\s*\/\/.*/gm,"").replace(/\n\s*/g,"");function TU($,X){if(!X)X=SUSPENSE_ROOT.requestCounter++;else if(SUSPENSE_ROOT.requests.has(X)){let Q=new Error(`The provided Request Id is already in use: ${X}.`);return new c6({read(){this.emit("error",Q),this.push(null)}})}if(typeof $==="function")try{$=$(X)}catch(Q){return SUSPENSE_ROOT.requests.delete(X),new c6({read(){this.emit("error",Q),this.push(null)}})}let Z=SUSPENSE_ROOT.requests.get(X);if(!Z){if(typeof $==="string")return c6.from([$]);return new c6({read(){$.then((Q)=>{this.push(Q),this.push(null)}).catch((Q)=>{this.emit("error",Q)})}})}return gU($,Z)}function gU($,X){if(typeof $==="string")return X.stream.push($),X.stream;let Z=new kU;return $.then((Q)=>{Z.push(Q),X.stream.pipe(Z)},(Q)=>{Z.emit("error",Q)}),Z}var gX=TU;import{Readable as yU}from"stream";function yX($){if(typeof $!=="string")return!1;$=$.trim();let X=$.length;return X>=7&&$[0]==="<"&&$[X-1]===">"}function fX($){return $.trimStart().slice(0,5).startsWith("<html")}function i6($,X,Z){if($ instanceof Promise)return $.then((W)=>i6(W,X,Z));if(typeof $==="string"){if(X.autoDoctype&&yX($)&&fX($))$="<!doctype html>"+$;return new Response($,Z?void 0:{headers:{"content-type":X.contentType}})}let Q=yU.toWeb($);if(X.autoDoctype){let W=!0;Q=Q.pipeThrough(new TransformStream({transform(Y,J){let z=Y.toString();if(W&&fX(z)&&fX(z))W=!1,z="<!doctype html>"+z;J.enqueue(z)}}))}return new Response(Q,Z?void 0:{headers:{"content-type":X.contentType}})}function WY($={}){$.contentType??="text/html; charset=utf8",$.autoDetect??=!0,$.isHtml??=yX,$.autoDoctype??=!0;let X=new u6({name:"@elysiajs/html",seed:$}).derive({as:"global"},function Z({set:Q}){return{html(W){return i6(W,$,"content-type"in Q.headers)},stream(W,Y){return i6(gX((J)=>W({...Y,id:J})),$,"content-type"in Q.headers)}}});if($.autoDetect)return X.mapResponse({as:"global"},async function Z({response:Q,set:W}){if(yX(Q)||Q instanceof fU&&"rid"in Q){let Y=await i6(Q,$,"content-type"in W.headers);if(Y instanceof Response)return Y;return W.headers["content-type"]=$.contentType,new Response(Y)}return});return X}class l6{opcion;constructor($){this.opcion=$}render(){return`
            <!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Website</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

</head>

<body>

    <nav class="navbar navbar-expand-lg bg-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Mi sitio Bun</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="/">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link " aria-current="page" href="/opcion_a">Opci\xF3n A</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link " aria-current="page" href="/opcion/b">Opci\xF3n B</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link " aria-current="page" href="/opcion/c">Opci\xF3n C</a>
                    </li>
                   
                </ul>
                <form class="d-flex" role="search">
                    <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-success" type="submit">Search</button>
                </form>
            </div>
        </div>
    </nav>

    <main class="container">
        <section class="row">
            <h2 class="text-uppercase alert alert-success" >OPCION ${this.opcion}</h2>
            <p> </p>
        </section>

        <section  class="row">
            <div class="card col-md-3 mx-3">
                <div class="card-body">
                    <h5 class="card-title">Opci\xF3n A</h5>
                    <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut lab</p>
                    <a href="/opcion_a" class="btn btn-primary">Ir a Opci\xF3n A</a>
                </div>
            </div>

            <div class="card col-md-3 mx-3">
                <div class="card-body">
                    <h5 class="card-title">Opci\xF3n B</h5>
                    <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut lab</p>
                    <a href="/opcion/b" class="btn btn-primary">Ir a Opci\xF3n B</a>
                </div>
            </div>

            <div class="card col-md-3 mx-3">
                <div class="card-body">
                    <h5 class="card-title">Opci\xF3n C</h5>
                    <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut lab</p>
                    <a href="/opcion/c" class="btn btn-primary">Ir a Opci\xF3n C</a>
                </div>
            </div>

               
        </section>
    </main>


</body>

</html>
`}}var BE=new u6().use(WY()).get("/",()=>{return Bun.file("static/index.html").text()}).get("/opcion_a",()=>{return new l6("A").render()}).get("/opcion/:opcion_seleccionada",({params:{opcion_seleccionada:$}})=>{return new l6($).render()}).listen(8080);
